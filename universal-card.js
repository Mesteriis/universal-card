/**
 * Universal Card v1.0.0
 * Advanced Lovelace card for Home Assistant
 * 
 * @author Mesteriis
 * @license MIT
 * @see https://github.com/Mesteriis/universal-card
 * 
 * Built: 2026-01-11T17:30:18.859Z
 */
(()=>{var Vi=Object.defineProperty,Yi=Object.defineProperties;var qi=Object.getOwnPropertyDescriptors;var Ge=Object.getOwnPropertySymbols;var di=Object.prototype.hasOwnProperty,ui=Object.prototype.propertyIsEnumerable;var li=(n,e,t)=>e in n?Vi(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,d=(n,e)=>{for(var t in e||(e={}))di.call(e,t)&&li(n,t,e[t]);if(Ge)for(var t of Ge(e))ui.call(e,t)&&li(n,t,e[t]);return n},H=(n,e)=>Yi(n,qi(e));var hi=(n,e)=>{var t={};for(var i in n)di.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Ge)for(var i of Ge(n))e.indexOf(i)<0&&ui.call(n,i)&&(t[i]=n[i]);return t};var Kt="1.0.0",pi="Universal Card",mi="\u041F\u0440\u043E\u0434\u0432\u0438\u043D\u0443\u0442\u0430\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430 \u0441 7 \u0440\u0435\u0436\u0438\u043C\u0430\u043C\u0438 body, grid layout, lazy loading \u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u043E\u0439 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u043E\u0439",k=Object.freeze({EXPAND:"expand",MODAL:"modal",FULLSCREEN:"fullscreen",TABS:"tabs",CAROUSEL:"carousel",SUBVIEW:"subview",NONE:"none"}),Ae=Object.values(k),$=Object.freeze({SOLID:"solid",GLASS:"glass",GLASSMORPHISM:"glassmorphism",NEUMORPHISM:"neumorphism",MINIMAL:"minimal",GRADIENT:"gradient",DARK:"dark",NEON:"neon",AURORA:"aurora"}),Wi=Object.freeze({NONE:"none",FADE:"fade",SLIDE:"slide",BOUNCE:"bounce",ELASTIC:"elastic",SMOOTH:"smooth",SHARP:"sharp",ZOOM:"zoom"}),Xi=Object.freeze({SKELETON:"skeleton",SPINNER:"spinner",DOTS:"dots",PROGRESS:"progress",SHIMMER:"shimmer",PULSE:"pulse"}),A=Object.freeze({STATE:"state",NUMERIC_STATE:"numeric_state",USER:"user",TIME:"time",SCREEN:"screen",AND:"and",OR:"or",NOT:"not"}),B=Object.freeze({NONE:"none",TOGGLE:"toggle",CALL_SERVICE:"call-service",NAVIGATE:"navigate",URL:"url",MORE_INFO:"more-info",FIRE_EVENT:"fire-dom-event",EXPAND:"expand",COLLAPSE:"collapse"}),ve=Object.freeze({CARD_EXPANDED:"universal-card-expanded",CARD_COLLAPSED:"universal-card-collapsed",CARD_CONTROL:"universal-card-control",CONFIG_CHANGED:"config-changed",HASS_UPDATED:"hass-updated"}),fi=Object.freeze({PRIMARY:"--uc-primary-color",SECONDARY:"--uc-secondary-color",ACCENT:"--uc-accent-color",BACKGROUND:"--uc-background-color",SURFACE:"--uc-surface-color",TEXT:"--uc-text-color",TEXT_SECONDARY:"--uc-text-secondary-color",BORDER:"--uc-border-color",BORDER_RADIUS:"--uc-border-radius",PADDING:"--uc-padding",GAP:"--uc-gap",SHADOW:"--uc-shadow",SHADOW_HOVER:"--uc-shadow-hover",TRANSITION_DURATION:"--uc-transition-duration",TRANSITION_TIMING:"--uc-transition-timing"}),E=Object.freeze({body_mode:k.EXPAND,expanded:!1,animation:!0,theme:$.SOLID,border_radius:"var(--ha-card-border-radius, 12px)",padding:"16px",grid_columns:1,grid_gap:"16px",modal_width:"90%",modal_max_width:"600px",backdrop_color:"rgba(0, 0, 0, 0.6)",lazy_load:!0,remember_state:!1,show_expand_icon:!0,expand_icon:"mdi:chevron-down",haptic:!1,loading_type:Xi.SKELETON,skeleton_count:3,carousel_autoplay:!1,carousel_interval:5e3,animation_preset:Wi.SMOOTH,animation_duration:300}),R=Object.freeze({MAX_GRID_COLUMNS:12,MIN_GRID_COLUMNS:1,MAX_CARDS_PER_BODY:100,MAX_TABS:20,UPDATE_THROTTLE_MS:100,RESIZE_DEBOUNCE_MS:200,INTERSECTION_MARGIN:"100px",MAX_UNDO_HISTORY:50,MAX_LOG_ENTRIES:1e3});function Ve(n="uc"){let e=Math.random().toString(36).substring(2,10);return"".concat(n,"-").concat(e)}function W(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)}function Jt(n){return typeof n=="string"&&n.trim().length>0}function Zt(n){return typeof n=="number"&&!Number.isNaN(n)}function Qt(n,e){let t=d({},n);return W(n)&&W(e)&&Object.keys(e).forEach(i=>{W(e[i])&&i in n?t[i]=Qt(n[i],e[i]):t[i]=e[i]}),t}function X(n){if(n===null||typeof n!="object")return n;if(Array.isArray(n))return n.map(t=>X(t));let e={};return Object.keys(n).forEach(t=>{e[t]=X(n[t])}),e}function _i(n,e,t=void 0){if(!n||!e)return t;let i=e.split("."),r=n;for(let s of i){if(r==null)return t;r=r[s]}return r!==void 0?r:t}function gi(n){return n==null?[]:Array.isArray(n)?n:[n]}function m(n,e,t={},i={}){let r=new CustomEvent(e,{bubbles:i.bubbles!==!1,cancelable:i.cancelable!==!1,composed:i.composed!==!1,detail:t});return n.dispatchEvent(r),r}function bi(){return new Promise(n=>{requestAnimationFrame(()=>{requestAnimationFrame(n)})})}function yi(n,e=2){return Zt(n)?n.toFixed(e):""}function vi(n,e={},t="ru-RU"){let i=n instanceof Date?n:new Date(n),r={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Intl.DateTimeFormat(t,d(d({},r),e)).format(i)}function Ye(n){return Jt(n)?/^[a-z_]+\.[a-z0-9_]+$/.test(n):!1}var x=class extends Error{constructor(e,t){super(t?"".concat(t,": ").concat(e):e),this.name="ConfigValidationError",this.path=t}},xe=class{static validate(e){var i,r,s;if(!W(e))throw new x("Configuration must be an object");if(e.body_mode&&!Ae.includes(e.body_mode))throw new x('Invalid body_mode: "'.concat(e.body_mode,'". ')+"Valid modes: ".concat(Ae.join(", ")),"body_mode");let t=Object.values($);if(e.theme&&!t.includes(e.theme))throw new x('Invalid theme: "'.concat(e.theme,'". Valid themes: ').concat(t.join(", ")),"theme");if(e.entity&&!Ye(e.entity))throw new x('Invalid entity format: "'.concat(e.entity,'"'),"entity");if((i=e.grid)!=null&&i.columns){let o=e.grid.columns;if(!Zt(o)||o<R.MIN_GRID_COLUMNS||o>R.MAX_GRID_COLUMNS)throw new x("Grid columns must be between ".concat(R.MIN_GRID_COLUMNS," and ").concat(R.MAX_GRID_COLUMNS),"grid.columns")}if((r=e.body)!=null&&r.cards){if(!Array.isArray(e.body.cards))throw new x("body.cards must be an array","body.cards");if(e.body.cards.length>R.MAX_CARDS_PER_BODY)throw new x("Maximum ".concat(R.MAX_CARDS_PER_BODY," cards allowed in body"),"body.cards");e.body.cards.forEach((o,a)=>{this._validateCardConfig(o,"body.cards[".concat(a,"]"))})}if((s=e.header)!=null&&s.cards){if(!Array.isArray(e.header.cards))throw new x("header.cards must be an array","header.cards");e.header.cards.forEach((o,a)=>{this._validateCardConfig(o,"header.cards[".concat(a,"]"))})}return e.tabs&&this._validateTabs(e.tabs),e.visibility&&this._validateConditions(e.visibility,"visibility"),["tap_action","hold_action","double_tap_action"].forEach(o=>{e[o]&&this._validateAction(e[o],o)}),!0}static _validateCardConfig(e,t){if(!W(e))throw new x("Card config must be an object",t);if(!e.type)throw new x("Card must have a type",t)}static _validateTabs(e){if(!Array.isArray(e))throw new x("tabs must be an array","tabs");if(e.length>R.MAX_TABS)throw new x("Maximum ".concat(R.MAX_TABS," tabs allowed"),"tabs");e.forEach((t,i)=>{if(!W(t))throw new x("Tab config must be an object","tabs[".concat(i,"]"));if(t.cards&&!Array.isArray(t.cards))throw new x("Tab cards must be an array","tabs[".concat(i,"].cards"))})}static _validateConditions(e,t){if(!Array.isArray(e))throw new x("Visibility must be an array",t);let i=Object.values(A);e.forEach((r,s)=>{let o="".concat(t,"[").concat(s,"]");if(!W(r))throw new x("Condition must be an object",o);if(!r.condition)throw new x('Condition must have a "condition" type',o);if(!i.includes(r.condition))throw new x('Invalid condition type: "'.concat(r.condition,'"'),o)})}static _validateAction(e,t){if(!W(e))throw new x("Action must be an object",t);let i=Object.values(B);if(e.action&&!i.includes(e.action))throw new x('Invalid action: "'.concat(e.action,'"'),t);if(e.action===B.CALL_SERVICE&&!e.service)throw new x('call-service action requires a "service" property',t);if(e.action===B.NAVIGATE&&!e.navigation_path)throw new x('navigate action requires a "navigation_path" property',t);if(e.action===B.URL&&!e.url_path)throw new x('url action requires a "url_path" property',t)}static normalize(e){this.validate(e);let t=d(d({},E),e);return t.card_id||(t.card_id=Ve("uc")),t.header=this._normalizeSection(e.header,"header"),t.body=this._normalizeSection(e.body,"body"),e.footer&&(t.footer=this._normalizeSection(e.footer,"footer")),e.tabs&&(t.tabs=e.tabs.map((i,r)=>d({label:i.label||"Tab ".concat(r+1),icon:i.icon||null,cards:i.cards||[]},i))),t.grid=this._normalizeGrid(e.grid),t.tap_action=this._normalizeAction(e.tap_action,"toggle"),t.hold_action=this._normalizeAction(e.hold_action,"none"),t.double_tap_action=this._normalizeAction(e.double_tap_action,"none"),e.visibility&&(t.visibility=e.visibility.map(i=>this._normalizeCondition(i))),t}static _normalizeSection(e,t){return e?d({cards:e.cards||[]},e):{cards:[]}}static _normalizeGrid(e){return e?{columns:e.columns||E.grid_columns,gap:e.gap||E.grid_gap,responsive:e.responsive||null}:{columns:E.grid_columns,gap:E.grid_gap}}static _normalizeAction(e,t="none"){return e?d({action:e.action||t},e):{action:t}}static _normalizeCondition(e){let t=d({condition:e.condition},e);return e.condition===A.STATE&&e.state&&(t.state=Array.isArray(e.state)?e.state:[e.state]),t}static getTitle(e,t){var i;return e.title?e.title:e.entity&&((i=t==null?void 0:t.states)!=null&&i[e.entity])?t.states[e.entity].attributes.friendly_name||e.entity:""}static getSubtitle(e,t){var i;return e.subtitle?e.subtitle:e.entity&&((i=t==null?void 0:t.states)!=null&&i[e.entity])?t.states[e.entity].state:""}static hasChanged(e,t){return JSON.stringify(e)!==JSON.stringify(t)}static getSchema(){return{type:"object",properties:{title:{type:"string"},subtitle:{type:"string"},icon:{type:"string"},entity:{type:"string"},body_mode:{type:"string",enum:Ae,default:k.EXPAND},theme:{type:"string",enum:Object.values($),default:$.SOLID},expanded:{type:"boolean",default:!1},animation:{type:"boolean",default:!0},lazy_load:{type:"boolean",default:!0},show_expand_icon:{type:"boolean",default:!0},grid:{type:"object",properties:{columns:{type:"number",minimum:1,maximum:12},gap:{type:"string"}}}}}}};function Q(n,e=100,t={}){let{leading:i=!1,trailing:r=!0}=t,s=null,o=null,a=null,c=null,l=null;function u(v){let q=o,ye=a;return o=null,a=null,l=v,c=n.apply(ye,q),c}function h(v){let q=l===null?e:v-l;return l===null||q>=e}function f(){let v=Date.now();if(h(v))return p(v);s=setTimeout(f,e-(v-l))}function p(v){return s=null,r&&o?u(v):(o=null,a=null,c)}function _(v){return l=v,s=setTimeout(f,e),i?u(v):c}function y(...v){let q=Date.now(),ye=h(q);return o=v,a=this,ye&&s===null?_(q):(s===null&&(s=setTimeout(f,e)),c)}return y.cancel=function(){s!==null&&clearTimeout(s),o=null,a=null,l=null,s=null},y.flush=function(){return s!==null?p(Date.now()):c},y.pending=function(){return s!==null},y}function Oe(n,e=16,t={}){let{leading:i=!0,trailing:r=!0}=t,s=0,o=null,a=null,c=null;function l(){let h=a,f=c;return a=null,c=null,s=Date.now(),n.apply(f,h)}function u(...h){let p=Date.now()-s;if(a=h,c=this,p>=e&&(o!==null&&(clearTimeout(o),o=null),i))return l();if(o===null&&r){let _=e-p;o=setTimeout(()=>{o=null,l()},_>0?_:0)}}return u.cancel=function(){o!==null&&(clearTimeout(o),o=null),s=0,a=null,c=null},u}function xi(n){return requestAnimationFrame(n)}function wi(n){return new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{n(),e()})})})}function ei(n){return new Promise(e=>{requestAnimationFrame(()=>{n.forEach(t=>{try{t()}catch(i){console.error("[UniversalCard] Batch update error:",i)}}),e()})})}function ki(){let n=[],e=!1;function t(){if(n.length===0)return;let r=[...n];n.length=0,e=!1,ei(r)}function i(r){n.push(r),e||(e=!0,requestAnimationFrame(t))}return{add:i,flush:t}}function Ei(n,e={}){let{timeout:t=1e3}=e;return"requestIdleCallback"in window?window.requestIdleCallback(n,{timeout:t}):setTimeout(n,1)}function Si(n,e){let t=performance.now(),i=e(),r=performance.now();return console.debug("[UniversalCard] ".concat(n,": ").concat((r-t).toFixed(2),"ms")),i}var qe=null;async function ze(){return qe||(qe=new Promise(async n=>{if(window.loadCardHelpers){n(await window.loadCardHelpers());return}let e=setInterval(async()=>{window.loadCardHelpers&&(clearInterval(e),n(await window.loadCardHelpers()))},100);setTimeout(()=>{clearInterval(e),console.warn("[UniversalCard] Card helpers not available"),n(null)},1e4)}),qe)}async function ti(n){if(!n||!n.type)throw new Error("Card config must have a type");let e=await ze();if(e)try{return await e.createCardElement(n)}catch(t){throw new Error("Failed to create card: ".concat(t.message))}return Ki(n)}function Ki(n){let e=n.type,t=e;e.startsWith("custom:")?t=e.slice(7):t="hui-".concat(e,"-card");let i=document.createElement(t);return i.setConfig&&i.setConfig(n),i}async function ae(n){return Array.isArray(n)?(await Promise.allSettled(n.map(t=>ti(t)))).map((t,i)=>t.status==="fulfilled"?t.value:(console.error("[UniversalCard] Card creation failed:",t.reason),ii(t.reason,n[i]))):[]}function ii(n,e){let t=document.createElement("ha-card");return t.className="uc-error-card",t.innerHTML='\n    <div class="error-content">\n      <ha-icon icon="mdi:alert-circle-outline"></ha-icon>\n      <span class="error-message">'.concat(n.message||"Unknown error",'</span>\n      <button class="error-details-btn">?</button>\n    </div>\n  '),t._errorData={error:n,config:e,stack:n.stack},t}function We(n,e){return!(n!=null&&n.states)||!e?null:n.states[e]||null}function L(n,e,t="unavailable"){var r;let i=We(n,e);return(r=i==null?void 0:i.state)!=null?r:t}function te(n,e,t,i){var s,o;let r=We(n,e);return(o=(s=r==null?void 0:r.attributes)==null?void 0:s[t])!=null?o:i}function Ci(n,e,t){let i=L(n,e);return(Array.isArray(t)?t:[t]).includes(i)}async function K(n,e,t,i={}){if(!t||t.action==="none")return;let{action:r}=t;switch(r){case"toggle":await Ji(n,t);break;case"call-service":await Zi(n,t);break;case"navigate":Qi(t);break;case"url":er(t);break;case"more-info":tr(e,t);break;case"fire-dom-event":ir(e,t);break;default:console.warn("[UniversalCard] Unknown action: ".concat(r))}}async function Ji(n,e){let t=e.entity;if(!t)return;let i=t.split(".")[0];await n.callService(i,"toggle",{entity_id:t})}async function Zi(n,e){let{service:t,service_data:i,target:r}=e;if(!t)return;let[s,o]=t.split(".");await n.callService(s,o,i||{},r)}function Qi(n){let e=n.navigation_path;e&&(history.pushState(null,"",e),window.dispatchEvent(new CustomEvent("location-changed")))}function er(n){let e=n.url_path;if(!e)return;let t=n.url_target||"_blank";window.open(e,t)}function tr(n,e){let t=e.entity;if(!t)return;let i=new CustomEvent("hass-more-info",{bubbles:!0,composed:!0,detail:{entityId:t}});n.dispatchEvent(i)}function ir(n,e){let t=new CustomEvent("ll-custom",{bubbles:!0,composed:!0,detail:e});n.dispatchEvent(t)}function Ti(n="light"){let e=new CustomEvent("haptic",{bubbles:!0,composed:!0,detail:n});window.dispatchEvent(e)}function $i(n){let e=getComputedStyle(n);return{primaryColor:e.getPropertyValue("--primary-color").trim(),accentColor:e.getPropertyValue("--accent-color").trim(),textColor:e.getPropertyValue("--primary-text-color").trim(),secondaryTextColor:e.getPropertyValue("--secondary-text-color").trim(),backgroundColor:e.getPropertyValue("--primary-background-color").trim(),cardBackgroundColor:e.getPropertyValue("--ha-card-background").trim()||e.getPropertyValue("--card-background-color").trim(),dividerColor:e.getPropertyValue("--divider-color").trim(),borderRadius:e.getPropertyValue("--ha-card-border-radius").trim()||"12px"}}function Xe(n){return(n==null?void 0:n.user)||null}function Ai(n){var e;return((e=n==null?void 0:n.user)==null?void 0:e.is_admin)===!0}var Ie=class{constructor(e,t={}){this._config=e,this._options=t,this._element=null,this._leftCards=[],this._rightCards=[],this._contentCards=[],this._hass=null,this._expanded=!1,this._holdTimer=null,this._isHolding=!1,this._holdDuration=500,this._lastTapTime=0,this._doubleTapThreshold=300}set hass(e){this._hass=e,this._updateCards(e),this._updateDynamicContent()}set expanded(e){this._expanded=e,this._updateExpandedState()}render(){let e=this._config;return this._element=document.createElement("div"),this._element.className=this._getHeaderClasses(),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0"),this._element.setAttribute("aria-expanded",String(this._expanded)),this._element.innerHTML='\n      <div class="header-left">\n        '.concat(this._renderIcon(),'\n        <div class="header-left-slot"></div>\n      </div>\n      <div class="header-content">\n        ').concat(this._renderTitle(),"\n        ").concat(this._renderSubtitle(),"\n        ").concat(this._renderBadges(),'\n        <div class="header-cards-slot"></div>\n      </div>\n      <div class="header-right">\n        <div class="header-right-slot"></div>\n        ').concat(this._renderExpandIcon(),"\n      </div>\n    "),this._bindEvents(),this._element}_renderIcon(){let{icon:e,entity:t}=this._config;if(!e&&!t)return"";let i=e||this._getEntityIcon(t);return i?'\n      <ha-icon class="header-icon" icon="'.concat(i,'"></ha-icon>\n    '):""}_renderTitle(){let{title:e,entity:t}=this._config,i=e||this._getEntityName(t)||"";return i?'<div class="header-title">'.concat(i,"</div>"):""}_renderSubtitle(){let{subtitle:e,entity:t,show_state:i}=this._config,r=e||"";if(i!==!1&&t&&this._hass){let s=L(this._hass,t);s&&s!=="unavailable"&&(r=r?"".concat(r," \xB7 ").concat(s):s)}return r?'<div class="header-subtitle">'.concat(r,"</div>"):""}_renderBadges(){let{badges:e}=this._config;if(!e||!Array.isArray(e)||e.length===0)return"";let t=e.map(i=>this._renderBadge(i)).join("");return'<div class="header-badges">'.concat(t,"</div>")}_renderBadge(e){let{entity:t,icon:i,color:r,value:s,label:o}=e,a=s||"",c=r||"var(--primary-color)";if(t&&this._hass){a=L(this._hass,t,"");let f=this._hass.states[t];if(f){let p=this._getStateColor(f.state);p&&(c=p)}}let l=i?'<ha-icon icon="'.concat(i,'"></ha-icon>'):"",u=o?'<span class="badge-label">'.concat(o,"</span>"):"",h=a?'<span class="badge-value">'.concat(a,"</span>"):"";return'\n      <div class="badge" style="--badge-color: '.concat(c,'">\n        ').concat(l).concat(u).concat(h,"\n      </div>\n    ")}_renderExpandIcon(){let{show_expand_icon:e,expand_icon:t,body_mode:i}=this._config;if(i==="none"||e===!1)return"";let r=t||"mdi:chevron-down",s=this._expanded?"expanded":"";return'\n      <ha-icon class="expand-icon '.concat(s,'" icon="').concat(r,'"></ha-icon>\n    ')}_getHeaderClasses(){let e=["header"];return this._expanded&&e.push("expanded"),(this._config.sticky_header||this._config.sticky)&&e.push("sticky"),this._config.clickable===!1&&e.push("non-clickable"),e.join(" ")}async loadCards(){let{header_left:e,header_right:t,cards:i}=this._config,r=[];e!=null&&e.cards&&r.push(this._loadSlotCards(e.cards,".header-left-slot","_leftCards")),t!=null&&t.cards&&r.push(this._loadSlotCards(t.cards,".header-right-slot","_rightCards")),i&&r.push(this._loadSlotCards(i,".header-cards-slot","_contentCards")),await Promise.all(r)}async _loadSlotCards(e,t,i){var s;if(!Array.isArray(e)||e.length===0)return;let r=(s=this._element)==null?void 0:s.querySelector(t);if(r)try{let o=await ae(e);this[i]=o;let a=document.createDocumentFragment();o.forEach(c=>{this._hass&&(c.hass=this._hass),a.appendChild(c)}),r.appendChild(a)}catch(o){console.error("[UniversalCard] Failed to load slot cards:",o)}}_updateCards(e){[...this._leftCards,...this._rightCards,...this._contentCards].forEach(i=>{if(i&&"hass"in i)try{i.hass=e}catch(r){}})}_bindEvents(){this._element&&(this._element.addEventListener("click",e=>this._handleClick(e)),this._element.addEventListener("touchstart",e=>this._handleTouchStart(e),{passive:!0}),this._element.addEventListener("touchend",e=>this._handleTouchEnd(e)),this._element.addEventListener("touchcancel",()=>this._cancelHold()),this._element.addEventListener("mousedown",e=>this._handleMouseDown(e)),this._element.addEventListener("mouseup",()=>this._handleMouseUp()),this._element.addEventListener("mouseleave",()=>this._cancelHold()),this._element.addEventListener("keydown",e=>this._handleKeydown(e)),this._element.addEventListener("contextmenu",e=>this._handleContextMenu(e)))}_handleClick(e){if(this._isInteractiveElement(e.target))return;if(this._isHolding){this._isHolding=!1;return}let t=Date.now(),i=t-this._lastTapTime;if(this._lastTapTime=t,i<this._doubleTapThreshold){e.preventDefault(),this._executeAction("double_tap_action");return}setTimeout(()=>{Date.now()-this._lastTapTime>=this._doubleTapThreshold&&this._executeAction("tap_action")},this._doubleTapThreshold)}_handleTouchStart(e){this._isInteractiveElement(e.target)||this._startHold()}_handleTouchEnd(e){this._endHold()}_handleMouseDown(e){e.button===0&&(this._isInteractiveElement(e.target)||this._startHold())}_handleMouseUp(){this._endHold()}_startHold(){this._cancelHold(),this._holdTimer=setTimeout(()=>{this._isHolding=!0,this._executeAction("hold_action")},this._holdDuration)}_endHold(){this._holdTimer&&(clearTimeout(this._holdTimer),this._holdTimer=null)}_cancelHold(){this._endHold(),this._isHolding=!1}_handleKeydown(e){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this._executeAction("tap_action"))}_handleContextMenu(e){this._config.context_menu&&(e.preventDefault(),m(this._element,"uc-context-menu",{x:e.clientX,y:e.clientY,config:this._config.context_menu}))}_isInteractiveElement(e){let t=["ha-icon-button","button","a","input","select","textarea",'[role="button"]',".badge"];return e.closest(t.join(", "))!==null}_executeAction(e){let t=this._config[e];if(!t&&e==="tap_action"){m(this._element,"uc-toggle");return}if(!(!t||t.action===B.NONE)){if(t.action===B.EXPAND){m(this._element,"uc-expand");return}if(t.action===B.COLLAPSE){m(this._element,"uc-collapse");return}if(t.action==="toggle"){m(this._element,"uc-toggle");return}K(this._hass,this._element,t)}}_updateExpandedState(){if(!this._element)return;this._element.classList.toggle("expanded",this._expanded),this._element.setAttribute("aria-expanded",String(this._expanded));let e=this._element.querySelector(".expand-icon");e&&e.classList.toggle("expanded",this._expanded)}_updateDynamicContent(){if(!(!this._element||!this._hass)){if(this._config.entity&&this._config.show_state!==!1){let e=this._element.querySelector(".header-subtitle");if(e){let t=L(this._hass,this._config.entity),i=this._config.subtitle;e.textContent=i?"".concat(i," \xB7 ").concat(t):t}}this._updateBadges()}}_updateBadges(){let{badges:e}=this._config;if(!e||!Array.isArray(e))return;let t=this._element.querySelectorAll(".badge");e.forEach((i,r)=>{if(!i.entity||!t[r])return;let s=L(this._hass,i.entity,""),o=t[r].querySelector(".badge-value");o&&(o.textContent=s)})}_getEntityIcon(e){if(!this._hass||!e)return null;let t=this._hass.states[e];if(!t)return null;if(t.attributes.icon)return t.attributes.icon;let i=e.split(".")[0];return this._getDomainIcon(i)}_getEntityName(e){var i;if(!this._hass||!e)return null;let t=this._hass.states[e];return((i=t==null?void 0:t.attributes)==null?void 0:i.friendly_name)||null}_getDomainIcon(e){return{light:"mdi:lightbulb",switch:"mdi:toggle-switch",sensor:"mdi:eye",binary_sensor:"mdi:radiobox-blank",climate:"mdi:thermostat",cover:"mdi:window-shutter",fan:"mdi:fan",media_player:"mdi:cast",camera:"mdi:video",lock:"mdi:lock",alarm_control_panel:"mdi:shield-home",automation:"mdi:robot",script:"mdi:script-text",scene:"mdi:palette",input_boolean:"mdi:toggle-switch-outline",input_number:"mdi:ray-vertex",input_select:"mdi:format-list-bulleted",input_text:"mdi:form-textbox",person:"mdi:account",device_tracker:"mdi:account",weather:"mdi:weather-partly-cloudy",vacuum:"mdi:robot-vacuum"}[e]||"mdi:bookmark"}_getStateColor(e){return{on:"var(--state-active-color, #fdd835)",off:"var(--state-inactive-color, #969696)",home:"var(--state-home-color, #4caf50)",not_home:"var(--state-not-home-color, #f44336)",armed_home:"var(--state-warning-color, #ff9800)",armed_away:"var(--state-error-color, #f44336)",disarmed:"var(--state-success-color, #4caf50)",unavailable:"var(--state-unavailable-color, #bdbdbd)"}[e]||null}destroy(){this._cancelHold(),this._leftCards=[],this._rightCards=[],this._contentCards=[],this._element=null}};var Le=class{constructor(e,t={}){this._config=e,this._options=t,this._element=null,this._leftCards=[],this._rightCards=[],this._contentCards=[],this._hass=null,this._holdTimer=null,this._isHolding=!1}set hass(e){this._hass=e,this._updateCards(e)}render(){let e=this._config;return this._element=document.createElement("div"),this._element.className=this._getFooterClasses(),this._element.innerHTML='\n      <div class="footer-left">\n        <div class="footer-left-slot"></div>\n      </div>\n      <div class="footer-content">\n        '.concat(this._renderText(),'\n        <div class="footer-cards-slot"></div>\n      </div>\n      <div class="footer-right">\n        <div class="footer-right-slot"></div>\n        ').concat(this._renderActions(),"\n      </div>\n    "),this._bindEvents(),this._element}_renderText(){let{text:e,icon:t}=this._config;if(!e)return"";let i=t?'<ha-icon icon="'.concat(t,'"></ha-icon>'):"";return'\n      <div class="footer-text">\n        '.concat(i,"\n        <span>").concat(e,"</span>\n      </div>\n    ")}_renderActions(){let{actions:e}=this._config;return!e||!Array.isArray(e)?"":e.map((t,i)=>'\n      <button class="footer-action-btn" data-action-index="'.concat(i,'">\n        ').concat(t.icon?'<ha-icon icon="'.concat(t.icon,'"></ha-icon>'):"","\n        ").concat(t.label||"","\n      </button>\n    ")).join("")}_getFooterClasses(){let e=["footer"];return this._config.sticky&&e.push("sticky"),this._config.border_top!==!1&&e.push("with-border"),e.join(" ")}async loadCards(){let{footer_left:e,footer_right:t,cards:i}=this._config,r=[];e!=null&&e.cards&&r.push(this._loadSlotCards(e.cards,".footer-left-slot","_leftCards")),t!=null&&t.cards&&r.push(this._loadSlotCards(t.cards,".footer-right-slot","_rightCards")),i&&r.push(this._loadSlotCards(i,".footer-cards-slot","_contentCards")),await Promise.all(r)}async _loadSlotCards(e,t,i){var s;if(!Array.isArray(e)||e.length===0)return;let r=(s=this._element)==null?void 0:s.querySelector(t);if(r)try{let o=await ae(e);this[i]=o;let a=document.createDocumentFragment();o.forEach(c=>{this._hass&&(c.hass=this._hass),a.appendChild(c)}),r.appendChild(a)}catch(o){console.error("[UniversalCard] Failed to load footer cards:",o)}}_updateCards(e){[...this._leftCards,...this._rightCards,...this._contentCards].forEach(i=>{if(i&&"hass"in i)try{i.hass=e}catch(r){}})}_bindEvents(){this._element&&(this._element.querySelectorAll(".footer-action-btn").forEach(e=>{e.addEventListener("click",t=>this._handleActionClick(t))}),(this._config.tap_action||this._config.hold_action)&&(this._element.addEventListener("click",e=>this._handleClick(e)),this._element.addEventListener("mousedown",e=>this._handleMouseDown(e)),this._element.addEventListener("mouseup",()=>this._handleMouseUp()),this._element.addEventListener("mouseleave",()=>this._cancelHold())))}_handleActionClick(e){var s;let t=e.currentTarget,i=parseInt(t.dataset.actionIndex,10),r=(s=this._config.actions)==null?void 0:s[i];r&&K(this._hass,this._element,r)}_handleClick(e){if(!this._isInteractiveElement(e.target)){if(this._isHolding){this._isHolding=!1;return}this._executeAction("tap_action")}}_handleMouseDown(e){e.button===0&&(this._isInteractiveElement(e.target)||(this._holdTimer=setTimeout(()=>{this._isHolding=!0,this._executeAction("hold_action")},500)))}_handleMouseUp(){this._holdTimer&&(clearTimeout(this._holdTimer),this._holdTimer=null)}_cancelHold(){this._handleMouseUp(),this._isHolding=!1}_isInteractiveElement(e){return e.closest("button, a, input, .footer-action-btn")!==null}_executeAction(e){let t=this._config[e];!t||t.action===B.NONE||K(this._hass,this._element,t)}destroy(){this._cancelHold(),this._leftCards=[],this._rightCards=[],this._contentCards=[],this._element=null}};var Ke=class{constructor(e=[]){this._configs=e,this._element=null,this._hass=null}set hass(e){this._hass=e,this._update()}set configs(e){this._configs=e,this._render()}render(){return this._element=document.createElement("div"),this._element.className="badges-container",this._renderBadges(),this._element}_renderBadges(){this._element&&(this._element.innerHTML=this._configs.map((e,t)=>this._renderBadge(e,t)).join(""))}_renderBadge(e,t){let{type:i="state",entity:r,attribute:s,icon:o,color:a,value:c,label:l,unit:u,min:h,max:f,show_name:p=!1,tap_action:_}=e,y=this._getValue(e),v=a||this._getAutoColor(e);y!=null&&(y=this._formatValue(y,e));let q=o?'<ha-icon class="badge-icon" icon="'.concat(o,'"></ha-icon>'):"",ye=l?'<span class="badge-label">'.concat(l,"</span>"):"",Z=u?'<span class="badge-unit">'.concat(u,"</span>"):"",De=y!=null?'<span class="badge-value">'.concat(y,"</span>").concat(Z):"",Wt=this._renderProgress(e,y),Xt=_?"clickable":"";return'\n      <div class="badge '.concat(Xt,'" \n           data-badge-index="').concat(t,'"\n           style="--badge-color: ').concat(v,'">\n        ').concat(q,'\n        <div class="badge-content">\n          ').concat(ye,"\n          ").concat(De,"\n          ").concat(Wt,"\n        </div>\n      </div>\n    ")}_renderProgress(e,t){let{min:i,max:r,show_progress:s}=e;if(!s||i===void 0||r===void 0)return"";let o=parseFloat(t);if(isNaN(o))return"";let a=Math.min(100,Math.max(0,(o-i)/(r-i)*100));return'\n      <div class="badge-progress">\n        <div class="badge-progress-bar" style="width: '.concat(a,'%"></div>\n      </div>\n    ')}_getValue(e){let{type:t,entity:i,attribute:r,value:s}=e;if(s!==void 0)return s;if(!i||!this._hass)return null;switch(t){case"state":return L(this._hass,i);case"attribute":return te(this._hass,i,r);case"counter":return this._getCounterValue(e);default:return L(this._hass,i)}}_getCounterValue(e){let{entities:t,domain:i,state:r,count_state:s}=e;if(!this._hass)return 0;let o=[];t&&Array.isArray(t)?o=t:i&&(o=Object.keys(this._hass.states).filter(c=>c.startsWith("".concat(i,"."))));let a=s||r||"on";return o.filter(c=>{let l=this._hass.states[c];return(l==null?void 0:l.state)===a}).length}_formatValue(e,t){let{precision:i,format:r}=t;if(i!==void 0&&!isNaN(parseFloat(e)))return parseFloat(e).toFixed(i);if(r==="time"||r==="date")try{let s=new Date(e);return r==="time"?s.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}):s.toLocaleDateString("ru-RU")}catch(s){return e}return r==="duration"?this._formatDuration(e):String(e)}_formatDuration(e){let t=parseInt(e,10);if(isNaN(t))return e;let i=Math.floor(t/3600),r=Math.floor(t%3600/60),s=t%60;return i>0?"".concat(i,":").concat(String(r).padStart(2,"0"),":").concat(String(s).padStart(2,"0")):"".concat(r,":").concat(String(s).padStart(2,"0"))}_getAutoColor(e){let{entity:t,thresholds:i}=e,r="var(--primary-color)";if(!t||!this._hass)return r;let s=this._hass.states[t];if(!s)return r;let o={on:"var(--state-active-color, #fdd835)",off:"var(--disabled-text-color, #969696)",home:"var(--success-color, #4caf50)",not_home:"var(--error-color, #f44336)",unavailable:"var(--disabled-text-color, #bdbdbd)",unknown:"var(--disabled-text-color, #bdbdbd)"};if(o[s.state])return o[s.state];if(i&&Array.isArray(i)){let a=parseFloat(s.state);if(!isNaN(a)){let c=[...i].sort((l,u)=>u.value-l.value);for(let l of c)if(a>=l.value)return l.color}}return r}_update(){if(!this._element||!this._hass)return;let e=this._element.querySelectorAll(".badge");this._configs.forEach((t,i)=>{let r=e[i];if(!r)return;let s=r.querySelector(".badge-value");if(s){let a=this._getValue(t);s.textContent=this._formatValue(a,t)}let o=t.color||this._getAutoColor(t);if(r.style.setProperty("--badge-color",o),t.show_progress){let a=r.querySelector(".badge-progress-bar");if(a){let c=parseFloat(this._getValue(t)),l=Math.min(100,Math.max(0,(c-t.min)/(t.max-t.min)*100));a.style.width="".concat(l,"%")}}})}static getStyles(){return"\n      .badges-container {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 8px;\n        margin-top: 8px;\n      }\n      \n      .badge {\n        display: inline-flex;\n        align-items: center;\n        gap: 4px;\n        padding: 4px 8px;\n        background: color-mix(in srgb, var(--badge-color) 15%, transparent);\n        border-radius: 12px;\n        font-size: 12px;\n        color: var(--badge-color);\n      }\n      \n      .badge.clickable {\n        cursor: pointer;\n        transition: background 0.2s ease;\n      }\n      \n      .badge.clickable:hover {\n        background: color-mix(in srgb, var(--badge-color) 25%, transparent);\n      }\n      \n      .badge-icon {\n        --mdc-icon-size: 14px;\n      }\n      \n      .badge-content {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start;\n        gap: 2px;\n      }\n      \n      .badge-label {\n        font-size: 10px;\n        opacity: 0.8;\n        text-transform: uppercase;\n      }\n      \n      .badge-value {\n        font-weight: 500;\n      }\n      \n      .badge-unit {\n        font-size: 10px;\n        opacity: 0.8;\n        margin-left: 2px;\n      }\n      \n      .badge-progress {\n        width: 100%;\n        height: 3px;\n        background: rgba(0, 0, 0, 0.1);\n        border-radius: 2px;\n        overflow: hidden;\n        margin-top: 2px;\n      }\n      \n      .badge-progress-bar {\n        height: 100%;\n        background: var(--badge-color);\n        border-radius: 2px;\n        transition: width 0.3s ease;\n      }\n    "}destroy(){this._element=null,this._hass=null}};var rr="\n  /* ============================= */\n  /* HEADER */\n  /* ============================= */\n  \n  .header {\n    display: flex;\n    align-items: center;\n    padding: var(--uc-padding, 16px);\n    cursor: pointer;\n    user-select: none;\n    transition: background-color 0.2s ease;\n    position: relative;\n  }\n  \n  .header:hover {\n    background: var(--uc-header-hover-bg, rgba(0, 0, 0, 0.04));\n  }\n  \n  .header:focus-visible {\n    outline: 2px solid var(--primary-color);\n    outline-offset: -2px;\n  }\n  \n  .header:active {\n    background: var(--uc-header-active-bg, rgba(0, 0, 0, 0.08));\n  }\n  \n  .header.non-clickable {\n    cursor: default;\n  }\n  \n  .header.non-clickable:hover,\n  .header.non-clickable:active {\n    background: transparent;\n  }\n  \n  /* Sticky Header */\n  .header.sticky {\n    position: sticky;\n    top: 0;\n    z-index: 10;\n    background: var(--ha-card-background, var(--card-background-color, white));\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  }\n  \n  /* ============================= */\n  /* HEADER LEFT */\n  /* ============================= */\n  \n  .header-left {\n    display: flex;\n    align-items: center;\n    flex-shrink: 0;\n    margin-right: 12px;\n  }\n  \n  .header-left:empty {\n    display: none;\n    margin-right: 0;\n  }\n  \n  .header-icon {\n    --mdc-icon-size: 24px;\n    color: var(--uc-icon-color, var(--primary-color));\n    transition: color 0.2s ease, transform 0.2s ease;\n  }\n  \n  .header.expanded .header-icon {\n    color: var(--uc-icon-active-color, var(--accent-color, var(--primary-color)));\n  }\n  \n  .header-left-slot {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n  \n  .header-left-slot:empty {\n    display: none;\n  }\n  \n  /* ============================= */\n  /* HEADER CONTENT */\n  /* ============================= */\n  \n  .header-content {\n    flex: 1;\n    min-width: 0;\n    display: flex;\n    flex-direction: column;\n    gap: 2px;\n  }\n  \n  .header-title {\n    font-size: 16px;\n    font-weight: 500;\n    color: var(--primary-text-color);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    line-height: 1.3;\n  }\n  \n  .header-subtitle {\n    font-size: 14px;\n    color: var(--secondary-text-color);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    line-height: 1.3;\n  }\n  \n  /* Badges in header */\n  .header-badges {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 6px;\n    margin-top: 6px;\n  }\n  \n  .header-badges:empty {\n    display: none;\n  }\n  \n  /* Cards slot in header */\n  .header-cards-slot {\n    margin-top: 8px;\n  }\n  \n  .header-cards-slot:empty {\n    display: none;\n    margin-top: 0;\n  }\n  \n  /* ============================= */\n  /* HEADER RIGHT */\n  /* ============================= */\n  \n  .header-right {\n    display: flex;\n    align-items: center;\n    flex-shrink: 0;\n    margin-left: 12px;\n    gap: 8px;\n  }\n  \n  .header-right:empty {\n    display: none;\n    margin-left: 0;\n  }\n  \n  .header-right-slot {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n  \n  .header-right-slot:empty {\n    display: none;\n  }\n  \n  /* Expand Icon */\n  .expand-icon {\n    --mdc-icon-size: 24px;\n    color: var(--secondary-text-color);\n    transition: transform var(--uc-transition-duration, 300ms) ease;\n    will-change: transform;\n  }\n  \n  .expand-icon.expanded {\n    transform: rotate(180deg);\n  }\n  \n  /* ============================= */\n  /* HEADER BADGES */\n  /* ============================= */\n  \n  .badge {\n    display: inline-flex;\n    align-items: center;\n    gap: 4px;\n    padding: 3px 8px;\n    background: color-mix(in srgb, var(--badge-color, var(--primary-color)) 15%, transparent);\n    border-radius: 10px;\n    font-size: 11px;\n    font-weight: 500;\n    color: var(--badge-color, var(--primary-color));\n    transition: background 0.2s ease;\n  }\n  \n  .badge:hover {\n    background: color-mix(in srgb, var(--badge-color, var(--primary-color)) 25%, transparent);\n  }\n  \n  .badge ha-icon {\n    --mdc-icon-size: 12px;\n  }\n  \n  .badge-label {\n    font-size: 9px;\n    text-transform: uppercase;\n    opacity: 0.8;\n  }\n  \n  .badge-value {\n    font-weight: 600;\n  }\n",sr="\n  /* ============================= */\n  /* FOOTER */\n  /* ============================= */\n  \n  .footer {\n    display: flex;\n    align-items: center;\n    padding: var(--uc-padding, 16px);\n    padding-top: 12px;\n    padding-bottom: 12px;\n  }\n  \n  .footer.with-border {\n    border-top: 1px solid var(--divider-color, rgba(0, 0, 0, 0.12));\n  }\n  \n  .footer.sticky {\n    position: sticky;\n    bottom: 0;\n    background: var(--ha-card-background, var(--card-background-color, white));\n    box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.05);\n  }\n  \n  /* ============================= */\n  /* FOOTER LEFT */\n  /* ============================= */\n  \n  .footer-left {\n    display: flex;\n    align-items: center;\n    flex-shrink: 0;\n    margin-right: 12px;\n  }\n  \n  .footer-left:empty {\n    display: none;\n    margin-right: 0;\n  }\n  \n  .footer-left-slot {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n  \n  .footer-left-slot:empty {\n    display: none;\n  }\n  \n  /* ============================= */\n  /* FOOTER CONTENT */\n  /* ============================= */\n  \n  .footer-content {\n    flex: 1;\n    min-width: 0;\n  }\n  \n  .footer-text {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    font-size: 13px;\n    color: var(--secondary-text-color);\n  }\n  \n  .footer-text ha-icon {\n    --mdc-icon-size: 16px;\n  }\n  \n  .footer-cards-slot {\n    margin-top: 8px;\n  }\n  \n  .footer-cards-slot:empty {\n    display: none;\n    margin-top: 0;\n  }\n  \n  /* ============================= */\n  /* FOOTER RIGHT */\n  /* ============================= */\n  \n  .footer-right {\n    display: flex;\n    align-items: center;\n    flex-shrink: 0;\n    margin-left: auto;\n    gap: 8px;\n  }\n  \n  .footer-right:empty {\n    display: none;\n  }\n  \n  .footer-right-slot {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n  \n  .footer-right-slot:empty {\n    display: none;\n  }\n  \n  /* ============================= */\n  /* FOOTER ACTION BUTTONS */\n  /* ============================= */\n  \n  .footer-action-btn {\n    display: inline-flex;\n    align-items: center;\n    gap: 4px;\n    padding: 6px 12px;\n    background: var(--primary-color);\n    color: white;\n    border: none;\n    border-radius: 6px;\n    font-size: 12px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: background 0.2s ease, transform 0.1s ease;\n  }\n  \n  .footer-action-btn:hover {\n    background: var(--accent-color, var(--primary-color));\n    filter: brightness(1.1);\n  }\n  \n  .footer-action-btn:active {\n    transform: scale(0.98);\n  }\n  \n  .footer-action-btn ha-icon {\n    --mdc-icon-size: 16px;\n  }\n  \n  /* Outline variant */\n  .footer-action-btn.outline {\n    background: transparent;\n    color: var(--primary-color);\n    border: 1px solid var(--primary-color);\n  }\n  \n  .footer-action-btn.outline:hover {\n    background: var(--primary-color);\n    color: white;\n  }\n  \n  /* Text variant */\n  .footer-action-btn.text {\n    background: transparent;\n    color: var(--primary-color);\n    padding: 6px 8px;\n  }\n  \n  .footer-action-btn.text:hover {\n    background: rgba(var(--rgb-primary-color), 0.1);\n  }\n",Oi="\n  ".concat(rr,"\n  ").concat(sr,"\n");var Pe=class extends HTMLElement{static getConfigElement(){return document.createElement("universal-card-editor")}static getStubConfig(){return{title:"Universal Card",icon:"mdi:card-outline",body_mode:k.EXPAND,body:{cards:[{type:"markdown",content:"Configure this card in the editor"}]}}}constructor(){super(),this.attachShadow({mode:"open"}),this._config={},this._hass=null,this._expanded=!1,this._initialized=!1,this._pendingHass=null,this._header=null,this._footer=null,this._badges=null,this._headerCards=[],this._bodyCards=[],this._tabCards={},this._bodyCardsLoaded=!1,this._helpers=null,this._activeTab=0,this._carouselIndex=0,this._isLoading=!1,this._autoCollapseTimer=null,this._carouselTimer=null,this._boundControlHandler=this._handleExternalControl.bind(this),this._resizeHandler=Q(()=>this._handleResize(),R.RESIZE_DEBOUNCE_MS),this._hassUpdateHandler=Oe(()=>this._updateDynamicContent(),R.UPDATE_THROTTLE_MS),this._intersectionObserver=null,this._debug={initTime:0,renderCount:0,lastRenderTime:0}}connectedCallback(){window.addEventListener(ve.CARD_CONTROL,this._boundControlHandler),window.addEventListener("resize",this._resizeHandler),this._setupIntersectionObserver()}disconnectedCallback(){window.removeEventListener(ve.CARD_CONTROL,this._boundControlHandler),window.removeEventListener("resize",this._resizeHandler),this._clearAllTimers(),this._destroyIntersectionObserver(),this._destroyChildCards()}set hass(e){if(this._hass=e,!this._initialized){this._pendingHass=e;return}this._header&&(this._header.hass=e),this._footer&&(this._footer.hass=e),this._badges&&(this._badges.hass=e),this._updateChildCardsHass(e),this._hassUpdateHandler()}get hass(){return this._hass}setConfig(e){let t=performance.now();this._config=xe.normalize(e),this._debug.initTime=performance.now()-t,this._initializeCard()}getConfig(){return X(this._config)}async _initializeCard(){try{this._helpers=await ze(),this._restoreState(),this._createHeaderComponent(),this._config.footer&&this._createFooterComponent(),await this._render(),this._header&&await this._header.loadCards(),this._footer&&await this._footer.loadCards(),this._config.lazy_load?this._observeForLazyLoad():this._expanded&&await this._loadBodyCards(),this._bindEvents(),this._initialized=!0,this._pendingHass&&(this.hass=this._pendingHass,this._pendingHass=null)}catch(e){console.error("[UniversalCard] Initialization failed:",e),this._renderError(e)}}_createHeaderComponent(){let e=H(d(d({},this._config),this._config.header),{title:this._config.title,subtitle:this._config.subtitle,icon:this._config.icon,entity:this._config.entity,show_state:this._config.show_state,show_expand_icon:this._config.show_expand_icon,expand_icon:this._config.expand_icon,body_mode:this._config.body_mode,sticky_header:this._config.sticky_header,badges:this._config.badges,tap_action:this._config.tap_action,hold_action:this._config.hold_action,double_tap_action:this._config.double_tap_action,context_menu:this._config.context_menu});this._header=new Ie(e),this._hass&&(this._header.hass=this._hass)}_createFooterComponent(){this._footer=new Le(this._config.footer),this._hass&&(this._footer.hass=this._hass)}_restoreState(){if(this._config.remember_state&&this._config.card_id)try{let e="uc-state-".concat(this._config.card_id),t=localStorage.getItem(e);t!==null?this._expanded=JSON.parse(t):this._expanded=this._config.expanded}catch(e){this._expanded=this._config.expanded}else this._expanded=this._config.expanded}_saveState(){if(this._config.remember_state&&this._config.card_id)try{let e="uc-state-".concat(this._config.card_id);localStorage.setItem(e,JSON.stringify(this._expanded))}catch(e){}}async _render(){let e=performance.now(),t=this._generateStyles(),i=["universal-card"];this._config.theme&&i.push("theme-".concat(this._config.theme));let r=document.createElement("div");if(r.className=i.join(" "),r.dataset.cardId=this._config.card_id,this._header){this._header.expanded=this._expanded;let o=this._header.render();r.appendChild(o)}let s=this._renderBodyElement();if(s&&r.appendChild(s),this._footer){let o=this._footer.render();r.appendChild(o)}this.shadowRoot.innerHTML="<style>".concat(t,"</style>"),this.shadowRoot.appendChild(r),this._debug.renderCount++,this._debug.lastRenderTime=performance.now()-e}_renderBodyElement(){if(this._config.body_mode===k.NONE)return null;let t=document.createElement("div");t.className="body",t.dataset.state=this._expanded?"expanded":"collapsed";let i=document.createElement("div");i.className="body-content";let r=this._getGridStyles();return r&&(i.style.cssText=r),!this._bodyCardsLoaded&&this._expanded&&(i.innerHTML=this._renderSkeleton()),t.appendChild(i),t}_renderSkeleton(){let e=this._config.skeleton_count||E.skeleton_count,t=Array(e).fill(0).map(()=>'\n      <div class="skeleton-card">\n        <div class="skeleton-line title"></div>\n        <div class="skeleton-line text"></div>\n        <div class="skeleton-line text short"></div>\n      </div>\n    ').join("");return'<div class="skeleton-container">'.concat(t,"</div>")}_renderError(e){this.shadowRoot.innerHTML='\n      <style>\n        .error-card {\n          padding: 16px;\n          background: var(--error-color, #f44336);\n          color: white;\n          border-radius: var(--ha-card-border-radius, 12px);\n        }\n        .error-message { font-weight: 500; }\n        .error-details { margin-top: 8px; font-size: 12px; opacity: 0.9; }\n      </style>\n      <div class="error-card">\n        <div class="error-message">\n          <ha-icon icon="mdi:alert-circle"></ha-icon>\n          Universal Card Error\n        </div>\n        <div class="error-details">'.concat(e.message,"</div>\n      </div>\n    ")}async _loadBodyCards(){var e;if(!(this._bodyCardsLoaded||this._isLoading)){this._isLoading=!0;try{let t=((e=this._config.body)==null?void 0:e.cards)||[];if(t.length===0){this._bodyCardsLoaded=!0;return}this._bodyCards=await ae(t);let i=this.shadowRoot.querySelector(".body-content");if(!i)return;let r=i.querySelector(".skeleton-container");r&&(r.classList.add("fade-out"),await new Promise(o=>setTimeout(o,200)),r.remove());let s=document.createDocumentFragment();this._bodyCards.forEach((o,a)=>{this._hass&&(o.hass=this._hass);let c=document.createElement("div");c.className="card-wrapper";let l=t[a];l.colspan&&(c.style.gridColumn="span ".concat(l.colspan)),l.rowspan&&(c.style.gridRow="span ".concat(l.rowspan)),c.appendChild(o),s.appendChild(c)}),i.appendChild(s),this._bodyCardsLoaded=!0}finally{this._isLoading=!1}}}_updateChildCardsHass(e){[...this._headerCards,...this._bodyCards,...Object.values(this._tabCards).flat()].forEach(i=>{if(i&&"hass"in i)try{i.hass=e}catch(r){}})}_destroyChildCards(){this._header&&(this._header.destroy(),this._header=null),this._footer&&(this._footer.destroy(),this._footer=null),this._badges&&(this._badges.destroy(),this._badges=null),this._headerCards=[],this._bodyCards=[],this._tabCards={},this._bodyCardsLoaded=!1}_generateStyles(){return"\n      /* ============================= */\n      /* HOST */\n      /* ============================= */\n      \n      :host {\n        display: block;\n        --uc-transition-duration: ".concat(this._config.animation_duration,"ms;\n        --uc-border-radius: ").concat(this._config.border_radius,";\n        --uc-padding: ").concat(this._config.padding,";\n      }\n      \n      /* ============================= */\n      /* CARD */\n      /* ============================= */\n      \n      .universal-card {\n        background: var(--ha-card-background, var(--card-background-color, white));\n        border-radius: var(--uc-border-radius);\n        box-shadow: var(--ha-card-box-shadow, 0 2px 6px rgba(0,0,0,0.1));\n        overflow: hidden;\n      }\n      \n      /* ============================= */\n      /* HEADER & FOOTER STYLES */\n      /* ============================= */\n      \n      ").concat(Oi,'\n      \n      /* ============================= */\n      /* BODY */\n      /* ============================= */\n      \n      .body {\n        overflow: hidden;\n        transition: \n          max-height var(--uc-transition-duration) ease,\n          opacity var(--uc-transition-duration) ease;\n      }\n      \n      .body[data-state="collapsed"] {\n        max-height: 0;\n        opacity: 0;\n      }\n      \n      .body[data-state="expanded"] {\n        max-height: 2000px;\n        opacity: 1;\n      }\n      \n      .body-content {\n        padding: var(--uc-padding);\n        padding-top: 0;\n      }\n      \n      /* ============================= */\n      /* CARD WRAPPER */\n      /* ============================= */\n      \n      .card-wrapper {\n        min-width: 0;\n      }\n      \n      .card-wrapper > * {\n        height: 100%;\n      }\n      \n      /* ============================= */\n      /* SKELETON */\n      /* ============================= */\n      \n      .skeleton-container {\n        transition: opacity 0.2s ease;\n      }\n      \n      .skeleton-container.fade-out {\n        opacity: 0;\n      }\n      \n      .skeleton-card {\n        padding: 16px;\n        background: var(--secondary-background-color);\n        border-radius: 8px;\n        margin-bottom: 8px;\n      }\n      \n      .skeleton-line {\n        height: 12px;\n        background: var(--divider-color);\n        border-radius: 4px;\n        margin-bottom: 8px;\n        animation: skeleton-pulse 1.5s ease-in-out infinite;\n      }\n      \n      .skeleton-line.title {\n        width: 60%;\n        height: 16px;\n      }\n      \n      .skeleton-line.text {\n        width: 100%;\n      }\n      \n      .skeleton-line.short {\n        width: 40%;\n      }\n      \n      @keyframes skeleton-pulse {\n        0%, 100% { opacity: 0.4; }\n        50% { opacity: 1; }\n      }\n    ')}_getGridStyles(){let e=this._config.grid||{},t=e.columns||E.grid_columns,i=e.gap||E.grid_gap;return t<=1?"":"\n      display: grid;\n      grid-template-columns: repeat(".concat(t,", 1fr);\n      gap: ").concat(i,";\n    ").replace(/\s+/g," ").trim()}_bindEvents(){let e=this.shadowRoot.querySelector(".header");e&&(e.addEventListener("uc-toggle",()=>this._toggle()),e.addEventListener("uc-expand",()=>this._expand()),e.addEventListener("uc-collapse",()=>this._collapse()),e.addEventListener("uc-context-menu",t=>this._handleContextMenu(t)))}_handleContextMenu(e){console.debug("[UniversalCard] Context menu:",e.detail)}_handleExternalControl(e){let{card_id:t,action:i}=e.detail||{};if(!(t&&t!==this._config.card_id))switch(i){case"expand":this._expand();break;case"collapse":this._collapse();break;case"toggle":this._toggle();break}}_handleResize(){this._updateDynamicContent()}_toggle(){this._expanded?this._collapse():this._expand()}async _expand(){this._expanded||(this._expanded=!0,this._updateExpandedUI(),this._saveState(),this._bodyCardsLoaded||await this._loadBodyCards(),m(this,ve.CARD_EXPANDED,{card_id:this._config.card_id}),this._setupAutoCollapse())}_collapse(){this._expanded&&(this._expanded=!1,this._updateExpandedUI(),this._saveState(),this._clearAutoCollapseTimer(),m(this,ve.CARD_COLLAPSED,{card_id:this._config.card_id}))}_updateExpandedUI(){this._header&&(this._header.expanded=this._expanded);let e=this.shadowRoot.querySelector(".body");e&&(e.dataset.state=this._expanded?"expanded":"collapsed")}_setupIntersectionObserver(){this._config.lazy_load&&(this._intersectionObserver=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&this._expanded&&!this._bodyCardsLoaded&&this._loadBodyCards()})},{rootMargin:R.INTERSECTION_MARGIN}))}_observeForLazyLoad(){this._intersectionObserver&&this._intersectionObserver.observe(this)}_destroyIntersectionObserver(){this._intersectionObserver&&(this._intersectionObserver.disconnect(),this._intersectionObserver=null)}_setupAutoCollapse(){let e=this._config.auto_collapse_after;!e||e<=0||(this._clearAutoCollapseTimer(),this._autoCollapseTimer=setTimeout(()=>{this._collapse()},e*1e3))}_clearAutoCollapseTimer(){this._autoCollapseTimer&&(clearTimeout(this._autoCollapseTimer),this._autoCollapseTimer=null)}_clearAllTimers(){this._clearAutoCollapseTimer(),this._carouselTimer&&(clearInterval(this._carouselTimer),this._carouselTimer=null)}_updateDynamicContent(){}getCardSize(){return this._expanded?3:1}};var j={BASIC:"basic",HEADER:"header",BODY:"body",STYLE:"style",FEATURES:"features",ADVANCED:"advanced"},Ue=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this._config={},this._hass=null,this._activeSection=j.BASIC,this._history=[],this._historyIndex=-1}set hass(e){this._hass=e,this._render()}setConfig(e){this._config=X(e),this._pushHistory(e),this._render()}_render(){this.shadowRoot.innerHTML="\n      <style>".concat(this._getStyles(),'</style>\n      <div class="editor">\n        ').concat(this._renderToolbar(),'\n        <div class="editor-content">\n          ').concat(this._renderSidebar(),'\n          <div class="editor-main">\n            ').concat(this._renderSection(this._activeSection),"\n          </div>\n        </div>\n      </div>\n    "),this._bindEvents()}_renderToolbar(){let e=this._historyIndex>0,t=this._historyIndex<this._history.length-1;return'\n      <div class="toolbar">\n        <div class="toolbar-left">\n          <span class="toolbar-title">Universal Card Editor</span>\n        </div>\n        <div class="toolbar-right">\n          <button class="toolbar-btn" data-action="undo" '.concat(e?"":"disabled",'>\n            <ha-icon icon="mdi:undo"></ha-icon>\n          </button>\n          <button class="toolbar-btn" data-action="redo" ').concat(t?"":"disabled",'>\n            <ha-icon icon="mdi:redo"></ha-icon>\n          </button>\n          <button class="toolbar-btn" data-action="reset">\n            <ha-icon icon="mdi:restore"></ha-icon>\n          </button>\n        </div>\n      </div>\n    ')}_renderSidebar(){let e=[{id:j.BASIC,icon:"mdi:cog",label:"\u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435"},{id:j.HEADER,icon:"mdi:page-layout-header",label:"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A"},{id:j.BODY,icon:"mdi:card-text-outline",label:"\u0421\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435"},{id:j.STYLE,icon:"mdi:palette",label:"\u0421\u0442\u0438\u043B\u044C"},{id:j.FEATURES,icon:"mdi:tune",label:"\u0424\u0443\u043D\u043A\u0446\u0438\u0438"},{id:j.ADVANCED,icon:"mdi:code-tags",label:"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u044B\u0435"}];return'\n      <div class="sidebar">\n        '.concat(e.map(t=>'\n          <button class="sidebar-item '.concat(this._activeSection===t.id?"active":"",'" \n                  data-section="').concat(t.id,'">\n            <ha-icon icon="').concat(t.icon,'"></ha-icon>\n            <span>').concat(t.label,"</span>\n          </button>\n        ")).join(""),"\n      </div>\n    ")}_renderSection(e){switch(e){case j.BASIC:return this._renderBasicSection();case j.HEADER:return this._renderHeaderSection();case j.BODY:return this._renderBodySection();case j.STYLE:return this._renderStyleSection();case j.FEATURES:return this._renderFeaturesSection();case j.ADVANCED:return this._renderAdvancedSection();default:return""}}_renderBasicSection(){return'\n      <div class="section">\n        <h3>\u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438</h3>\n        \n        <div class="field">\n          <label for="title">\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A</label>\n          <input type="text" \n                 id="title" \n                 name="title"\n                 value="'.concat(this._config.title||"",'" \n                 placeholder="\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438">\n        </div>\n        \n        <div class="field">\n          <label for="subtitle">\u041F\u043E\u0434\u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A</label>\n          <input type="text" \n                 id="subtitle" \n                 name="subtitle"\n                 value="').concat(this._config.subtitle||"",'" \n                 placeholder="\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u0442\u0435\u043A\u0441\u0442">\n        </div>\n        \n        <div class="field">\n          <label for="icon">\u0418\u043A\u043E\u043D\u043A\u0430</label>\n          <input type="text" \n                 id="icon" \n                 name="icon"\n                 value="').concat(this._config.icon||"",'" \n                 placeholder="mdi:home">\n        </div>\n        \n        <div class="field">\n          <label for="entity">Entity (\u043E\u043F\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u043E)</label>\n          <input type="text" \n                 id="entity" \n                 name="entity"\n                 value="').concat(this._config.entity||"",'" \n                 placeholder="light.room">\n        </div>\n        \n        <div class="field">\n          <label for="body_mode">\u0420\u0435\u0436\u0438\u043C body</label>\n          <select id="body_mode" name="body_mode">\n            ').concat(Ae.map(e=>'\n              <option value="'.concat(e,'" ').concat(this._config.body_mode===e?"selected":"",">\n                ").concat(this._getModeLabel(e),"\n              </option>\n            ")).join(""),'\n          </select>\n        </div>\n        \n        <div class="field checkbox-field">\n          <input type="checkbox" \n                 id="expanded" \n                 name="expanded"\n                 ').concat(this._config.expanded?"checked":"",'>\n          <label for="expanded">\u0420\u0430\u0441\u043A\u0440\u044B\u0442\u0430 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E</label>\n        </div>\n      </div>\n    ')}_renderHeaderSection(){var e;return'\n      <div class="section">\n        <h3>\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0430</h3>\n        \n        <div class="field checkbox-field">\n          <input type="checkbox" \n                 id="show_expand_icon" \n                 name="show_expand_icon"\n                 '.concat(this._config.show_expand_icon!==!1?"checked":"",'>\n          <label for="show_expand_icon">\u041F\u043E\u043A\u0430\u0437\u044B\u0432\u0430\u0442\u044C \u0438\u043A\u043E\u043D\u043A\u0443 \u0440\u0430\u0441\u043A\u0440\u044B\u0442\u0438\u044F</label>\n        </div>\n        \n        <div class="field">\n          <label for="expand_icon">\u0418\u043A\u043E\u043D\u043A\u0430 \u0440\u0430\u0441\u043A\u0440\u044B\u0442\u0438\u044F</label>\n          <input type="text" \n                 id="expand_icon" \n                 name="expand_icon"\n                 value="').concat(this._config.expand_icon||E.expand_icon,'" \n                 placeholder="mdi:chevron-down">\n        </div>\n        \n        <div class="field checkbox-field">\n          <input type="checkbox" \n                 id="sticky_header" \n                 name="sticky_header"\n                 ').concat(this._config.sticky_header?"checked":"",'>\n          <label for="sticky_header">\u0424\u0438\u043A\u0441\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A \u043F\u0440\u0438 \u0441\u043A\u0440\u043E\u043B\u043B\u0435</label>\n        </div>\n        \n        <div class="subsection">\n          <h4>\u041A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0432 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0435</h4>\n          <p class="hint">\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0434\u043B\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0432 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0435</p>\n          \n          <div class="cards-list" id="header-cards">\n            ').concat(this._renderCardsList(((e=this._config.header)==null?void 0:e.cards)||[],"header"),'\n          </div>\n          \n          <button class="btn btn-add" data-action="add-header-card">\n            <ha-icon icon="mdi:plus"></ha-icon>\n            \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443\n          </button>\n        </div>\n      </div>\n    ')}_renderBodySection(){var e,t,i;return'\n      <div class="section">\n        <h3>\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E</h3>\n        \n        <div class="subsection">\n          <h4>Grid Layout</h4>\n          \n          <div class="field-row">\n            <div class="field">\n              <label for="grid_columns">\u041A\u043E\u043B\u043E\u043D\u043A\u0438</label>\n              <input type="number" \n                     id="grid_columns" \n                     name="grid.columns"\n                     value="'.concat(((e=this._config.grid)==null?void 0:e.columns)||E.grid_columns,'" \n                     min="1" \n                     max="12">\n            </div>\n            \n            <div class="field">\n              <label for="grid_gap">\u041E\u0442\u0441\u0442\u0443\u043F\u044B</label>\n              <input type="text" \n                     id="grid_gap" \n                     name="grid.gap"\n                     value="').concat(((t=this._config.grid)==null?void 0:t.gap)||E.grid_gap,'" \n                     placeholder="16px">\n            </div>\n          </div>\n        </div>\n        \n        <div class="subsection">\n          <h4>\u041A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0432 body</h4>\n          \n          <div class="cards-list" id="body-cards">\n            ').concat(this._renderCardsList(((i=this._config.body)==null?void 0:i.cards)||[],"body"),'\n          </div>\n          \n          <button class="btn btn-add" data-action="add-body-card">\n            <ha-icon icon="mdi:plus"></ha-icon>\n            \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443\n          </button>\n        </div>\n        \n        ').concat(this._config.body_mode===k.TABS?this._renderTabsEditor():"","\n        ").concat(this._config.body_mode===k.CAROUSEL?this._renderCarouselEditor():"","\n      </div>\n    ")}_renderStyleSection(){let e=Object.values($);return'\n      <div class="section">\n        <h3>\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0442\u0438\u043B\u044F</h3>\n        \n        <div class="field">\n          <label for="theme">\u0422\u0435\u043C\u0430</label>\n          <select id="theme" name="theme">\n            '.concat(e.map(t=>'\n              <option value="'.concat(t,'" ').concat(this._config.theme===t?"selected":"",">\n                ").concat(this._getThemeLabel(t),"\n              </option>\n            ")).join(""),'\n          </select>\n        </div>\n        \n        <div class="theme-preview" style="').concat(this._getThemePreviewStyle(),'">\n          <div class="preview-header">Preview</div>\n          <div class="preview-body">\u0421\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435</div>\n        </div>\n        \n        <div class="field">\n          <label for="border_radius">\u0421\u043A\u0440\u0443\u0433\u043B\u0435\u043D\u0438\u0435 \u0443\u0433\u043B\u043E\u0432</label>\n          <input type="text" \n                 id="border_radius" \n                 name="border_radius"\n                 value="').concat(this._config.border_radius||E.border_radius,'" \n                 placeholder="12px">\n        </div>\n        \n        <div class="field">\n          <label for="padding">\u0412\u043D\u0443\u0442\u0440\u0435\u043D\u043D\u0438\u0435 \u043E\u0442\u0441\u0442\u0443\u043F\u044B</label>\n          <input type="text" \n                 id="padding" \n                 name="padding"\n                 value="').concat(this._config.padding||E.padding,'" \n                 placeholder="16px">\n        </div>\n        \n        <div class="field checkbox-field">\n          <input type="checkbox" \n                 id="animation" \n                 name="animation"\n                 ').concat(this._config.animation!==!1?"checked":"",'>\n          <label for="animation">\u0410\u043D\u0438\u043C\u0430\u0446\u0438\u0438</label>\n        </div>\n        \n        <div class="field">\n          <label for="animation_duration">\u0414\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u0438 (\u043C\u0441)</label>\n          <input type="number" \n                 id="animation_duration" \n                 name="animation_duration"\n                 value="').concat(this._config.animation_duration||E.animation_duration,'" \n                 min="0" \n                 max="2000">\n        </div>\n      </div>\n    ')}_renderFeaturesSection(){return'\n      <div class="section">\n        <h3>\u0424\u0443\u043D\u043A\u0446\u0438\u0438</h3>\n        \n        <div class="field checkbox-field">\n          <input type="checkbox" \n                 id="lazy_load" \n                 name="lazy_load"\n                 '.concat(this._config.lazy_load!==!1?"checked":"",'>\n          <label for="lazy_load">\u041B\u0435\u043D\u0438\u0432\u0430\u044F \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0430 (lazy loading)</label>\n        </div>\n        \n        <div class="field checkbox-field">\n          <input type="checkbox" \n                 id="remember_state" \n                 name="remember_state"\n                 ').concat(this._config.remember_state?"checked":"",'>\n          <label for="remember_state">\u0417\u0430\u043F\u043E\u043C\u0438\u043D\u0430\u0442\u044C \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 (expanded/collapsed)</label>\n        </div>\n        \n        <div class="subsection">\n          <h4>\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u0441\u0432\u043E\u0440\u0430\u0447\u0438\u0432\u0430\u043D\u0438\u0435</h4>\n          \n          <div class="field">\n            <label for="auto_collapse_after">\u0421\u0432\u043E\u0440\u0430\u0447\u0438\u0432\u0430\u0442\u044C \u0447\u0435\u0440\u0435\u0437 (\u0441\u0435\u043A, 0 - \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E)</label>\n            <input type="number" \n                   id="auto_collapse_after" \n                   name="auto_collapse_after"\n                   value="').concat(this._config.auto_collapse_after||0,'" \n                   min="0" \n                   max="3600">\n          </div>\n        </div>\n        \n        <div class="subsection">\n          <h4>Skeleton Loader</h4>\n          \n          <div class="field">\n            <label for="skeleton_count">\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0441\u043A\u0435\u043B\u0435\u0442\u043E\u043D\u043E\u0432</label>\n            <input type="number" \n                   id="skeleton_count" \n                   name="skeleton_count"\n                   value="').concat(this._config.skeleton_count||E.skeleton_count,'" \n                   min="1" \n                   max="10">\n          </div>\n        </div>\n      </div>\n    ')}_renderAdvancedSection(){return'\n      <div class="section">\n        <h3>\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u044B\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438</h3>\n        \n        <div class="field">\n          <label for="card_id">ID \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438</label>\n          <input type="text" \n                 id="card_id" \n                 name="card_id"\n                 value="'.concat(this._config.card_id||"",'" \n                 placeholder="\u0410\u0432\u0442\u043E-\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044F \u0435\u0441\u043B\u0438 \u043F\u0443\u0441\u0442\u043E">\n        </div>\n        \n        <div class="subsection">\n          <h4>YAML Preview</h4>\n          <pre class="yaml-preview">').concat(this._getYamlPreview(),'</pre>\n        </div>\n        \n        <div class="subsection">\n          <h4>Debug</h4>\n          <div class="field checkbox-field">\n            <input type="checkbox" \n                   id="debug" \n                   name="debug"\n                   ').concat(this._config.debug?"checked":"",'>\n            <label for="debug">\u0420\u0435\u0436\u0438\u043C \u043E\u0442\u043B\u0430\u0434\u043A\u0438</label>\n          </div>\n        </div>\n      </div>\n    ')}_renderCardsList(e,t){return e.length?e.map((i,r)=>'\n      <div class="card-item" data-section="'.concat(t,'" data-index="').concat(r,'">\n        <div class="card-item-content">\n          <ha-icon icon="mdi:drag-vertical"></ha-icon>\n          <span class="card-type">').concat(i.type||"unknown","</span>\n          ").concat(i.entity?'<span class="card-entity">'.concat(i.entity,"</span>"):"",'\n        </div>\n        <div class="card-item-actions">\n          <button class="btn-icon" data-action="edit-card">\n            <ha-icon icon="mdi:pencil"></ha-icon>\n          </button>\n          <button class="btn-icon" data-action="delete-card">\n            <ha-icon icon="mdi:delete"></ha-icon>\n          </button>\n        </div>\n      </div>\n    ')).join(""):'<div class="empty-state">\u041D\u0435\u0442 \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A</div>'}_renderTabsEditor(){return'\n      <div class="subsection">\n        <h4>\u0412\u043A\u043B\u0430\u0434\u043A\u0438</h4>\n        <div class="tabs-list">\n          '.concat((this._config.tabs||[]).map((e,t)=>'\n            <div class="tab-item">\n              <input type="text" value="'.concat(e.label||"",'" placeholder="\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0432\u043A\u043B\u0430\u0434\u043A\u0438">\n              <button class="btn-icon" data-action="delete-tab" data-index="').concat(t,'">\n                <ha-icon icon="mdi:delete"></ha-icon>\n              </button>\n            </div>\n          ')).join(""),'\n        </div>\n        <button class="btn btn-add" data-action="add-tab">\n          <ha-icon icon="mdi:plus"></ha-icon>\n          \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u043A\u043B\u0430\u0434\u043A\u0443\n        </button>\n      </div>\n    ')}_renderCarouselEditor(){return'\n      <div class="subsection">\n        <h4>\u041A\u0430\u0440\u0443\u0441\u0435\u043B\u044C</h4>\n        \n        <div class="field checkbox-field">\n          <input type="checkbox" \n                 id="carousel_autoplay" \n                 name="carousel_autoplay"\n                 '.concat(this._config.carousel_autoplay?"checked":"",'>\n          <label for="carousel_autoplay">\u0410\u0432\u0442\u043E\u0432\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435</label>\n        </div>\n        \n        <div class="field">\n          <label for="carousel_interval">\u0418\u043D\u0442\u0435\u0440\u0432\u0430\u043B (\u043C\u0441)</label>\n          <input type="number" \n                 id="carousel_interval" \n                 name="carousel_interval"\n                 value="').concat(this._config.carousel_interval||E.carousel_interval,'" \n                 min="1000" \n                 max="60000">\n        </div>\n      </div>\n    ')}_getModeLabel(e){return{[k.EXPAND]:"\u0420\u0430\u0441\u043A\u0440\u044B\u0442\u0438\u0435 (expand)",[k.MODAL]:"\u041C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0435 \u043E\u043A\u043D\u043E (modal)",[k.FULLSCREEN]:"\u041F\u043E\u043B\u043D\u043E\u044D\u043A\u0440\u0430\u043D\u043D\u044B\u0439 (fullscreen)",[k.TABS]:"\u0412\u043A\u043B\u0430\u0434\u043A\u0438 (tabs)",[k.CAROUSEL]:"\u041A\u0430\u0440\u0443\u0441\u0435\u043B\u044C (carousel)",[k.SUBVIEW]:"Subview",[k.NONE]:"\u0422\u043E\u043B\u044C\u043A\u043E \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A (none)"}[e]||e}_getThemeLabel(e){return{[$.SOLID]:"\u041E\u0431\u044B\u0447\u043D\u0430\u044F",[$.GLASS]:"\u0421\u0442\u0435\u043A\u043B\u043E",[$.GLASSMORPHISM]:"Glassmorphism",[$.NEUMORPHISM]:"Neumorphism",[$.MINIMAL]:"\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u0438\u0437\u043C",[$.GRADIENT]:"\u0413\u0440\u0430\u0434\u0438\u0435\u043D\u0442",[$.DARK]:"\u0422\u0451\u043C\u043D\u0430\u044F",[$.NEON]:"\u041D\u0435\u043E\u043D",[$.AURORA]:"\u0410\u0432\u0440\u043E\u0440\u0430"}[e]||e}_getThemePreviewStyle(){return""}_getYamlPreview(){let e=["type: custom:universal-card"],t=(i,r,s=0)=>{let o="  ".repeat(s);typeof r=="object"&&r!==null?(e.push("".concat(o).concat(i,":")),Object.entries(r).forEach(([a,c])=>t(a,c,s+1))):r!=null&&r!==""&&e.push("".concat(o).concat(i,": ").concat(r))};return["title","icon","entity","body_mode","expanded"].forEach(i=>{this._config[i]!==void 0&&t(i,this._config[i])}),e.join("\n")}_bindEvents(){this.shadowRoot.querySelectorAll(".sidebar-item").forEach(e=>{e.addEventListener("click",()=>{this._activeSection=e.dataset.section,this._render()})}),this.shadowRoot.querySelectorAll(".toolbar-btn").forEach(e=>{e.addEventListener("click",()=>this._handleToolbarAction(e.dataset.action))}),this.shadowRoot.querySelectorAll("input, select").forEach(e=>{e.addEventListener("change",t=>this._handleInputChange(t))}),this.shadowRoot.querySelectorAll('[data-action="add-header-card"]').forEach(e=>{e.addEventListener("click",()=>this._addCard("header"))}),this.shadowRoot.querySelectorAll('[data-action="add-body-card"]').forEach(e=>{e.addEventListener("click",()=>this._addCard("body"))})}_handleToolbarAction(e){switch(e){case"undo":this._undo();break;case"redo":this._redo();break;case"reset":this._config={type:"custom:universal-card"},this._fireConfigChanged();break}}_handleInputChange(e){let{name:t,value:i,type:r,checked:s}=e.target,o=t.split("."),a=this._config;for(let l=0;l<o.length-1;l++)a[o[l]]||(a[o[l]]={}),a=a[o[l]];let c=o[o.length-1];r==="checkbox"?a[c]=s:r==="number"?a[c]=parseInt(i,10):a[c]=i,this._pushHistory(this._config),this._fireConfigChanged()}_addCard(e){this._config[e]||(this._config[e]={cards:[]}),this._config[e].cards||(this._config[e].cards=[]),this._config[e].cards.push({type:"markdown",content:"\u041D\u043E\u0432\u0430\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430"}),this._pushHistory(this._config),this._fireConfigChanged()}_pushHistory(e){this._historyIndex<this._history.length-1&&(this._history=this._history.slice(0,this._historyIndex+1)),this._history.push(X(e)),this._historyIndex=this._history.length-1,this._history.length>50&&(this._history.shift(),this._historyIndex--)}_undo(){this._historyIndex>0&&(this._historyIndex--,this._config=X(this._history[this._historyIndex]),this._fireConfigChanged())}_redo(){this._historyIndex<this._history.length-1&&(this._historyIndex++,this._config=X(this._history[this._historyIndex]),this._fireConfigChanged())}_fireConfigChanged(){m(this,"config-changed",{config:this._config}),this._render()}_getStyles(){return"\n      :host {\n        display: block;\n        --editor-bg: var(--primary-background-color, #fff);\n        --editor-border: var(--divider-color, #e0e0e0);\n        --editor-text: var(--primary-text-color, #212121);\n        --editor-text-secondary: var(--secondary-text-color, #757575);\n        --editor-primary: var(--primary-color, #03a9f4);\n      }\n      \n      .editor {\n        background: var(--editor-bg);\n        border-radius: 8px;\n        overflow: hidden;\n      }\n      \n      /* Toolbar */\n      .toolbar {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 12px 16px;\n        background: var(--editor-primary);\n        color: white;\n      }\n      \n      .toolbar-title {\n        font-weight: 500;\n      }\n      \n      .toolbar-btn {\n        background: rgba(255,255,255,0.2);\n        border: none;\n        padding: 8px;\n        border-radius: 4px;\n        cursor: pointer;\n        margin-left: 8px;\n      }\n      \n      .toolbar-btn:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n      \n      .toolbar-btn ha-icon {\n        color: white;\n        --mdc-icon-size: 20px;\n      }\n      \n      /* Content */\n      .editor-content {\n        display: flex;\n        min-height: 400px;\n      }\n      \n      /* Sidebar */\n      .sidebar {\n        width: 160px;\n        border-right: 1px solid var(--editor-border);\n        padding: 8px 0;\n      }\n      \n      .sidebar-item {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        width: 100%;\n        padding: 12px 16px;\n        background: none;\n        border: none;\n        cursor: pointer;\n        color: var(--editor-text-secondary);\n        text-align: left;\n      }\n      \n      .sidebar-item:hover {\n        background: rgba(0,0,0,0.04);\n      }\n      \n      .sidebar-item.active {\n        color: var(--editor-primary);\n        background: rgba(3, 169, 244, 0.1);\n      }\n      \n      .sidebar-item ha-icon {\n        --mdc-icon-size: 20px;\n      }\n      \n      /* Main */\n      .editor-main {\n        flex: 1;\n        padding: 16px;\n        overflow-y: auto;\n      }\n      \n      /* Sections */\n      .section h3 {\n        margin: 0 0 16px 0;\n        font-size: 18px;\n        color: var(--editor-text);\n      }\n      \n      .subsection {\n        margin-top: 24px;\n        padding-top: 16px;\n        border-top: 1px solid var(--editor-border);\n      }\n      \n      .subsection h4 {\n        margin: 0 0 12px 0;\n        font-size: 14px;\n        color: var(--editor-text-secondary);\n      }\n      \n      /* Fields */\n      .field {\n        margin-bottom: 16px;\n      }\n      \n      .field label {\n        display: block;\n        margin-bottom: 4px;\n        font-size: 12px;\n        color: var(--editor-text-secondary);\n      }\n      \n      .field input,\n      .field select {\n        width: 100%;\n        padding: 8px 12px;\n        border: 1px solid var(--editor-border);\n        border-radius: 4px;\n        font-size: 14px;\n        box-sizing: border-box;\n      }\n      \n      .field input:focus,\n      .field select:focus {\n        outline: none;\n        border-color: var(--editor-primary);\n      }\n      \n      .field-row {\n        display: flex;\n        gap: 16px;\n      }\n      \n      .field-row .field {\n        flex: 1;\n      }\n      \n      .checkbox-field {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n      \n      .checkbox-field input {\n        width: auto;\n      }\n      \n      .checkbox-field label {\n        margin: 0;\n        font-size: 14px;\n        color: var(--editor-text);\n      }\n      \n      /* Cards list */\n      .cards-list {\n        border: 1px solid var(--editor-border);\n        border-radius: 4px;\n        margin-bottom: 12px;\n      }\n      \n      .card-item {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 8px 12px;\n        border-bottom: 1px solid var(--editor-border);\n      }\n      \n      .card-item:last-child {\n        border-bottom: none;\n      }\n      \n      .card-item-content {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n      \n      .card-type {\n        font-weight: 500;\n      }\n      \n      .card-entity {\n        color: var(--editor-text-secondary);\n        font-size: 12px;\n      }\n      \n      .empty-state {\n        padding: 24px;\n        text-align: center;\n        color: var(--editor-text-secondary);\n      }\n      \n      /* Buttons */\n      .btn {\n        display: inline-flex;\n        align-items: center;\n        gap: 8px;\n        padding: 8px 16px;\n        background: var(--editor-primary);\n        color: white;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 14px;\n      }\n      \n      .btn:hover {\n        opacity: 0.9;\n      }\n      \n      .btn-icon {\n        background: none;\n        border: none;\n        padding: 4px;\n        cursor: pointer;\n        color: var(--editor-text-secondary);\n      }\n      \n      .btn-icon:hover {\n        color: var(--editor-text);\n      }\n      \n      /* Preview */\n      .theme-preview {\n        padding: 16px;\n        border-radius: 8px;\n        margin-bottom: 16px;\n        background: var(--ha-card-background, #fff);\n        box-shadow: 0 2px 6px rgba(0,0,0,0.1);\n      }\n      \n      .preview-header {\n        font-weight: 500;\n        margin-bottom: 8px;\n      }\n      \n      .preview-body {\n        color: var(--editor-text-secondary);\n      }\n      \n      /* YAML */\n      .yaml-preview {\n        background: #f5f5f5;\n        padding: 12px;\n        border-radius: 4px;\n        font-family: monospace;\n        font-size: 12px;\n        overflow-x: auto;\n        white-space: pre-wrap;\n      }\n      \n      .hint {\n        font-size: 12px;\n        color: var(--editor-text-secondary);\n        margin-bottom: 12px;\n      }\n    "}};var M=class n{constructor(e,t={}){if(new.target===n)throw new Error("BaseMode is an abstract class and cannot be instantiated directly");this._config=e,this._options=t,this._container=null,this._cards=[],this._hass=null,this._loaded=!1,this._active=!1}render(){throw new Error("render() must be implemented by subclass")}async open(){throw new Error("open() must be implemented by subclass")}async close(){throw new Error("close() must be implemented by subclass")}static getStyles(){throw new Error("getStyles() must be implemented by subclass")}set hass(e){this._hass=e,this._updateCardsHass(e)}get hass(){return this._hass}get active(){return this._active}get loaded(){return this._loaded}async loadCards(e){if(this._loaded||!Array.isArray(e)||e.length===0){this._loaded=!0;return}try{let t=await this._getCardHelpers();this._cards=await Promise.all(e.map(i=>this._createCard(i,t))),this._loaded=!0}catch(t){console.error("[UniversalCard] Failed to load cards:",t),this._loaded=!0}}async _createCard(e,t){try{let i=await t.createCardElement(e);return this._hass&&(i.hass=this._hass),i}catch(i){return console.error("[UniversalCard] Card creation error:",i),this._createErrorCard(i,e)}}_createErrorCard(e,t){let i=document.createElement("div");i.className="uc-error-card",i.innerHTML='\n      <div class="error-icon">\n        <ha-icon icon="mdi:alert-circle-outline"></ha-icon>\n      </div>\n      <div class="error-message">'.concat(e.message||"Error loading card",'</div>\n      <button class="error-details-btn" title="View details">?</button>\n    '),i._errorData={error:e,config:t,stack:e.stack};let r=i.querySelector(".error-details-btn");return r==null||r.addEventListener("click",s=>{s.stopPropagation(),this._showErrorDetails(i._errorData)}),i}_showErrorDetails(e){var r,s;let t=document.createElement("div");t.className="uc-error-popup-overlay",t.innerHTML='\n      <div class="uc-error-popup">\n        <div class="popup-header">\n          <span>Error Details</span>\n          <button class="popup-close">&times;</button>\n        </div>\n        <div class="popup-content">\n          <div class="error-section">\n            <strong>Message:</strong>\n            <pre>'.concat(((r=e.error)==null?void 0:r.message)||"Unknown error",'</pre>\n          </div>\n          <div class="error-section">\n            <strong>Card Config:</strong>\n            <pre>').concat(JSON.stringify(e.config,null,2),'</pre>\n          </div>\n          <div class="error-section">\n            <strong>Stack Trace:</strong>\n            <pre>').concat(e.stack||"No stack trace available","</pre>\n          </div>\n        </div>\n      </div>\n    ");let i=()=>t.remove();(s=t.querySelector(".popup-close"))==null||s.addEventListener("click",i),t.addEventListener("click",o=>{o.target===t&&i()}),document.body.appendChild(t)}async _getCardHelpers(){return window.loadCardHelpers?await window.loadCardHelpers():new Promise(e=>{let t=setInterval(()=>{window.loadCardHelpers&&(clearInterval(t),window.loadCardHelpers().then(e))},100);setTimeout(()=>{clearInterval(t),e(null)},1e4)})}_updateCardsHass(e){this._cards.forEach(t=>{if(t&&"hass"in t)try{t.hass=e}catch(i){}})}_appendCards(e,t=[]){let i=document.createDocumentFragment();this._cards.forEach((r,s)=>{let o=document.createElement("div");o.className="card-wrapper";let a=t[s];a!=null&&a.colspan&&(o.style.gridColumn="span ".concat(a.colspan)),a!=null&&a.rowspan&&(o.style.gridRow="span ".concat(a.rowspan)),o.appendChild(r),i.appendChild(o)}),e.appendChild(i)}_animate(e,t,i=300){return new Promise(r=>{e.classList.add(t),setTimeout(()=>{e.classList.remove(t),r()},i)})}_waitForTransition(e,t=500){return new Promise(i=>{let r=()=>{e.removeEventListener("transitionend",r),i()};e.addEventListener("transitionend",r),setTimeout(i,t)})}destroy(){this._cards=[],this._container=null,this._loaded=!1,this._active=!1}};var ne=class extends M{constructor(e,t={}){super(e,t),this._contentWrapper=null,this._animationDuration=e.animation_duration||300}render(){this._container=document.createElement("div"),this._container.className="expand-mode",this._container.dataset.state=this._active?"expanded":"collapsed",this._contentWrapper=document.createElement("div"),this._contentWrapper.className="expand-content";let e=document.createElement("div");if(e.className="expand-grid",this._config.grid){let{columns:t=1,gap:i="16px"}=this._config.grid;t>1&&(e.style.display="grid",e.style.gridTemplateColumns="repeat(".concat(t,", 1fr)"),e.style.gap=i)}return this._loaded||(e.innerHTML=this._renderSkeleton()),this._contentWrapper.appendChild(e),this._container.appendChild(this._contentWrapper),this._container}_renderSkeleton(){let e=this._config.skeleton_count||3;return'\n      <div class="skeleton-container">\n        '.concat(Array(e).fill(0).map(()=>'\n          <div class="skeleton-card">\n            <div class="skeleton-line title"></div>\n            <div class="skeleton-line text"></div>\n            <div class="skeleton-line text short"></div>\n          </div>\n        ').join(""),"\n      </div>\n    ")}async open(){var e;this._active||(this._active=!0,this._loaded||(await this.loadCards(((e=this._config.body)==null?void 0:e.cards)||[]),this._populateCards()),this._container&&(this._container.dataset.state="expanded",this._container.offsetHeight,await this._waitForTransition(this._container,this._animationDuration+50)))}async close(){this._active&&(this._active=!1,this._container&&(this._container.dataset.state="collapsed",await this._waitForTransition(this._container,this._animationDuration+50)))}async toggle(){this._active?await this.close():await this.open()}_populateCards(){var i;if(!this._contentWrapper)return;let e=this._contentWrapper.querySelector(".expand-grid");if(!e)return;let t=e.querySelector(".skeleton-container");t&&(t.classList.add("fade-out"),setTimeout(()=>t.remove(),200)),this._appendCards(e,((i=this._config.body)==null?void 0:i.cards)||[])}static getStyles(){return'\n      /* ============================= */\n      /* EXPAND MODE */\n      /* ============================= */\n      \n      .expand-mode {\n        overflow: hidden;\n        transition: \n          max-height var(--uc-transition-duration, 300ms) cubic-bezier(0.4, 0, 0.2, 1),\n          opacity var(--uc-transition-duration, 300ms) ease;\n        will-change: max-height, opacity;\n      }\n      \n      .expand-mode[data-state="collapsed"] {\n        max-height: 0;\n        opacity: 0;\n        pointer-events: none;\n      }\n      \n      .expand-mode[data-state="expanded"] {\n        max-height: 2000px;\n        opacity: 1;\n        pointer-events: auto;\n      }\n      \n      .expand-content {\n        padding: var(--uc-padding, 16px);\n        padding-top: 0;\n      }\n      \n      .expand-grid {\n        display: flex;\n        flex-direction: column;\n        gap: var(--uc-gap, 16px);\n      }\n      \n      /* Card wrapper */\n      .expand-mode .card-wrapper {\n        min-width: 0;\n        animation: card-appear 0.3s ease forwards;\n        opacity: 0;\n      }\n      \n      .expand-mode .card-wrapper:nth-child(1) { animation-delay: 0ms; }\n      .expand-mode .card-wrapper:nth-child(2) { animation-delay: 50ms; }\n      .expand-mode .card-wrapper:nth-child(3) { animation-delay: 100ms; }\n      .expand-mode .card-wrapper:nth-child(4) { animation-delay: 150ms; }\n      .expand-mode .card-wrapper:nth-child(5) { animation-delay: 200ms; }\n      \n      @keyframes card-appear {\n        from {\n          opacity: 0;\n          transform: translateY(10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n      \n      .expand-mode .card-wrapper > * {\n        height: 100%;\n      }\n      \n      /* Skeleton */\n      .expand-mode .skeleton-container {\n        transition: opacity 0.2s ease;\n      }\n      \n      .expand-mode .skeleton-container.fade-out {\n        opacity: 0;\n      }\n      \n      .expand-mode .skeleton-card {\n        padding: 16px;\n        background: var(--secondary-background-color, #f5f5f5);\n        border-radius: 8px;\n        margin-bottom: 8px;\n      }\n      \n      .expand-mode .skeleton-line {\n        height: 12px;\n        background: var(--divider-color, #e0e0e0);\n        border-radius: 4px;\n        margin-bottom: 8px;\n        animation: skeleton-pulse 1.5s ease-in-out infinite;\n      }\n      \n      .expand-mode .skeleton-line.title {\n        width: 60%;\n        height: 16px;\n      }\n      \n      .expand-mode .skeleton-line.text {\n        width: 100%;\n      }\n      \n      .expand-mode .skeleton-line.short {\n        width: 40%;\n      }\n      \n      @keyframes skeleton-pulse {\n        0%, 100% { opacity: 0.4; }\n        50% { opacity: 1; }\n      }\n    '}destroy(){this._contentWrapper=null,super.destroy()}};var ce=class extends M{constructor(e,t={}){super(e,t),this._overlay=null,this._dialog=null,this._portalTarget=document.body,this._escapeHandler=this._handleEscape.bind(this);let i=e.modal||{};this._width=i.width||"90%",this._maxWidth=i.max_width||"600px",this._backdropBlur=i.backdrop_blur!==!1,this._backdropColor=i.backdrop_color||"rgba(0, 0, 0, 0.6)",this._closeOnBackdrop=i.close_on_backdrop!==!1,this._closeOnEscape=i.close_on_escape!==!1,this._showClose=i.show_close!==!1}render(){return this._container=document.createElement("div"),this._container.className="modal-mode-placeholder",this._container.style.display="none",this._container}_renderModal(){this._overlay=document.createElement("div"),this._overlay.className="uc-modal-overlay",this._overlay.style.setProperty("--modal-backdrop-color",this._backdropColor),this._backdropBlur&&this._overlay.classList.add("with-blur"),this._dialog=document.createElement("div"),this._dialog.className="uc-modal-dialog",this._dialog.style.setProperty("--modal-width",this._width),this._dialog.style.setProperty("--modal-max-width",this._maxWidth),this._dialog.setAttribute("role","dialog"),this._dialog.setAttribute("aria-modal","true");let e=this._renderHeader(),t=document.createElement("div");t.className="uc-modal-content";let i=document.createElement("div");if(i.className="uc-modal-grid",this._config.grid){let{columns:r=1,gap:s="16px"}=this._config.grid;r>1&&(i.style.display="grid",i.style.gridTemplateColumns="repeat(".concat(r,", 1fr)"),i.style.gap=s)}return this._loaded||(i.innerHTML=this._renderSkeleton()),t.appendChild(i),this._dialog.appendChild(e),this._dialog.appendChild(t),this._overlay.appendChild(this._dialog),this._overlay}_renderHeader(){let e=document.createElement("div");e.className="uc-modal-header";let t=document.createElement("div");if(t.className="uc-modal-title",t.textContent=this._config.title||"",e.appendChild(t),this._showClose){let i=document.createElement("button");i.className="uc-modal-close",i.innerHTML='<ha-icon icon="mdi:close"></ha-icon>',i.addEventListener("click",()=>this.close()),e.appendChild(i)}return e}_renderSkeleton(){let e=this._config.skeleton_count||3;return'\n      <div class="skeleton-container">\n        '.concat(Array(e).fill(0).map(()=>'\n          <div class="skeleton-card">\n            <div class="skeleton-line title"></div>\n            <div class="skeleton-line text"></div>\n            <div class="skeleton-line text short"></div>\n          </div>\n        ').join(""),"\n      </div>\n    ")}async open(){var t,i;if(this._active)return;this._active=!0;let e=this._renderModal();this._portalTarget.appendChild(e),document.body.style.overflow="hidden",this._closeOnBackdrop&&this._overlay.addEventListener("click",r=>{r.target===this._overlay&&this.close()}),this._closeOnEscape&&document.addEventListener("keydown",this._escapeHandler),requestAnimationFrame(()=>{var r,s;(r=this._overlay)==null||r.classList.add("open"),(s=this._dialog)==null||s.classList.add("open")}),this._loaded||(await this.loadCards(((t=this._config.body)==null?void 0:t.cards)||[]),this._populateCards()),await new Promise(r=>setTimeout(r,300)),(i=this._dialog)==null||i.focus()}async close(){var e,t,i;this._active&&(this._active=!1,(e=this._overlay)==null||e.classList.remove("open"),(t=this._dialog)==null||t.classList.remove("open"),await new Promise(r=>setTimeout(r,250)),document.removeEventListener("keydown",this._escapeHandler),(i=this._overlay)==null||i.remove(),this._overlay=null,this._dialog=null,document.body.style.overflow="",this._options.onClose&&this._options.onClose())}_handleEscape(e){e.key==="Escape"&&this.close()}_populateCards(){var i;if(!this._dialog)return;let e=this._dialog.querySelector(".uc-modal-grid");if(!e)return;let t=e.querySelector(".skeleton-container");t&&(t.classList.add("fade-out"),setTimeout(()=>t.remove(),200)),this._appendCards(e,((i=this._config.body)==null?void 0:i.cards)||[])}static getStyles(){return"\n      /* ============================= */\n      /* MODAL OVERLAY */\n      /* ============================= */\n      \n      .uc-modal-overlay {\n        position: fixed;\n        inset: 0;\n        z-index: 1000;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 16px;\n        background: var(--modal-backdrop-color, rgba(0, 0, 0, 0.6));\n        opacity: 0;\n        transition: opacity 0.25s ease;\n      }\n      \n      .uc-modal-overlay.with-blur {\n        backdrop-filter: blur(4px);\n        -webkit-backdrop-filter: blur(4px);\n      }\n      \n      .uc-modal-overlay.open {\n        opacity: 1;\n      }\n      \n      /* ============================= */\n      /* MODAL DIALOG */\n      /* ============================= */\n      \n      .uc-modal-dialog {\n        width: var(--modal-width, 90%);\n        max-width: var(--modal-max-width, 600px);\n        max-height: 90vh;\n        background: var(--ha-card-background, var(--card-background-color, white));\n        border-radius: var(--ha-card-border-radius, 12px);\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n        overflow: hidden;\n        display: flex;\n        flex-direction: column;\n        transform: scale(0.95) translateY(20px);\n        opacity: 0;\n        transition: \n          transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n          opacity 0.3s ease;\n      }\n      \n      .uc-modal-dialog.open {\n        transform: scale(1) translateY(0);\n        opacity: 1;\n      }\n      \n      /* ============================= */\n      /* MODAL HEADER */\n      /* ============================= */\n      \n      .uc-modal-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 16px;\n        border-bottom: 1px solid var(--divider-color, rgba(0, 0, 0, 0.12));\n      }\n      \n      .uc-modal-title {\n        font-size: 18px;\n        font-weight: 500;\n        color: var(--primary-text-color);\n      }\n      \n      .uc-modal-close {\n        background: none;\n        border: none;\n        padding: 8px;\n        margin: -8px;\n        cursor: pointer;\n        color: var(--secondary-text-color);\n        border-radius: 50%;\n        transition: background 0.2s ease;\n      }\n      \n      .uc-modal-close:hover {\n        background: rgba(0, 0, 0, 0.1);\n      }\n      \n      .uc-modal-close ha-icon {\n        --mdc-icon-size: 24px;\n      }\n      \n      /* ============================= */\n      /* MODAL CONTENT */\n      /* ============================= */\n      \n      .uc-modal-content {\n        flex: 1;\n        overflow-y: auto;\n        padding: 16px;\n      }\n      \n      .uc-modal-grid {\n        display: flex;\n        flex-direction: column;\n        gap: 16px;\n      }\n      \n      .uc-modal-grid .card-wrapper {\n        min-width: 0;\n        animation: modal-card-appear 0.3s ease forwards;\n        opacity: 0;\n      }\n      \n      .uc-modal-grid .card-wrapper:nth-child(1) { animation-delay: 50ms; }\n      .uc-modal-grid .card-wrapper:nth-child(2) { animation-delay: 100ms; }\n      .uc-modal-grid .card-wrapper:nth-child(3) { animation-delay: 150ms; }\n      .uc-modal-grid .card-wrapper:nth-child(4) { animation-delay: 200ms; }\n      \n      @keyframes modal-card-appear {\n        from {\n          opacity: 0;\n          transform: translateY(10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n      \n      /* Skeleton */\n      .uc-modal-content .skeleton-container {\n        transition: opacity 0.2s ease;\n      }\n      \n      .uc-modal-content .skeleton-container.fade-out {\n        opacity: 0;\n      }\n      \n      .uc-modal-content .skeleton-card {\n        padding: 16px;\n        background: var(--secondary-background-color, #f5f5f5);\n        border-radius: 8px;\n        margin-bottom: 8px;\n      }\n      \n      .uc-modal-content .skeleton-line {\n        height: 12px;\n        background: var(--divider-color, #e0e0e0);\n        border-radius: 4px;\n        margin-bottom: 8px;\n        animation: skeleton-pulse 1.5s ease-in-out infinite;\n      }\n      \n      .uc-modal-content .skeleton-line.title {\n        width: 60%;\n        height: 16px;\n      }\n      \n      .uc-modal-content .skeleton-line.text {\n        width: 100%;\n      }\n      \n      .uc-modal-content .skeleton-line.short {\n        width: 40%;\n      }\n    "}destroy(){var e;this._active&&(document.body.style.overflow="",(e=this._overlay)==null||e.remove()),document.removeEventListener("keydown",this._escapeHandler),this._overlay=null,this._dialog=null,super.destroy()}};var le=class extends M{constructor(e,t={}){super(e,t),this._overlay=null,this._escapeHandler=this._handleEscape.bind(this);let i=e.fullscreen||{};this._background=i.background||"var(--primary-background-color, #fafafa)",this._showClose=i.show_close!==!1,this._closeOnEscape=i.close_on_escape!==!1,this._maxWidth=i.max_width||"1200px"}render(){return this._container=document.createElement("div"),this._container.className="fullscreen-mode-placeholder",this._container.style.display="none",this._container}_renderFullscreen(){this._overlay=document.createElement("div"),this._overlay.className="uc-fullscreen-overlay",this._overlay.style.setProperty("--fullscreen-bg",this._background);let e=document.createElement("div");e.className="uc-fullscreen-inner",e.style.setProperty("--fullscreen-max-width",this._maxWidth);let t=this._renderHeader(),i=document.createElement("div");i.className="uc-fullscreen-content";let r=document.createElement("div");if(r.className="uc-fullscreen-grid",this._config.grid){let{columns:s=1,gap:o="16px"}=this._config.grid;s>1&&(r.style.display="grid",r.style.gridTemplateColumns="repeat(".concat(s,", 1fr)"),r.style.gap=o)}return this._loaded||(r.innerHTML=this._renderSkeleton()),i.appendChild(r),e.appendChild(t),e.appendChild(i),this._overlay.appendChild(e),this._overlay}_renderHeader(){let e=document.createElement("div");if(e.className="uc-fullscreen-header",this._showClose){let r=document.createElement("button");r.className="uc-fullscreen-back",r.innerHTML='<ha-icon icon="mdi:arrow-left"></ha-icon>',r.addEventListener("click",()=>this.close()),e.appendChild(r)}let t=document.createElement("div");t.className="uc-fullscreen-title",t.textContent=this._config.title||"",e.appendChild(t);let i=document.createElement("div");return i.className="uc-fullscreen-spacer",e.appendChild(i),e}_renderSkeleton(){let e=this._config.skeleton_count||3;return'\n      <div class="skeleton-container">\n        '.concat(Array(e).fill(0).map(()=>'\n          <div class="skeleton-card">\n            <div class="skeleton-line title"></div>\n            <div class="skeleton-line text"></div>\n            <div class="skeleton-line text short"></div>\n          </div>\n        ').join(""),"\n      </div>\n    ")}async open(){var t;if(this._active)return;this._active=!0;let e=this._renderFullscreen();document.body.appendChild(e),document.body.style.overflow="hidden",this._closeOnEscape&&document.addEventListener("keydown",this._escapeHandler),requestAnimationFrame(()=>{var i;(i=this._overlay)==null||i.classList.add("open")}),this._loaded||(await this.loadCards(((t=this._config.body)==null?void 0:t.cards)||[]),this._populateCards()),await new Promise(i=>setTimeout(i,300))}async close(){var e,t,i;this._active&&(this._active=!1,(e=this._overlay)==null||e.classList.remove("open"),(t=this._overlay)==null||t.classList.add("closing"),await new Promise(r=>setTimeout(r,250)),document.removeEventListener("keydown",this._escapeHandler),(i=this._overlay)==null||i.remove(),this._overlay=null,document.body.style.overflow="",this._options.onClose&&this._options.onClose())}_handleEscape(e){e.key==="Escape"&&this.close()}_populateCards(){var i;if(!this._overlay)return;let e=this._overlay.querySelector(".uc-fullscreen-grid");if(!e)return;let t=e.querySelector(".skeleton-container");t&&(t.classList.add("fade-out"),setTimeout(()=>t.remove(),200)),this._appendCards(e,((i=this._config.body)==null?void 0:i.cards)||[])}static getStyles(){return"\n      /* ============================= */\n      /* FULLSCREEN OVERLAY */\n      /* ============================= */\n      \n      .uc-fullscreen-overlay {\n        position: fixed;\n        inset: 0;\n        z-index: 1001;\n        background: var(--fullscreen-bg, var(--primary-background-color, #fafafa));\n        transform: translateY(100%);\n        opacity: 0;\n        transition: \n          transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),\n          opacity 0.3s ease;\n      }\n      \n      .uc-fullscreen-overlay.open {\n        transform: translateY(0);\n        opacity: 1;\n      }\n      \n      .uc-fullscreen-overlay.closing {\n        transform: translateY(100%);\n        opacity: 0;\n      }\n      \n      /* ============================= */\n      /* FULLSCREEN INNER */\n      /* ============================= */\n      \n      .uc-fullscreen-inner {\n        width: 100%;\n        height: 100%;\n        max-width: var(--fullscreen-max-width, 1200px);\n        margin: 0 auto;\n        display: flex;\n        flex-direction: column;\n      }\n      \n      /* ============================= */\n      /* FULLSCREEN HEADER */\n      /* ============================= */\n      \n      .uc-fullscreen-header {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 12px 16px;\n        background: var(--ha-card-background, var(--card-background-color, white));\n        border-bottom: 1px solid var(--divider-color, rgba(0, 0, 0, 0.12));\n        position: sticky;\n        top: 0;\n        z-index: 10;\n      }\n      \n      .uc-fullscreen-back {\n        background: none;\n        border: none;\n        padding: 8px;\n        margin: -8px;\n        margin-right: 4px;\n        cursor: pointer;\n        color: var(--primary-text-color);\n        border-radius: 50%;\n        transition: background 0.2s ease;\n      }\n      \n      .uc-fullscreen-back:hover {\n        background: rgba(0, 0, 0, 0.1);\n      }\n      \n      .uc-fullscreen-back ha-icon {\n        --mdc-icon-size: 24px;\n      }\n      \n      .uc-fullscreen-title {\n        font-size: 20px;\n        font-weight: 500;\n        color: var(--primary-text-color);\n      }\n      \n      .uc-fullscreen-spacer {\n        flex: 1;\n      }\n      \n      /* ============================= */\n      /* FULLSCREEN CONTENT */\n      /* ============================= */\n      \n      .uc-fullscreen-content {\n        flex: 1;\n        overflow-y: auto;\n        padding: 16px;\n      }\n      \n      .uc-fullscreen-grid {\n        display: flex;\n        flex-direction: column;\n        gap: 16px;\n      }\n      \n      .uc-fullscreen-grid .card-wrapper {\n        min-width: 0;\n        animation: fullscreen-card-appear 0.3s ease forwards;\n        opacity: 0;\n      }\n      \n      .uc-fullscreen-grid .card-wrapper:nth-child(1) { animation-delay: 100ms; }\n      .uc-fullscreen-grid .card-wrapper:nth-child(2) { animation-delay: 150ms; }\n      .uc-fullscreen-grid .card-wrapper:nth-child(3) { animation-delay: 200ms; }\n      .uc-fullscreen-grid .card-wrapper:nth-child(4) { animation-delay: 250ms; }\n      \n      @keyframes fullscreen-card-appear {\n        from {\n          opacity: 0;\n          transform: translateY(20px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n      \n      /* Skeleton */\n      .uc-fullscreen-content .skeleton-container {\n        transition: opacity 0.2s ease;\n      }\n      \n      .uc-fullscreen-content .skeleton-container.fade-out {\n        opacity: 0;\n      }\n      \n      .uc-fullscreen-content .skeleton-card {\n        padding: 16px;\n        background: var(--ha-card-background, white);\n        border-radius: 8px;\n        margin-bottom: 8px;\n        box-shadow: var(--ha-card-box-shadow, 0 2px 6px rgba(0,0,0,0.1));\n      }\n      \n      .uc-fullscreen-content .skeleton-line {\n        height: 12px;\n        background: var(--divider-color, #e0e0e0);\n        border-radius: 4px;\n        margin-bottom: 8px;\n        animation: skeleton-pulse 1.5s ease-in-out infinite;\n      }\n      \n      .uc-fullscreen-content .skeleton-line.title {\n        width: 60%;\n        height: 16px;\n      }\n    "}destroy(){var e;this._active&&(document.body.style.overflow="",(e=this._overlay)==null||e.remove()),document.removeEventListener("keydown",this._escapeHandler),this._overlay=null,super.destroy()}};var de=class extends M{constructor(e,t={}){super(e,t),this._activeTab=0,this._tabCards={},this._loadedTabs={},this._tabBar=null,this._tabContent=null,this._tabs=e.tabs||[];let i=e.tabs_config||{};this._tabPosition=i.position||"top",this._showIcons=i.show_icons!==!1,this._showLabels=i.show_labels!==!1}render(){return this._container=document.createElement("div"),this._container.className="tabs-mode",this._container.dataset.state=this._active?"expanded":"collapsed",this._container.dataset.tabPosition=this._tabPosition,this._tabBar=this._renderTabBar(),this._tabContent=document.createElement("div"),this._tabContent.className="tabs-content",this._tabs.forEach((e,t)=>{let i=this._renderTabPanel(e,t);this._tabContent.appendChild(i)}),this._tabPosition==="bottom"?(this._container.appendChild(this._tabContent),this._container.appendChild(this._tabBar)):(this._container.appendChild(this._tabBar),this._container.appendChild(this._tabContent)),this._container}_renderTabBar(){let e=document.createElement("div");e.className="tabs-bar",e.setAttribute("role","tablist"),this._tabs.forEach((i,r)=>{let s=document.createElement("button");if(s.className="tab-button",s.setAttribute("role","tab"),s.setAttribute("aria-selected",r===this._activeTab?"true":"false"),s.dataset.index=r,r===this._activeTab&&s.classList.add("active"),this._showIcons&&i.icon){let o=document.createElement("ha-icon");o.setAttribute("icon",i.icon),s.appendChild(o)}if(this._showLabels&&i.label){let o=document.createElement("span");o.className="tab-label",o.textContent=i.label,s.appendChild(o)}s.addEventListener("click",()=>this._selectTab(r)),e.appendChild(s)});let t=document.createElement("div");return t.className="tab-indicator",e.appendChild(t),e}_renderTabPanel(e,t){let i=document.createElement("div");i.className="tab-panel",i.setAttribute("role","tabpanel"),i.dataset.index=t,t===this._activeTab&&i.classList.add("active");let r=document.createElement("div");r.className="tab-grid";let s=e.grid||this._config.grid||{},{columns:o=1,gap:a="16px"}=s;return o>1&&(r.style.display="grid",r.style.gridTemplateColumns="repeat(".concat(o,", 1fr)"),r.style.gap=a),t===this._activeTab&&(r.innerHTML=this._renderSkeleton()),i.appendChild(r),i}_renderSkeleton(){let e=this._config.skeleton_count||2;return'\n      <div class="skeleton-container">\n        '.concat(Array(e).fill(0).map(()=>'\n          <div class="skeleton-card">\n            <div class="skeleton-line title"></div>\n            <div class="skeleton-line text"></div>\n          </div>\n        ').join(""),"\n      </div>\n    ")}async _selectTab(e){if(e===this._activeTab||e<0||e>=this._tabs.length)return;let t=this._activeTab;this._activeTab=e,this._updateTabButtons(),this._updateIndicator(),this._updatePanels(t,e),this._loadedTabs[e]||await this._loadTabCards(e)}_updateTabButtons(){var t;let e=(t=this._tabBar)==null?void 0:t.querySelectorAll(".tab-button");e==null||e.forEach((i,r)=>{let s=r===this._activeTab;i.classList.toggle("active",s),i.setAttribute("aria-selected",s?"true":"false")})}_updateIndicator(){var i,r;let e=(i=this._tabBar)==null?void 0:i.querySelector(".tab-indicator"),t=(r=this._tabBar)==null?void 0:r.querySelector('.tab-button[data-index="'.concat(this._activeTab,'"]'));if(e&&t){let{offsetLeft:s,offsetWidth:o}=t;e.style.left="".concat(s,"px"),e.style.width="".concat(o,"px")}}_updatePanels(e,t){var r;let i=(r=this._tabContent)==null?void 0:r.querySelectorAll(".tab-panel");i==null||i.forEach((s,o)=>{let a=o===t;s.classList.toggle("active",a),a&&(s.classList.remove("slide-left","slide-right"),s.classList.add(t>e?"slide-from-right":"slide-from-left"))})}async _loadTabCards(e){var r;let t=this._tabs[e],i=(t==null?void 0:t.cards)||[];if(i.length===0){this._loadedTabs[e]=!0;return}try{let s=await this._getCardHelpers();this._tabCards[e]=await Promise.all(i.map(c=>this._createCard(c,s))),this._loadedTabs[e]=!0;let o=(r=this._tabContent)==null?void 0:r.querySelector('.tab-panel[data-index="'.concat(e,'"]')),a=o==null?void 0:o.querySelector(".tab-grid");if(a){let c=a.querySelector(".skeleton-container");c&&(c.classList.add("fade-out"),setTimeout(()=>c.remove(),200));let l=document.createDocumentFragment();this._tabCards[e].forEach((u,h)=>{this._hass&&(u.hass=this._hass);let f=document.createElement("div");f.className="card-wrapper";let p=i[h];p.colspan&&(f.style.gridColumn="span ".concat(p.colspan)),p.rowspan&&(f.style.gridRow="span ".concat(p.rowspan)),f.appendChild(u),l.appendChild(f)}),a.appendChild(l)}}catch(s){console.error("[UniversalCard] Failed to load tab ".concat(e," cards:"),s),this._loadedTabs[e]=!0}}set hass(e){this._hass=e,Object.values(this._tabCards).forEach(t=>{t.forEach(i=>{if(i&&"hass"in i)try{i.hass=e}catch(r){}})})}async open(){this._active||(this._active=!0,this._container&&(this._container.dataset.state="expanded"),requestAnimationFrame(()=>{this._updateIndicator()}),this._loadedTabs[this._activeTab]||await this._loadTabCards(this._activeTab))}async close(){this._active&&(this._active=!1,this._container&&(this._container.dataset.state="collapsed"))}static getStyles(){return'\n      /* ============================= */\n      /* TABS MODE */\n      /* ============================= */\n      \n      .tabs-mode {\n        overflow: hidden;\n        transition: \n          max-height var(--uc-transition-duration, 300ms) ease,\n          opacity var(--uc-transition-duration, 300ms) ease;\n      }\n      \n      .tabs-mode[data-state="collapsed"] {\n        max-height: 0;\n        opacity: 0;\n      }\n      \n      .tabs-mode[data-state="expanded"] {\n        max-height: 2000px;\n        opacity: 1;\n      }\n      \n      /* ============================= */\n      /* TAB BAR */\n      /* ============================= */\n      \n      .tabs-bar {\n        display: flex;\n        position: relative;\n        background: var(--ha-card-background, var(--card-background-color, white));\n        border-bottom: 1px solid var(--divider-color, rgba(0, 0, 0, 0.12));\n        overflow-x: auto;\n        scrollbar-width: none;\n      }\n      \n      .tabs-bar::-webkit-scrollbar {\n        display: none;\n      }\n      \n      .tabs-mode[data-tab-position="bottom"] .tabs-bar {\n        border-bottom: none;\n        border-top: 1px solid var(--divider-color, rgba(0, 0, 0, 0.12));\n      }\n      \n      /* ============================= */\n      /* TAB BUTTON */\n      /* ============================= */\n      \n      .tab-button {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap: 4px;\n        padding: 12px 16px;\n        min-width: 72px;\n        background: none;\n        border: none;\n        cursor: pointer;\n        color: var(--secondary-text-color);\n        transition: color 0.2s ease;\n        flex-shrink: 0;\n      }\n      \n      .tab-button:hover {\n        color: var(--primary-text-color);\n      }\n      \n      .tab-button.active {\n        color: var(--primary-color);\n      }\n      \n      .tab-button ha-icon {\n        --mdc-icon-size: 24px;\n      }\n      \n      .tab-label {\n        font-size: 12px;\n        font-weight: 500;\n        text-transform: uppercase;\n        white-space: nowrap;\n      }\n      \n      /* ============================= */\n      /* TAB INDICATOR */\n      /* ============================= */\n      \n      .tab-indicator {\n        position: absolute;\n        bottom: 0;\n        height: 2px;\n        background: var(--primary-color);\n        transition: left 0.25s ease, width 0.25s ease;\n      }\n      \n      .tabs-mode[data-tab-position="bottom"] .tab-indicator {\n        bottom: auto;\n        top: 0;\n      }\n      \n      /* ============================= */\n      /* TAB CONTENT */\n      /* ============================= */\n      \n      .tabs-content {\n        position: relative;\n        overflow: hidden;\n      }\n      \n      .tab-panel {\n        display: none;\n        padding: var(--uc-padding, 16px);\n      }\n      \n      .tab-panel.active {\n        display: block;\n        animation: tab-panel-appear 0.25s ease;\n      }\n      \n      @keyframes tab-panel-appear {\n        from {\n          opacity: 0;\n          transform: translateX(10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n      \n      .tab-panel.slide-from-right {\n        animation-name: tab-slide-from-right;\n      }\n      \n      .tab-panel.slide-from-left {\n        animation-name: tab-slide-from-left;\n      }\n      \n      @keyframes tab-slide-from-right {\n        from {\n          opacity: 0;\n          transform: translateX(20px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n      \n      @keyframes tab-slide-from-left {\n        from {\n          opacity: 0;\n          transform: translateX(-20px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n      \n      /* ============================= */\n      /* TAB GRID */\n      /* ============================= */\n      \n      .tab-grid {\n        display: flex;\n        flex-direction: column;\n        gap: 16px;\n      }\n      \n      .tab-grid .card-wrapper {\n        min-width: 0;\n        animation: card-appear 0.3s ease forwards;\n        opacity: 0;\n      }\n      \n      .tab-grid .card-wrapper:nth-child(1) { animation-delay: 0ms; }\n      .tab-grid .card-wrapper:nth-child(2) { animation-delay: 50ms; }\n      .tab-grid .card-wrapper:nth-child(3) { animation-delay: 100ms; }\n      \n      /* Skeleton */\n      .tab-panel .skeleton-container {\n        transition: opacity 0.2s ease;\n      }\n      \n      .tab-panel .skeleton-container.fade-out {\n        opacity: 0;\n      }\n      \n      .tab-panel .skeleton-card {\n        padding: 16px;\n        background: var(--secondary-background-color, #f5f5f5);\n        border-radius: 8px;\n        margin-bottom: 8px;\n      }\n      \n      .tab-panel .skeleton-line {\n        height: 12px;\n        background: var(--divider-color, #e0e0e0);\n        border-radius: 4px;\n        margin-bottom: 8px;\n        animation: skeleton-pulse 1.5s ease-in-out infinite;\n      }\n      \n      .tab-panel .skeleton-line.title {\n        width: 60%;\n        height: 16px;\n      }\n    '}destroy(){this._tabBar=null,this._tabContent=null,this._tabCards={},this._loadedTabs={},super.destroy()}};var ue=class extends M{constructor(e,t={}){super(e,t),this._currentIndex=0,this._track=null,this._indicators=null,this._autoplayTimer=null,this._touchStartX=0,this._touchCurrentX=0,this._isDragging=!1;let i=e.carousel||{};this._autoplay=i.autoplay||!1,this._interval=i.interval||5e3,this._showIndicators=i.show_indicators!==!1,this._showArrows=i.show_arrows!==!1,this._loop=i.loop!==!1,this._swipeThreshold=50}render(){this._container=document.createElement("div"),this._container.className="carousel-mode",this._container.dataset.state=this._active?"expanded":"collapsed";let e=document.createElement("div");return e.className="carousel-viewport",this._track=document.createElement("div"),this._track.className="carousel-track",e.appendChild(this._track),this._showArrows&&e.appendChild(this._renderArrows()),this._container.appendChild(e),this._showIndicators&&(this._indicators=this._renderIndicators(),this._container.appendChild(this._indicators)),this._bindTouchEvents(e),this._container}_renderArrows(){let e=document.createDocumentFragment(),t=document.createElement("button");t.className="carousel-arrow carousel-arrow-prev",t.innerHTML='<ha-icon icon="mdi:chevron-left"></ha-icon>',t.addEventListener("click",()=>this._goTo(this._currentIndex-1));let i=document.createElement("button");return i.className="carousel-arrow carousel-arrow-next",i.innerHTML='<ha-icon icon="mdi:chevron-right"></ha-icon>',i.addEventListener("click",()=>this._goTo(this._currentIndex+1)),e.appendChild(t),e.appendChild(i),e}_renderIndicators(){let e=document.createElement("div");return e.className="carousel-indicators",e}_updateIndicators(){!this._indicators||!this._cards.length||(this._indicators.innerHTML=this._cards.map((e,t)=>'\n      <button class="carousel-indicator '.concat(t===this._currentIndex?"active":"",'"\n              data-index="').concat(t,'"\n              aria-label="Slide ').concat(t+1,'">\n      </button>\n    ')).join(""),this._indicators.querySelectorAll(".carousel-indicator").forEach(e=>{e.addEventListener("click",()=>{let t=parseInt(e.dataset.index,10);this._goTo(t)})}))}_goTo(e){let t=this._cards.length;if(t!==0){if(this._loop)e<0&&(e=t-1),e>=t&&(e=0);else if(e<0||e>=t)return;this._currentIndex=e,this._updateTrackPosition(),this._updateIndicatorStates(),this._autoplay&&this._active&&this._startAutoplay()}}next(){this._goTo(this._currentIndex+1)}prev(){this._goTo(this._currentIndex-1)}_updateTrackPosition(){if(!this._track)return;let e=-this._currentIndex*100;this._track.style.transform="translateX(".concat(e,"%)")}_updateIndicatorStates(){this._indicators&&this._indicators.querySelectorAll(".carousel-indicator").forEach((e,t)=>{e.classList.toggle("active",t===this._currentIndex)})}_bindTouchEvents(e){e.addEventListener("touchstart",t=>this._onTouchStart(t),{passive:!0}),e.addEventListener("touchmove",t=>this._onTouchMove(t),{passive:!0}),e.addEventListener("touchend",t=>this._onTouchEnd(t)),e.addEventListener("mousedown",t=>this._onMouseDown(t)),e.addEventListener("mousemove",t=>this._onMouseMove(t)),e.addEventListener("mouseup",t=>this._onMouseUp(t)),e.addEventListener("mouseleave",()=>this._onMouseUp())}_onTouchStart(e){this._isDragging=!0,this._touchStartX=e.touches[0].clientX,this._touchCurrentX=this._touchStartX,this._stopAutoplay()}_onTouchMove(e){if(!this._isDragging)return;this._touchCurrentX=e.touches[0].clientX;let t=this._touchCurrentX-this._touchStartX,i=-this._currentIndex*100,r=t/this._container.offsetWidth*100;this._track&&(this._track.style.transition="none",this._track.style.transform="translateX(".concat(i+r,"%)"))}_onTouchEnd(e){if(!this._isDragging)return;this._isDragging=!1;let t=this._touchCurrentX-this._touchStartX;this._track&&(this._track.style.transition=""),Math.abs(t)>this._swipeThreshold?t>0?this.prev():this.next():this._updateTrackPosition(),this._autoplay&&this._active&&this._startAutoplay()}_onMouseDown(e){e.button===0&&(this._isDragging=!0,this._touchStartX=e.clientX,this._touchCurrentX=this._touchStartX,this._stopAutoplay())}_onMouseMove(e){if(!this._isDragging)return;this._touchCurrentX=e.clientX;let t=this._touchCurrentX-this._touchStartX,i=-this._currentIndex*100,r=t/this._container.offsetWidth*100;this._track&&(this._track.style.transition="none",this._track.style.transform="translateX(".concat(i+r,"%)"))}_onMouseUp(){if(!this._isDragging)return;this._isDragging=!1;let e=this._touchCurrentX-this._touchStartX;this._track&&(this._track.style.transition=""),Math.abs(e)>this._swipeThreshold?e>0?this.prev():this.next():this._updateTrackPosition(),this._autoplay&&this._active&&this._startAutoplay()}_startAutoplay(){this._stopAutoplay(),this._autoplay&&(this._autoplayTimer=setInterval(()=>{this.next()},this._interval))}_stopAutoplay(){this._autoplayTimer&&(clearInterval(this._autoplayTimer),this._autoplayTimer=null)}async open(){var e;this._active||(this._active=!0,this._container&&(this._container.dataset.state="expanded"),this._loaded||(await this.loadCards(((e=this._config.body)==null?void 0:e.cards)||[]),this._populateSlides()),this._autoplay&&this._startAutoplay())}async close(){this._active&&(this._active=!1,this._container&&(this._container.dataset.state="collapsed"),this._stopAutoplay())}_populateSlides(){if(!this._track)return;let e=document.createDocumentFragment();this._cards.forEach((t,i)=>{this._hass&&(t.hass=this._hass);let r=document.createElement("div");r.className="carousel-slide",r.dataset.index=i,r.appendChild(t),e.appendChild(r)}),this._track.appendChild(e),this._updateIndicators(),this._updateTrackPosition()}static getStyles(){return'\n      /* ============================= */\n      /* CAROUSEL MODE */\n      /* ============================= */\n      \n      .carousel-mode {\n        overflow: hidden;\n        transition: \n          max-height var(--uc-transition-duration, 300ms) ease,\n          opacity var(--uc-transition-duration, 300ms) ease;\n      }\n      \n      .carousel-mode[data-state="collapsed"] {\n        max-height: 0;\n        opacity: 0;\n      }\n      \n      .carousel-mode[data-state="expanded"] {\n        max-height: 2000px;\n        opacity: 1;\n      }\n      \n      /* ============================= */\n      /* VIEWPORT */\n      /* ============================= */\n      \n      .carousel-viewport {\n        position: relative;\n        overflow: hidden;\n      }\n      \n      /* ============================= */\n      /* TRACK */\n      /* ============================= */\n      \n      .carousel-track {\n        display: flex;\n        transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);\n        will-change: transform;\n      }\n      \n      /* ============================= */\n      /* SLIDE */\n      /* ============================= */\n      \n      .carousel-slide {\n        flex: 0 0 100%;\n        min-width: 100%;\n        padding: var(--uc-padding, 16px);\n        box-sizing: border-box;\n      }\n      \n      .carousel-slide > * {\n        height: 100%;\n      }\n      \n      /* ============================= */\n      /* ARROWS */\n      /* ============================= */\n      \n      .carousel-arrow {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n        z-index: 10;\n        background: var(--ha-card-background, white);\n        border: none;\n        border-radius: 50%;\n        width: 40px;\n        height: 40px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n        transition: transform 0.2s ease, box-shadow 0.2s ease;\n      }\n      \n      .carousel-arrow:hover {\n        transform: translateY(-50%) scale(1.1);\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n      }\n      \n      .carousel-arrow-prev {\n        left: 8px;\n      }\n      \n      .carousel-arrow-next {\n        right: 8px;\n      }\n      \n      .carousel-arrow ha-icon {\n        --mdc-icon-size: 24px;\n        color: var(--primary-text-color);\n      }\n      \n      /* ============================= */\n      /* INDICATORS */\n      /* ============================= */\n      \n      .carousel-indicators {\n        display: flex;\n        justify-content: center;\n        gap: 8px;\n        padding: 12px;\n      }\n      \n      .carousel-indicator {\n        width: 8px;\n        height: 8px;\n        border-radius: 50%;\n        background: var(--divider-color, rgba(0, 0, 0, 0.2));\n        border: none;\n        padding: 0;\n        cursor: pointer;\n        transition: background 0.2s ease, transform 0.2s ease;\n      }\n      \n      .carousel-indicator:hover {\n        background: var(--secondary-text-color);\n        transform: scale(1.2);\n      }\n      \n      .carousel-indicator.active {\n        background: var(--primary-color);\n        transform: scale(1.2);\n      }\n    '}destroy(){this._stopAutoplay(),this._track=null,this._indicators=null,super.destroy()}};var or={expand:ne,modal:ce,fullscreen:le,tabs:de,carousel:ue};function Ii(n,e,t={}){let i=or[n];return i?new i(e,t):(console.warn("[UniversalCard] Unknown mode type: ".concat(n)),null)}function Li(){return[ne.getStyles(),ce.getStyles(),le.getStyles(),de.getStyles(),ue.getStyles()].join("\n")}var Je=class{constructor(e=[]){this._conditions=e,this._hass=null,this._cachedResult=!0,this._cacheKey=null}set hass(e){this._hass=e,this._cacheKey=null}set conditions(e){this._conditions=e,this._cacheKey=null}evaluate(){if(!this._conditions||this._conditions.length===0)return!0;let e=this._generateCacheKey();if(e===this._cacheKey)return this._cachedResult;let t=this._conditions.every(i=>this._evaluateCondition(i));return this._cacheKey=e,this._cachedResult=t,t}_evaluateCondition(e){let t=e.condition;switch(t){case A.STATE:return this._evaluateStateCondition(e);case A.NUMERIC_STATE:return this._evaluateNumericStateCondition(e);case A.USER:return this._evaluateUserCondition(e);case A.TIME:return this._evaluateTimeCondition(e);case A.SCREEN:return this._evaluateScreenCondition(e);case A.AND:return this._evaluateAndCondition(e);case A.OR:return this._evaluateOrCondition(e);case A.NOT:return this._evaluateNotCondition(e);default:return console.warn("[UniversalCard] Unknown condition type: ".concat(t)),!0}}_evaluateStateCondition(e){let{entity:t,state:i,state_not:r,attribute:s}=e;if(!t||!this._hass)return!0;let o;return s?o=te(this._hass,t,s):o=L(this._hass,t),r!==void 0?!(Array.isArray(r)?r:[r]).includes(o):i!==void 0?(Array.isArray(i)?i:[i]).includes(o):!0}_evaluateNumericStateCondition(e){let{entity:t,attribute:i,above:r,below:s}=e;if(!t||!this._hass)return!0;let o;i?o=te(this._hass,t,i):o=L(this._hass,t);let a=parseFloat(o);return!(isNaN(a)||r!==void 0&&a<=r||s!==void 0&&a>=s)}_evaluateUserCondition(e){let{users:t,is_admin:i,is_owner:r}=e;if(!this._hass)return!0;let s=Xe(this._hass);return s?!(t&&Array.isArray(t)&&!t.includes(s.name)&&!t.includes(s.id)||i!==void 0&&s.is_admin!==i||r!==void 0&&s.is_owner!==r):!0}_evaluateTimeCondition(e){let{after:t,before:i,weekday:r}=e,s=new Date,o=s.getHours()*60+s.getMinutes();if(t){let[a,c]=t.split(":").map(Number),l=a*60+c;if(o<l)return!1}if(i){let[a,c]=i.split(":").map(Number),l=a*60+c;if(o>=l)return!1}if(r&&Array.isArray(r)){let c=["sun","mon","tue","wed","thu","fri","sat"][s.getDay()];if(!r.includes(c))return!1}return!0}_evaluateScreenCondition(e){let{media_query:t,min_width:i,max_width:r}=e;if(t)return window.matchMedia(t).matches;let s=window.innerWidth;return!(i!==void 0&&s<i||r!==void 0&&s>r)}_evaluateAndCondition(e){let{conditions:t}=e;return!t||!Array.isArray(t)?!0:t.every(i=>this._evaluateCondition(i))}_evaluateOrCondition(e){let{conditions:t}=e;return!t||!Array.isArray(t)?!0:t.some(i=>this._evaluateCondition(i))}_evaluateNotCondition(e){let{conditions:t}=e;return!t||!Array.isArray(t)?!0:!t.every(i=>this._evaluateCondition(i))}_generateCacheKey(){if(!this._hass)return"no-hass";let t=this._getRelevantEntities().map(s=>{let o=this._hass.states[s];return o?"".concat(s,":").concat(o.state):"".concat(s,":null")});if(this._conditions.some(s=>s.condition===A.SCREEN)&&t.push("screen:".concat(window.innerWidth)),this._conditions.some(s=>s.condition===A.TIME)){let s=new Date;t.push("time:".concat(s.getHours(),":").concat(s.getMinutes()))}return t.join("|")}_getRelevantEntities(){let e=new Set,t=i=>{i.forEach(r=>{r.entity&&e.add(r.entity),r.conditions&&Array.isArray(r.conditions)&&t(r.conditions)})};return t(this._conditions),Array.from(e)}hasEntityDependencies(){return this._getRelevantEntities().length>0}hasScreenDependencies(){return this._conditions.some(e=>e.condition===A.SCREEN)}hasTimeDependencies(){return this._conditions.some(e=>e.condition===A.TIME)}};var Ze=class{constructor(e={}){this._config=e,this._hass=null,this._element=null,this._appliedStyles={}}set hass(e){this._hass=e,this._update()}set element(e){this._element=e,this._update()}set config(e){this._config=e,this._update()}_update(){if(!this._element||!this._hass||!this._config)return;let{entity:e,state_styles:t,attribute:i}=this._config;if(!e||!t)return;let r;i?r=te(this._hass,e,i):r=L(this._hass,e);let s=this._findMatchingStyle(r,t);this._applyStyles(s)}_findMatchingStyle(e,t){if(t[e])return t[e];let i=parseFloat(e);if(!isNaN(i)){for(let[r,s]of Object.entries(t))if(this._matchesNumericCondition(i,r))return s}return t["*"]||t.default?t["*"]||t.default:null}_matchesNumericCondition(e,t){if(t.includes("-")&&!t.startsWith("-")){let[i,r]=t.split("-").map(Number);return e>=i&&e<=r}return t.startsWith(">=")?e>=parseFloat(t.slice(2)):t.startsWith("<=")?e<=parseFloat(t.slice(2)):t.startsWith(">")?e>parseFloat(t.slice(1)):t.startsWith("<")?e<parseFloat(t.slice(1)):!1}_applyStyles(e){if(!this._element||(this._removeAppliedStyles(),!e))return;let t=this._normalizeStyles(e);if(Object.entries(t).forEach(([i,r])=>{i.startsWith("--")?this._element.style.setProperty(i,r):this._element.style[i]=r,this._appliedStyles[i]=r}),e.class){let i=Array.isArray(e.class)?e.class:[e.class];i.forEach(r=>this._element.classList.add(r)),this._appliedStyles._classes=i}}_removeAppliedStyles(){this._element&&(Object.keys(this._appliedStyles).forEach(e=>{e==="_classes"?this._appliedStyles._classes.forEach(t=>{this._element.classList.remove(t)}):e.startsWith("--")?this._element.style.removeProperty(e):this._element.style[e]=""}),this._appliedStyles={})}_normalizeStyles(e){let t={},i={background:"background",bg:"background",color:"color",text_color:"color",border:"border",border_color:"borderColor",border_width:"borderWidth",border_radius:"borderRadius",shadow:"boxShadow",box_shadow:"boxShadow",opacity:"opacity",transform:"transform",filter:"filter"};return Object.entries(e).forEach(([r,s])=>{if(r==="class")return;let a=(i[r]||r).replace(/_([a-z])/g,(c,l)=>l.toUpperCase());t[a]=s}),t}static getStateColor(e){return{on:"var(--state-active-color, #fdd835)",off:"var(--state-inactive-color, #969696)",home:"var(--state-home-color, #4caf50)",not_home:"var(--state-not-home-color, #f44336)",armed_home:"var(--warning-color, #ff9800)",armed_away:"var(--error-color, #f44336)",armed_night:"var(--warning-color, #ff9800)",disarmed:"var(--success-color, #4caf50)",triggered:"var(--error-color, #f44336)",pending:"var(--warning-color, #ff9800)",locked:"var(--success-color, #4caf50)",unlocked:"var(--warning-color, #ff9800)",open:"var(--state-active-color, #fdd835)",closed:"var(--state-inactive-color, #969696)",opening:"var(--warning-color, #ff9800)",closing:"var(--warning-color, #ff9800)",heating:"var(--error-color, #f44336)",cooling:"var(--info-color, #03a9f4)",idle:"var(--state-inactive-color, #969696)",unavailable:"var(--disabled-text-color, #bdbdbd)",unknown:"var(--disabled-text-color, #bdbdbd)"}[e]||null}static getIconColorStyles(){return"\n      /* State-based icon colors */\n      .state-on { --icon-color: var(--state-active-color, #fdd835); }\n      .state-off { --icon-color: var(--state-inactive-color, #969696); }\n      .state-home { --icon-color: var(--state-home-color, #4caf50); }\n      .state-not_home { --icon-color: var(--state-not-home-color, #f44336); }\n      .state-unavailable { --icon-color: var(--disabled-text-color, #bdbdbd); }\n    "}};var Qe=class{constructor(e,t={}){this._element=e,this._options=d({threshold:t.threshold||50,velocityThreshold:t.velocityThreshold||.3,direction:t.direction||"horizontal",preventScroll:t.preventScroll||!1},t),this._touchStart={x:0,y:0,time:0},this._touchCurrent={x:0,y:0},this._isTracking=!1,this._listeners={left:[],right:[],up:[],down:[]},this._handleTouchStart=this._handleTouchStart.bind(this),this._handleTouchMove=this._handleTouchMove.bind(this),this._handleTouchEnd=this._handleTouchEnd.bind(this),this._attach()}_attach(){this._element.addEventListener("touchstart",this._handleTouchStart,{passive:!0}),this._element.addEventListener("touchmove",this._handleTouchMove,{passive:!this._options.preventScroll}),this._element.addEventListener("touchend",this._handleTouchEnd),this._element.addEventListener("touchcancel",this._handleTouchEnd)}destroy(){this._element.removeEventListener("touchstart",this._handleTouchStart),this._element.removeEventListener("touchmove",this._handleTouchMove),this._element.removeEventListener("touchend",this._handleTouchEnd),this._element.removeEventListener("touchcancel",this._handleTouchEnd),this._listeners={left:[],right:[],up:[],down:[]}}_handleTouchStart(e){let t=e.touches[0];this._touchStart={x:t.clientX,y:t.clientY,time:Date.now()},this._touchCurrent={x:t.clientX,y:t.clientY},this._isTracking=!0}_handleTouchMove(e){if(!this._isTracking)return;let t=e.touches[0];if(this._touchCurrent={x:t.clientX,y:t.clientY},this._options.preventScroll){let i=Math.abs(this._touchCurrent.x-this._touchStart.x),r=Math.abs(this._touchCurrent.y-this._touchStart.y);(this._options.direction==="horizontal"&&i>r||this._options.direction==="vertical"&&r>i)&&e.preventDefault()}}_handleTouchEnd(e){if(!this._isTracking)return;this._isTracking=!1;let t=this._touchCurrent.x-this._touchStart.x,i=this._touchCurrent.y-this._touchStart.y,r=Date.now()-this._touchStart.time,s=Math.abs(t)/r,o=Math.abs(i)/r,a=this._getSwipeDirection(t,i,s,o);a&&this._triggerSwipe(a,{deltaX:t,deltaY:i,velocityX:s,velocityY:o,duration:r})}_getSwipeDirection(e,t,i,r){let{threshold:s,velocityThreshold:o,direction:a}=this._options,c=Math.abs(e),l=Math.abs(t),u=c>s||i>o,h=l>s||r>o;return a!=="vertical"&&u&&c>l?e>0?"right":"left":a!=="horizontal"&&h&&l>c?t>0?"down":"up":null}_triggerSwipe(e,t){this._listeners[e].forEach(i=>{try{i(t)}catch(r){console.error("[UniversalCard] Swipe callback error:",r)}}),m(this._element,"uc-swipe",d({direction:e},t))}on(e,t){return this._listeners[e]?(this._listeners[e].push(t),()=>{let i=this._listeners[e].indexOf(t);i>-1&&this._listeners[e].splice(i,1)}):(console.warn("[UniversalCard] Invalid swipe direction: ".concat(e)),()=>{})}onSwipeLeft(e){return this.on("left",e)}onSwipeRight(e){return this.on("right",e)}onSwipeUp(e){return this.on("up",e)}onSwipeDown(e){return this.on("down",e)}};var et={xs:{max:480},sm:{min:481,max:768},md:{min:769,max:1024},lg:{min:1025,max:1280},xl:{min:1281}},tt=class{constructor(e={},t={}){this._config=e,this._options=t,this._element=null,this._currentBreakpoint=null,this._resizeObserver=null,this._listeners=[],this._mediaQueries={},this._debouncedUpdate=Q(()=>this._update(),100)}init(e){this._element=e,this._setupMediaQueries(),this._config.useContainerQueries&&this._setupResizeObserver(),this._update()}_setupMediaQueries(){let e=this._config.breakpoints||et;Object.entries(e).forEach(([t,i])=>{let r=this._buildMediaQuery(i),s=window.matchMedia(r);this._mediaQueries[t]=s;let o=()=>this._debouncedUpdate();s.addEventListener?s.addEventListener("change",o):s.addListener(o)})}_buildMediaQuery(e){let t=[];return e.min!==void 0&&t.push("(min-width: ".concat(e.min,"px)")),e.max!==void 0&&t.push("(max-width: ".concat(e.max,"px)")),t.join(" and ")||"all"}_setupResizeObserver(){!this._element||!("ResizeObserver"in window)||(this._resizeObserver=new ResizeObserver(e=>{this._debouncedUpdate()}),this._resizeObserver.observe(this._element))}_update(){let e=this._getCurrentBreakpoint();if(e!==this._currentBreakpoint){let t=this._currentBreakpoint;this._currentBreakpoint=e,this._applyBreakpointStyles(e),this._notifyListeners(e,t)}}_getCurrentBreakpoint(){if(this._config.useContainerQueries&&this._element){let e=this._element.offsetWidth;return this._getBreakpointForWidth(e)}for(let[e,t]of Object.entries(this._mediaQueries))if(t.matches)return e;return"default"}_getBreakpointForWidth(e){let t=this._config.breakpoints||et;for(let[i,r]of Object.entries(t)){let s=r.min===void 0||e>=r.min,o=r.max===void 0||e<=r.max;if(s&&o)return i}return"default"}_applyBreakpointStyles(e){var i;if(!this._element)return;this._element.dataset.breakpoint=e;let t=(i=this._config.responsive)==null?void 0:i[e];t&&(t.columns!==void 0&&this._element.style.setProperty("--uc-grid-columns",t.columns),t.gap!==void 0&&this._element.style.setProperty("--uc-gap",t.gap),t.padding!==void 0&&this._element.style.setProperty("--uc-padding",t.padding),t.styles&&Object.entries(t.styles).forEach(([r,s])=>{r.startsWith("--")?this._element.style.setProperty(r,s):this._element.style[r]=s}))}_notifyListeners(e,t){this._listeners.forEach(i=>{var r;try{i({breakpoint:e,previousBreakpoint:t,width:((r=this._element)==null?void 0:r.offsetWidth)||window.innerWidth})}catch(s){console.error("[UniversalCard] Breakpoint listener error:",s)}})}get current(){return this._currentBreakpoint}is(e){return(Array.isArray(e)?e:[e]).includes(this._currentBreakpoint)}isAtLeast(e){let t=Object.keys(this._config.breakpoints||et),i=t.indexOf(this._currentBreakpoint),r=t.indexOf(e);return i>=r}isAtMost(e){let t=Object.keys(this._config.breakpoints||et),i=t.indexOf(this._currentBreakpoint),r=t.indexOf(e);return i<=r}onChange(e){return this._listeners.push(e),()=>{let t=this._listeners.indexOf(e);t>-1&&this._listeners.splice(t,1)}}destroy(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),this._mediaQueries={},this._listeners=[],this._element=null}};var it=class n{constructor(e={},t={}){this._config=e,this._options=t,this._menu=null,this._hass=null,this._closeHandler=this._handleOutsideClick.bind(this),this._escapeHandler=this._handleEscape.bind(this)}set hass(e){this._hass=e}show(e,t,i={}){this.hide(),this._menu=this._createMenu(i),this._positionMenu(e,t),document.body.appendChild(this._menu),document.addEventListener("click",this._closeHandler),document.addEventListener("contextmenu",this._closeHandler),document.addEventListener("keydown",this._escapeHandler),requestAnimationFrame(()=>{var r;(r=this._menu)==null||r.classList.add("open")})}hide(){this._menu&&(document.removeEventListener("click",this._closeHandler),document.removeEventListener("contextmenu",this._closeHandler),document.removeEventListener("keydown",this._escapeHandler),this._menu.classList.remove("open"),setTimeout(()=>{var e;(e=this._menu)==null||e.remove(),this._menu=null},150))}_createMenu(e){let t=document.createElement("div");return t.className="uc-context-menu",t.innerHTML="<style>".concat(n.getStyles(),"</style>"),(this._config.items||[]).forEach((r,s)=>{r.type==="separator"?t.appendChild(this._createSeparator()):t.appendChild(this._createMenuItem(r,s,e))}),t}_createMenuItem(e,t,i){let r=document.createElement("button");r.className="uc-context-menu-item",e.disabled&&(r.disabled=!0,r.classList.add("disabled"));let s=e.icon?'<ha-icon icon="'.concat(e.icon,'"></ha-icon>'):'<span class="icon-placeholder"></span>',o=e.label||e.name||"",a=e.shortcut?'<span class="shortcut">'.concat(e.shortcut,"</span>"):"",c=e.submenu?'<ha-icon icon="mdi:chevron-right" class="submenu-icon"></ha-icon>':"";return r.innerHTML="\n      ".concat(s,'\n      <span class="label">').concat(o,"</span>\n      ").concat(a,"\n      ").concat(c,"\n    "),e.submenu?r.addEventListener("mouseenter",()=>{this._showSubmenu(r,e.submenu,i)}):r.addEventListener("click",l=>{l.stopPropagation(),this._handleItemClick(e,i)}),r}_createSeparator(){let e=document.createElement("div");return e.className="uc-context-menu-separator",e}_positionMenu(e,t){if(!this._menu)return;let i=this._menu.getBoundingClientRect(),r=window.innerWidth,s=window.innerHeight;e+i.width>r&&(e=r-i.width-8),t+i.height>s&&(t=s-i.height-8),e=Math.max(8,e),t=Math.max(8,t),this._menu.style.left="".concat(e,"px"),this._menu.style.top="".concat(t,"px")}_showSubmenu(e,t,i){console.debug("[UniversalCard] Submenu:",t)}_handleItemClick(e,t){this.hide(),e.action&&K(this._hass,document.body,e.action),e.callback&&typeof e.callback=="function"&&e.callback(t),e.event&&m(document.body,e.event,{item:e,context:t})}_handleOutsideClick(e){this._menu&&!this._menu.contains(e.target)&&this.hide()}_handleEscape(e){e.key==="Escape"&&this.hide()}static getStyles(){return"\n      .uc-context-menu {\n        position: fixed;\n        z-index: 10000;\n        min-width: 180px;\n        max-width: 280px;\n        background: var(--ha-card-background, white);\n        border-radius: 8px;\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n        padding: 4px 0;\n        opacity: 0;\n        transform: scale(0.95);\n        transform-origin: top left;\n        transition: opacity 0.15s ease, transform 0.15s ease;\n      }\n      \n      .uc-context-menu.open {\n        opacity: 1;\n        transform: scale(1);\n      }\n      \n      .uc-context-menu-item {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        width: 100%;\n        padding: 10px 16px;\n        background: none;\n        border: none;\n        cursor: pointer;\n        text-align: left;\n        color: var(--primary-text-color);\n        font-size: 14px;\n        transition: background 0.1s ease;\n      }\n      \n      .uc-context-menu-item:hover {\n        background: rgba(0, 0, 0, 0.06);\n      }\n      \n      .uc-context-menu-item.disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n      \n      .uc-context-menu-item.disabled:hover {\n        background: none;\n      }\n      \n      .uc-context-menu-item ha-icon {\n        --mdc-icon-size: 20px;\n        color: var(--secondary-text-color);\n      }\n      \n      .uc-context-menu-item .icon-placeholder {\n        width: 20px;\n      }\n      \n      .uc-context-menu-item .label {\n        flex: 1;\n      }\n      \n      .uc-context-menu-item .shortcut {\n        font-size: 12px;\n        color: var(--secondary-text-color);\n        opacity: 0.7;\n      }\n      \n      .uc-context-menu-item .submenu-icon {\n        --mdc-icon-size: 16px;\n        margin-right: -8px;\n      }\n      \n      .uc-context-menu-separator {\n        height: 1px;\n        background: var(--divider-color, rgba(0, 0, 0, 0.12));\n        margin: 4px 0;\n      }\n    "}destroy(){this.hide()}};var rt=class n{constructor(e={},t={}){this._config=e,this._options=d({radius:t.radius||80,itemSize:t.itemSize||48,startAngle:t.startAngle||-90},t),this._menu=null,this._center=null,this._hass=null,this._selectedIndex=null,this._centerPos={x:0,y:0},this._moveHandler=this._handleMove.bind(this),this._endHandler=this._handleEnd.bind(this)}set hass(e){this._hass=e}show(e,t,i={}){this.hide(),this._centerPos={x:e,y:t},this._menu=this._createMenu(i),document.body.appendChild(this._menu),document.addEventListener("touchmove",this._moveHandler,{passive:!1}),document.addEventListener("touchend",this._endHandler),document.addEventListener("mousemove",this._moveHandler),document.addEventListener("mouseup",this._endHandler),requestAnimationFrame(()=>{var r;(r=this._menu)==null||r.classList.add("open")})}hide(e=!1){if(this._menu){if(e&&this._selectedIndex!==null){let i=(this._config.items||[])[this._selectedIndex];i&&this._executeItem(i)}document.removeEventListener("touchmove",this._moveHandler),document.removeEventListener("touchend",this._endHandler),document.removeEventListener("mousemove",this._moveHandler),document.removeEventListener("mouseup",this._endHandler),this._menu.classList.remove("open"),setTimeout(()=>{var t;(t=this._menu)==null||t.remove(),this._menu=null,this._center=null,this._selectedIndex=null},200)}}_createMenu(e){let t=document.createElement("div");t.className="uc-radial-menu",t.innerHTML="<style>".concat(n.getStyles(),"</style>");let i=document.createElement("div");i.className="uc-radial-overlay",t.appendChild(i),this._center=document.createElement("div"),this._center.className="uc-radial-center",this._center.style.left="".concat(this._centerPos.x,"px"),this._center.style.top="".concat(this._centerPos.y,"px"),t.appendChild(this._center);let r=this._config.items||[],s=360/r.length;return r.forEach((o,a)=>{let c=this._createItem(o,a,s);t.appendChild(c)}),t}_createItem(e,t,i){let{radius:r,itemSize:s,startAngle:o}=this._options,c=(o+t*i)*Math.PI/180,l=this._centerPos.x+r*Math.cos(c),u=this._centerPos.y+r*Math.sin(c),h=document.createElement("button");return h.className="uc-radial-item",h.dataset.index=t,h.style.left="".concat(l,"px"),h.style.top="".concat(u,"px"),h.style.width="".concat(s,"px"),h.style.height="".concat(s,"px"),h.style.setProperty("--delay","".concat(t*30,"ms")),e.color&&h.style.setProperty("--item-color",e.color),e.icon?h.innerHTML='<ha-icon icon="'.concat(e.icon,'"></ha-icon>'):e.label&&(h.innerHTML="<span>".concat(e.label.charAt(0),"</span>")),e.label&&(h.title=e.label),h}_handleMove(e){e.preventDefault();let t,i;e.touches?(t=e.touches[0].clientX,i=e.touches[0].clientY):(t=e.clientX,i=e.clientY);let r=t-this._centerPos.x,s=i-this._centerPos.y,o=Math.sqrt(r*r+s*s);if(this._center){let c=Math.min(20,Math.max(-20,r*.3)),l=Math.min(20,Math.max(-20,s*.3));this._center.style.transform="translate(-50%, -50%) translate(".concat(c,"px, ").concat(l,"px)")}if(o>30){let c=(Math.atan2(s,r)*(180/Math.PI)-this._options.startAngle+360)%360,l=this._config.items||[],u=360/l.length,h=Math.round(c/u)%l.length;this._selectItem(h)}else this._selectItem(null)}_handleEnd(e){this.hide(!0)}_selectItem(e){var t,i;if(e!==this._selectedIndex){if(this._selectedIndex!==null){let r=(t=this._menu)==null?void 0:t.querySelector('.uc-radial-item[data-index="'.concat(this._selectedIndex,'"]'));r==null||r.classList.remove("selected")}if(this._selectedIndex=e,e!==null){let r=(i=this._menu)==null?void 0:i.querySelector('.uc-radial-item[data-index="'.concat(e,'"]'));r==null||r.classList.add("selected")}}}_executeItem(e){e.action&&K(this._hass,document.body,e.action),e.callback&&typeof e.callback=="function"&&e.callback(),e.event&&m(document.body,e.event,{item:e})}static getStyles(){return"\n      .uc-radial-menu {\n        position: fixed;\n        inset: 0;\n        z-index: 10001;\n        pointer-events: none;\n      }\n      \n      .uc-radial-overlay {\n        position: absolute;\n        inset: 0;\n        background: rgba(0, 0, 0, 0);\n        transition: background 0.2s ease;\n        pointer-events: auto;\n      }\n      \n      .uc-radial-menu.open .uc-radial-overlay {\n        background: rgba(0, 0, 0, 0.3);\n      }\n      \n      .uc-radial-center {\n        position: absolute;\n        width: 60px;\n        height: 60px;\n        border-radius: 50%;\n        background: var(--ha-card-background, white);\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n        transform: translate(-50%, -50%);\n        transition: transform 0.1s ease;\n        pointer-events: none;\n        opacity: 0;\n      }\n      \n      .uc-radial-menu.open .uc-radial-center {\n        opacity: 1;\n      }\n      \n      .uc-radial-item {\n        position: absolute;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50%;\n        background: var(--item-color, var(--primary-color));\n        color: white;\n        border: none;\n        cursor: pointer;\n        transform: translate(-50%, -50%) scale(0);\n        transition: \n          transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),\n          box-shadow 0.2s ease;\n        transition-delay: var(--delay, 0ms);\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n        pointer-events: auto;\n      }\n      \n      .uc-radial-menu.open .uc-radial-item {\n        transform: translate(-50%, -50%) scale(1);\n      }\n      \n      .uc-radial-item.selected {\n        transform: translate(-50%, -50%) scale(1.2);\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);\n      }\n      \n      .uc-radial-item ha-icon {\n        --mdc-icon-size: 24px;\n      }\n      \n      .uc-radial-item span {\n        font-size: 18px;\n        font-weight: 600;\n      }\n    "}destroy(){this.hide()}};var ar={width:120,height:40,hours:24,strokeWidth:2,strokeColor:"var(--primary-color, #03a9f4)",fillColor:"var(--primary-color, #03a9f4)",fillOpacity:.1,showValue:!0,showMinMax:!1,animationDuration:200,position:"top",offset:8},st=class{constructor(e,t={}){this._hass=e,this._config=d(d({},ar),t),this._previewElement=null,this._currentEntityId=null,this._historyCache=new Map,this._hideTimeout=null,this._debouncedShow=Q(this._showPreview.bind(this),150)}set hass(e){this._hass=e}_createPreviewElement(){let e=document.createElement("div");return e.className="uc-entity-preview",e.innerHTML='\n      <div class="uc-preview-header">\n        <span class="uc-preview-name"></span>\n        <span class="uc-preview-value"></span>\n      </div>\n      <div class="uc-preview-chart">\n        <svg class="uc-preview-sparkline"></svg>\n      </div>\n      <div class="uc-preview-stats">\n        <span class="uc-preview-min"></span>\n        <span class="uc-preview-max"></span>\n      </div>\n    ',document.body.appendChild(e),e}attach(e,t){!e||!t||(e.addEventListener("mouseenter",i=>{this._currentEntityId=t,this._debouncedShow(e,t)}),e.addEventListener("mouseleave",()=>{this._hidePreview()}),e.addEventListener("mousemove",i=>{this._updatePosition(i)}))}detach(e){var i;if(!e)return;let t=e.cloneNode(!0);return(i=e.parentNode)==null||i.replaceChild(t,e),t}async _showPreview(e,t){var a,c;if(this._currentEntityId!==t)return;this._previewElement||(this._previewElement=this._createPreviewElement());let i=(c=(a=this._hass)==null?void 0:a.states)==null?void 0:c[t];if(!i)return;let r=this._previewElement.querySelector(".uc-preview-name"),s=this._previewElement.querySelector(".uc-preview-value");r.textContent=i.attributes.friendly_name||t,s.textContent="".concat(i.state," ").concat(i.attributes.unit_of_measurement||"");let o=await this._fetchHistory(t);o&&o.length>0&&this._currentEntityId===t&&(this._renderSparkline(o),this._config.showMinMax&&this._renderStats(o)),this._positionPreview(e),this._previewElement.classList.add("visible")}_hidePreview(){this._currentEntityId=null,this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(()=>{this._previewElement&&this._previewElement.classList.remove("visible")},100)}async _fetchHistory(e){let t=this._historyCache.get(e);if(t&&Date.now()-t.timestamp<6e4)return t.data;try{let i=new Date,r=new Date(i.getTime()-this._config.hours*60*60*1e3),s=await this._hass.callApi("GET","history/period/".concat(r.toISOString(),"?")+"filter_entity_id=".concat(e,"&")+"end_time=".concat(i.toISOString(),"&")+"minimal_response&no_attributes");if(s&&s[0]){let o=s[0].map(a=>({time:new Date(a.last_changed),value:parseFloat(a.state)})).filter(a=>!isNaN(a.value));return this._historyCache.set(e,{data:o,timestamp:Date.now()}),o}}catch(i){console.warn("[EntityPreview] Failed to fetch history for ".concat(e,":"),i)}return[]}_renderSparkline(e){let t=this._previewElement.querySelector(".uc-preview-sparkline");if(!t||e.length<2)return;let{width:i,height:r,strokeWidth:s,strokeColor:o,fillColor:a,fillOpacity:c}=this._config,l=e.map(Z=>Z.value),u=Math.min(...l),f=Math.max(...l)-u||1,p=s,_=i-p*2,y=r-p*2,v=e.map((Z,De)=>{let Wt=p+De/(e.length-1)*_,Xt=p+y-(Z.value-u)/f*y;return{x:Wt,y:Xt}}),q=v.map((Z,De)=>De===0?"M ".concat(Z.x," ").concat(Z.y):"L ".concat(Z.x," ").concat(Z.y)).join(" "),ye="".concat(q," L ").concat(v[v.length-1].x," ").concat(r-p," L ").concat(p," ").concat(r-p," Z");t.setAttribute("width",i),t.setAttribute("height",r),t.innerHTML='\n      <defs>\n        <linearGradient id="sparkline-gradient" x1="0%" y1="0%" x2="0%" y2="100%">\n          <stop offset="0%" style="stop-color:'.concat(a,";stop-opacity:").concat(c,'" />\n          <stop offset="100%" style="stop-color:').concat(a,';stop-opacity:0" />\n        </linearGradient>\n      </defs>\n      <path d="').concat(ye,'" fill="url(#sparkline-gradient)" />\n      <path d="').concat(q,'" fill="none" stroke="').concat(o,'" stroke-width="').concat(s,'" \n            stroke-linecap="round" stroke-linejoin="round" />\n      <circle cx="').concat(v[v.length-1].x,'" cy="').concat(v[v.length-1].y,'" \n              r="3" fill="').concat(o,'" />\n    ')}_renderStats(e){let t=e.map(a=>a.value),i=Math.min(...t),r=Math.max(...t),s=this._previewElement.querySelector(".uc-preview-min"),o=this._previewElement.querySelector(".uc-preview-max");s.textContent="Min: ".concat(i.toFixed(1)),o.textContent="Max: ".concat(r.toFixed(1)),this._previewElement.querySelector(".uc-preview-stats").style.display="flex"}_positionPreview(e){if(!this._previewElement||!e)return;let t=e.getBoundingClientRect(),i=this._previewElement.getBoundingClientRect(),{position:r,offset:s}=this._config,o,a;switch(r){case"top":o=t.top-i.height-s,a=t.left+(t.width-i.width)/2;break;case"bottom":o=t.bottom+s,a=t.left+(t.width-i.width)/2;break;case"left":o=t.top+(t.height-i.height)/2,a=t.left-i.width-s;break;case"right":o=t.top+(t.height-i.height)/2,a=t.right+s;break}let c=window.innerWidth,l=window.innerHeight;a<8&&(a=8),a+i.width>c-8&&(a=c-i.width-8),o<8&&(o=t.bottom+s),o+i.height>l-8&&(o=t.top-i.height-s),this._previewElement.style.top="".concat(o,"px"),this._previewElement.style.left="".concat(a,"px")}_updatePosition(e){}clearCache(){this._historyCache.clear()}destroy(){this._hidePreview(),this._previewElement&&(this._previewElement.remove(),this._previewElement=null),this._historyCache.clear()}static getStyles(){return"\n      .uc-entity-preview {\n        position: fixed;\n        z-index: 10000;\n        background: var(--ha-card-background, var(--card-background-color, white));\n        border-radius: 12px;\n        padding: 12px;\n        box-shadow: \n          0 4px 20px rgba(0, 0, 0, 0.15),\n          0 0 0 1px rgba(0, 0, 0, 0.05);\n        opacity: 0;\n        visibility: hidden;\n        transform: translateY(4px) scale(0.95);\n        transition: \n          opacity 0.2s ease,\n          visibility 0.2s ease,\n          transform 0.2s ease;\n        pointer-events: none;\n        min-width: 150px;\n        backdrop-filter: blur(10px);\n        -webkit-backdrop-filter: blur(10px);\n      }\n\n      .uc-entity-preview.visible {\n        opacity: 1;\n        visibility: visible;\n        transform: translateY(0) scale(1);\n      }\n\n      .uc-preview-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 8px;\n        gap: 12px;\n      }\n\n      .uc-preview-name {\n        font-size: 12px;\n        color: var(--secondary-text-color, #666);\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-width: 100px;\n      }\n\n      .uc-preview-value {\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-text-color, #333);\n        white-space: nowrap;\n      }\n\n      .uc-preview-chart {\n        display: flex;\n        justify-content: center;\n      }\n\n      .uc-preview-sparkline {\n        display: block;\n      }\n\n      .uc-preview-stats {\n        display: none;\n        justify-content: space-between;\n        margin-top: 8px;\n        font-size: 10px;\n        color: var(--secondary-text-color, #666);\n      }\n\n      .uc-preview-min,\n      .uc-preview-max {\n        opacity: 0.7;\n      }\n\n      /* \u0422\u0451\u043C\u043D\u0430\u044F \u0442\u0435\u043C\u0430 */\n      @media (prefers-color-scheme: dark) {\n        .uc-entity-preview {\n          box-shadow: \n            0 4px 20px rgba(0, 0, 0, 0.4),\n            0 0 0 1px rgba(255, 255, 255, 0.1);\n        }\n      }\n    "}};var he={INFO:"info",WARNING:"warning",ERROR:"error",SUCCESS:"success",CRITICAL:"critical"},J={ABOVE:"above",BELOW:"below",EQUALS:"equals",NOT_EQUALS:"not_equals",BETWEEN:"between",OUTSIDE:"outside",CHANGED:"changed",UNAVAILABLE:"unavailable"},we={BADGE:"badge",BORDER:"border",PULSE:"pulse",SHAKE:"shake",NOTIFICATION:"notification",SOUND:"sound",SERVICE:"service"},nr={debounce_time:1e3,history_size:10,auto_dismiss:5e3,sounds:{info:"/local/sounds/info.mp3",warning:"/local/sounds/warning.mp3",error:"/local/sounds/error.mp3",critical:"/local/sounds/critical.mp3"}},ot=class{constructor(e,t={}){this._hass=e,this._config=d(d({},nr),t),this._alerts=new Map,this._history=[],this._lastTriggerTime=new Map,this._entityStates=new Map,this._container=null,this._callbacks=new Set}set hass(e){let t=this._hass;this._hass=e,this._checkAlerts(t)}register(e,t){var r,s;let i={id:e,entity_id:t.entity_id,condition:t.condition||J.ABOVE,value:t.value,value_min:t.value_min,value_max:t.value_max,type:t.type||he.WARNING,message:t.message,actions:t.actions||[we.BADGE],service:t.service,service_data:t.service_data,enabled:t.enabled!==!1,triggered:!1};return this._alerts.set(e,i),(s=(r=this._hass)==null?void 0:r.states)!=null&&s[i.entity_id]&&this._entityStates.set(i.entity_id,this._hass.states[i.entity_id].state),e}unregister(e){this._alerts.delete(e),this._lastTriggerTime.delete(e)}setEnabled(e,t){let i=this._alerts.get(e);i&&(i.enabled=t,t||(i.triggered=!1))}_checkAlerts(e){var t,i;if(this._hass)for(let[r,s]of this._alerts){if(!s.enabled)continue;let o=s.entity_id,a=(t=this._hass.states)==null?void 0:t[o],c=(i=e==null?void 0:e.states)==null?void 0:i[o];if(!a)continue;let l=this._evaluateCondition(s,a,c);l&&!s.triggered?this._triggerAlert(s,a):!l&&s.triggered&&this._clearAlert(s)}}_evaluateCondition(e,t,i){let r=t.state,s=parseFloat(r),{condition:o,value:a,value_min:c,value_max:l}=e;switch(o){case J.ABOVE:return!isNaN(s)&&s>a;case J.BELOW:return!isNaN(s)&&s<a;case J.EQUALS:return r===String(a)||s===a;case J.NOT_EQUALS:return r!==String(a)&&s!==a;case J.BETWEEN:return!isNaN(s)&&s>=c&&s<=l;case J.OUTSIDE:return!isNaN(s)&&(s<c||s>l);case J.CHANGED:return i&&i.state!==r;case J.UNAVAILABLE:return r==="unavailable"||r==="unknown";default:return!1}}_triggerAlert(e,t){let i=this._lastTriggerTime.get(e.id),r=Date.now();if(!(i&&r-i<this._config.debounce_time)){e.triggered=!0,this._lastTriggerTime.set(e.id,r),this._addToHistory(e,t);for(let s of e.actions)this._executeAction(s,e,t);this._notifyCallbacks("triggered",e,t)}}_clearAlert(e){e.triggered=!1,this._notifyCallbacks("cleared",e)}_executeAction(e,t,i){switch(e){case we.NOTIFICATION:this._showNotification(t,i);break;case we.SOUND:this._playSound(t.type);break;case we.SERVICE:this._callService(t);break;default:break}}_showNotification(e,t){var s;let i=this._formatMessage(e.message,t);this._container||(this._container=document.createElement("div"),this._container.className="uc-alerts-container",document.body.appendChild(this._container));let r=document.createElement("div");r.className="uc-alert-notification uc-alert-".concat(e.type),r.innerHTML='\n      <div class="uc-alert-icon">'.concat(this._getIcon(e.type),'</div>\n      <div class="uc-alert-content">\n        <div class="uc-alert-title">').concat(((s=t.attributes)==null?void 0:s.friendly_name)||e.entity_id,'</div>\n        <div class="uc-alert-message">').concat(i,'</div>\n      </div>\n      <button class="uc-alert-close">\xD7</button>\n    '),r.querySelector(".uc-alert-close").addEventListener("click",()=>{r.classList.add("uc-alert-hiding"),setTimeout(()=>r.remove(),300)}),this._container.appendChild(r),this._config.auto_dismiss>0&&setTimeout(()=>{r.parentNode&&(r.classList.add("uc-alert-hiding"),setTimeout(()=>r.remove(),300))},this._config.auto_dismiss)}_playSound(e){var i;let t=(i=this._config.sounds)==null?void 0:i[e];if(t){let r=new Audio(t);r.volume=.5,r.play().catch(()=>{})}}_callService(e){if(!e.service||!this._hass)return;let[t,i]=e.service.split(".");t&&i&&this._hass.callService(t,i,e.service_data||{})}_formatMessage(e,t){var i,r;return e?e.replace(/\{state\}/g,t.state).replace(/\{entity_id\}/g,t.entity_id).replace(/\{friendly_name\}/g,((i=t.attributes)==null?void 0:i.friendly_name)||t.entity_id).replace(/\{unit\}/g,((r=t.attributes)==null?void 0:r.unit_of_measurement)||"").replace(/\{(\w+)\}/g,(s,o)=>{var a;return((a=t.attributes)==null?void 0:a[o])||s}):"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435: ".concat(t.state)}_getIcon(e){return{[he.INFO]:"\u{1F4A1}",[he.WARNING]:"\u26A0\uFE0F",[he.ERROR]:"\u274C",[he.SUCCESS]:"\u2705",[he.CRITICAL]:"\u{1F6A8}"}[e]||"\u{1F4E2}"}_addToHistory(e,t){this._history.unshift({id:e.id,type:e.type,entity_id:e.entity_id,state:t.state,message:this._formatMessage(e.message,t),timestamp:new Date}),this._history.length>this._config.history_size&&this._history.pop()}getHistory(){return[...this._history]}getActiveAlerts(){return Array.from(this._alerts.values()).filter(e=>e.triggered)}subscribe(e){return this._callbacks.add(e),()=>this._callbacks.delete(e)}_notifyCallbacks(e,t,i=null){for(let r of this._callbacks)try{r(e,t,i)}catch(s){console.error("[Alerts] Callback error:",s)}}getClassesForEntity(e){let t=[];for(let i of this._alerts.values())if(i.entity_id===e&&i.triggered){t.push("uc-alert-active"),t.push("uc-alert-type-".concat(i.type));for(let r of i.actions)[we.BORDER,we.PULSE,we.SHAKE].includes(r)&&t.push("uc-alert-".concat(r))}return t}clearAll(){for(let e of this._alerts.values())e.triggered=!1;this._history=[]}destroy(){this._alerts.clear(),this._history=[],this._lastTriggerTime.clear(),this._entityStates.clear(),this._callbacks.clear(),this._container&&(this._container.remove(),this._container=null)}static getStyles(){return"\n      /* \u041A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439 */\n      .uc-alerts-container {\n        position: fixed;\n        top: 16px;\n        right: 16px;\n        z-index: 10001;\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n        max-width: 400px;\n        pointer-events: none;\n      }\n\n      /* \u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 */\n      .uc-alert-notification {\n        display: flex;\n        align-items: flex-start;\n        gap: 12px;\n        padding: 12px 16px;\n        border-radius: 12px;\n        background: var(--ha-card-background, white);\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n        animation: uc-alert-slide-in 0.3s ease-out;\n        pointer-events: auto;\n        border-left: 4px solid;\n      }\n\n      .uc-alert-notification.uc-alert-hiding {\n        animation: uc-alert-slide-out 0.3s ease-out forwards;\n      }\n\n      @keyframes uc-alert-slide-in {\n        from {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n        to {\n          transform: translateX(0);\n          opacity: 1;\n        }\n      }\n\n      @keyframes uc-alert-slide-out {\n        from {\n          transform: translateX(0);\n          opacity: 1;\n        }\n        to {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n      }\n\n      /* \u0422\u0438\u043F\u044B \u043E\u043F\u043E\u0432\u0435\u0449\u0435\u043D\u0438\u0439 */\n      .uc-alert-info {\n        border-color: var(--info-color, #2196f3);\n      }\n\n      .uc-alert-warning {\n        border-color: var(--warning-color, #ff9800);\n      }\n\n      .uc-alert-error {\n        border-color: var(--error-color, #f44336);\n      }\n\n      .uc-alert-success {\n        border-color: var(--success-color, #4caf50);\n      }\n\n      .uc-alert-critical {\n        border-color: #d32f2f;\n        background: linear-gradient(135deg, rgba(211, 47, 47, 0.1) 0%, transparent 100%);\n      }\n\n      .uc-alert-icon {\n        font-size: 20px;\n        line-height: 1;\n        flex-shrink: 0;\n      }\n\n      .uc-alert-content {\n        flex: 1;\n        min-width: 0;\n      }\n\n      .uc-alert-title {\n        font-weight: 600;\n        font-size: 14px;\n        color: var(--primary-text-color);\n        margin-bottom: 2px;\n      }\n\n      .uc-alert-message {\n        font-size: 13px;\n        color: var(--secondary-text-color);\n        word-wrap: break-word;\n      }\n\n      .uc-alert-close {\n        background: none;\n        border: none;\n        font-size: 20px;\n        line-height: 1;\n        color: var(--secondary-text-color);\n        cursor: pointer;\n        padding: 0;\n        opacity: 0.5;\n        transition: opacity 0.2s;\n      }\n\n      .uc-alert-close:hover {\n        opacity: 1;\n      }\n\n      /* \u041A\u043B\u0430\u0441\u0441\u044B \u0434\u043B\u044F \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432 \u0441 \u043E\u043F\u043E\u0432\u0435\u0449\u0435\u043D\u0438\u044F\u043C\u0438 */\n      .uc-alert-active {\n        position: relative;\n      }\n\n      .uc-alert-border {\n        box-shadow: 0 0 0 2px var(--error-color, #f44336) !important;\n      }\n\n      .uc-alert-type-warning.uc-alert-border {\n        box-shadow: 0 0 0 2px var(--warning-color, #ff9800) !important;\n      }\n\n      .uc-alert-type-critical.uc-alert-border {\n        box-shadow: 0 0 0 3px #d32f2f !important;\n      }\n\n      .uc-alert-pulse {\n        animation: uc-pulse 2s infinite;\n      }\n\n      @keyframes uc-pulse {\n        0%, 100% {\n          box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.4);\n        }\n        50% {\n          box-shadow: 0 0 0 10px rgba(244, 67, 54, 0);\n        }\n      }\n\n      .uc-alert-shake {\n        animation: uc-shake 0.5s ease-in-out;\n      }\n\n      @keyframes uc-shake {\n        0%, 100% { transform: translateX(0); }\n        10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }\n        20%, 40%, 60%, 80% { transform: translateX(4px); }\n      }\n    "}};var S={TOGGLE:"toggle",TURN_ON:"turn_on",TURN_OFF:"turn_off",SERVICE:"service",MORE_INFO:"more-info",NAVIGATE:"navigate",URL:"url",FIRE_EVENT:"fire-event",SCRIPT:"script",SCENE:"scene"},cr={[S.TOGGLE]:"mdi:toggle-switch",[S.TURN_ON]:"mdi:power",[S.TURN_OFF]:"mdi:power-off",[S.SERVICE]:"mdi:cog",[S.MORE_INFO]:"mdi:information",[S.NAVIGATE]:"mdi:arrow-right",[S.URL]:"mdi:open-in-new",[S.FIRE_EVENT]:"mdi:broadcast",[S.SCRIPT]:"mdi:script-text",[S.SCENE]:"mdi:palette"},at=class{constructor(e,t={}){this._hass=e,this._config=t,this._actions=[],this._element=null,this._confirmDialog=null}set hass(e){this._hass=e,this._updateStates()}setActions(e){this._actions=e.map((t,i)=>({id:t.id||"action_".concat(i),type:t.type||S.SERVICE,name:t.name,icon:t.icon||cr[t.type]||"mdi:gesture-tap",entity_id:t.entity_id,service:t.service,service_data:t.service_data,target:t.target,navigation_path:t.navigation_path,url:t.url,url_new_tab:t.url_new_tab!==!1,event:t.event,event_data:t.event_data,confirmation:t.confirmation,show_state:t.show_state,disabled_when:t.disabled_when,hidden_when:t.hidden_when,color:t.color,active_color:t.active_color||"var(--primary-color)"}))}render(){this._element=document.createElement("div"),this._element.className="uc-quick-actions";for(let e of this._actions){let t=this._createActionButton(e);t&&this._element.appendChild(t)}return this._element}_createActionButton(e){if(this._evaluateCondition(e.hidden_when))return null;let t=document.createElement("button");t.className="uc-quick-action",t.dataset.actionId=e.id,this._evaluateCondition(e.disabled_when)&&(t.disabled=!0,t.classList.add("disabled"));let r=this._isActionActive(e);r&&t.classList.add("active");let s=document.createElement("ha-icon");if(s.setAttribute("icon",e.icon),t.appendChild(s),e.name){let o=document.createElement("span");o.className="uc-action-name",o.textContent=e.name,t.appendChild(o)}if(e.show_state&&e.entity_id){let o=document.createElement("span");o.className="uc-action-state",o.textContent=this._getEntityState(e.entity_id),t.appendChild(o)}return e.color&&t.style.setProperty("--action-color",e.color),r&&e.active_color&&t.style.setProperty("--action-color",e.active_color),t.addEventListener("click",o=>{o.stopPropagation(),this._executeAction(e)}),e.name&&(t.title=e.name),t}async _executeAction(e){if(!(e.confirmation&&!await this._showConfirmation(e.confirmation))){switch(e.type){case S.TOGGLE:this._executeToggle(e);break;case S.TURN_ON:this._executeTurnOn(e);break;case S.TURN_OFF:this._executeTurnOff(e);break;case S.SERVICE:this._executeService(e);break;case S.MORE_INFO:this._executeMoreInfo(e);break;case S.NAVIGATE:this._executeNavigate(e);break;case S.URL:this._executeUrl(e);break;case S.FIRE_EVENT:this._executeFireEvent(e);break;case S.SCRIPT:this._executeScript(e);break;case S.SCENE:this._executeScene(e);break}this._animateButton(e.id)}}_executeToggle(e){if(!e.entity_id)return;let t=e.entity_id.split(".")[0],i="toggle";["script","scene"].includes(t)&&(i="turn_on"),this._hass.callService(t,i,{entity_id:e.entity_id})}_executeTurnOn(e){if(!e.entity_id)return;let t=e.entity_id.split(".")[0];this._hass.callService(t,"turn_on",d({entity_id:e.entity_id},e.service_data))}_executeTurnOff(e){if(!e.entity_id)return;let t=e.entity_id.split(".")[0];this._hass.callService(t,"turn_off",{entity_id:e.entity_id})}_executeService(e){if(!e.service)return;let[t,i]=e.service.split(".");if(!t||!i)return;let r=d({},e.service_data);e.target?this._hass.callService(t,i,r,e.target):e.entity_id?(r.entity_id=e.entity_id,this._hass.callService(t,i,r)):this._hass.callService(t,i,r)}_executeMoreInfo(e){e.entity_id&&m(window,"hass-more-info",{entityId:e.entity_id})}_executeNavigate(e){e.navigation_path&&(history.pushState(null,"",e.navigation_path),m(window,"location-changed"))}_executeUrl(e){e.url&&(e.url_new_tab?window.open(e.url,"_blank"):window.location.href=e.url)}_executeFireEvent(e){e.event&&this._hass.callApi("POST","events/"+e.event,e.event_data||{})}_executeScript(e){e.entity_id&&this._hass.callService("script","turn_on",d({entity_id:e.entity_id},e.service_data))}_executeScene(e){e.entity_id&&this._hass.callService("scene","turn_on",{entity_id:e.entity_id})}async _showConfirmation(e){let t=typeof e=="string"?e:e.text||"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B?";return new Promise(i=>{let r=document.createElement("div");r.className="uc-confirm-dialog",r.innerHTML='\n        <div class="uc-confirm-backdrop"></div>\n        <div class="uc-confirm-content">\n          <div class="uc-confirm-message">'.concat(t,'</div>\n          <div class="uc-confirm-buttons">\n            <button class="uc-confirm-cancel">\u041E\u0442\u043C\u0435\u043D\u0430</button>\n            <button class="uc-confirm-ok">OK</button>\n          </div>\n        </div>\n      '),r.querySelector(".uc-confirm-backdrop").addEventListener("click",()=>{r.remove(),i(!1)}),r.querySelector(".uc-confirm-cancel").addEventListener("click",()=>{r.remove(),i(!1)}),r.querySelector(".uc-confirm-ok").addEventListener("click",()=>{r.remove(),i(!0)}),document.body.appendChild(r),setTimeout(()=>{r.querySelector(".uc-confirm-ok").focus()},10)})}_isActionActive(e){var i,r;if(!e.entity_id)return!1;let t=(r=(i=this._hass)==null?void 0:i.states)==null?void 0:r[e.entity_id];return t?["on","playing","home","open","unlocked"].includes(t.state):!1}_evaluateCondition(e){var t,i,r,s;if(!e)return!1;if(typeof e=="string"){let o=(i=(t=this._hass)==null?void 0:t.states)==null?void 0:i[e];return(o==null?void 0:o.state)==="on"}if(e.entity_id){let o=(s=(r=this._hass)==null?void 0:r.states)==null?void 0:s[e.entity_id];if(!o)return!1;if(e.state!==void 0)return o.state===String(e.state);if(e.state_not!==void 0)return o.state!==String(e.state_not);let a=parseFloat(o.state);if(e.above!==void 0)return a>e.above;if(e.below!==void 0)return a<e.below}return!1}_getEntityState(e){var r,s,o;let t=(s=(r=this._hass)==null?void 0:r.states)==null?void 0:s[e];if(!t)return"-";let i=(o=t.attributes)==null?void 0:o.unit_of_measurement;return i?"".concat(t.state," ").concat(i):t.state}_animateButton(e){if(!this._element)return;let t=this._element.querySelector('[data-action-id="'.concat(e,'"]'));t&&(t.classList.add("uc-action-clicked"),setTimeout(()=>{t.classList.remove("uc-action-clicked")},300))}_updateStates(){if(this._element)for(let e of this._actions){let t=this._element.querySelector('[data-action-id="'.concat(e.id,'"]'));if(!t)continue;let i=this._isActionActive(e);if(t.classList.toggle("active",i),e.show_state&&e.entity_id){let s=t.querySelector(".uc-action-state");s&&(s.textContent=this._getEntityState(e.entity_id))}let r=this._evaluateCondition(e.disabled_when);t.disabled=r,t.classList.toggle("disabled",r)}}destroy(){this._element&&(this._element.remove(),this._element=null)}static getStyles(){return"\n      .uc-quick-actions {\n        display: flex;\n        gap: 4px;\n        align-items: center;\n        flex-wrap: wrap;\n      }\n\n      .uc-quick-action {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 4px;\n        padding: 6px 10px;\n        border: none;\n        border-radius: 8px;\n        background: var(--action-color, var(--primary-background-color, rgba(0,0,0,0.05)));\n        color: var(--primary-text-color);\n        cursor: pointer;\n        transition: all 0.2s ease;\n        font-size: 12px;\n        min-width: 32px;\n        min-height: 32px;\n      }\n\n      .uc-quick-action:hover:not(.disabled) {\n        background: var(--action-color, var(--primary-color));\n        color: var(--text-primary-color, white);\n        transform: translateY(-1px);\n      }\n\n      .uc-quick-action:active:not(.disabled) {\n        transform: translateY(0) scale(0.95);\n      }\n\n      .uc-quick-action.active {\n        background: var(--action-color, var(--primary-color));\n        color: var(--text-primary-color, white);\n      }\n\n      .uc-quick-action.disabled {\n        opacity: 0.4;\n        cursor: not-allowed;\n      }\n\n      .uc-quick-action.uc-action-clicked {\n        animation: uc-action-ripple 0.3s ease;\n      }\n\n      @keyframes uc-action-ripple {\n        0% { transform: scale(1); }\n        50% { transform: scale(0.9); }\n        100% { transform: scale(1); }\n      }\n\n      .uc-quick-action ha-icon {\n        --mdc-icon-size: 18px;\n      }\n\n      .uc-action-name {\n        white-space: nowrap;\n      }\n\n      .uc-action-state {\n        font-size: 11px;\n        opacity: 0.8;\n        white-space: nowrap;\n      }\n\n      /* \u0414\u0438\u0430\u043B\u043E\u0433 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F */\n      .uc-confirm-dialog {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 10002;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .uc-confirm-backdrop {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.5);\n        backdrop-filter: blur(4px);\n      }\n\n      .uc-confirm-content {\n        position: relative;\n        background: var(--ha-card-background, white);\n        border-radius: 16px;\n        padding: 24px;\n        min-width: 280px;\n        max-width: 400px;\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n        animation: uc-confirm-appear 0.2s ease;\n      }\n\n      @keyframes uc-confirm-appear {\n        from {\n          transform: scale(0.9);\n          opacity: 0;\n        }\n        to {\n          transform: scale(1);\n          opacity: 1;\n        }\n      }\n\n      .uc-confirm-message {\n        font-size: 16px;\n        color: var(--primary-text-color);\n        margin-bottom: 20px;\n        text-align: center;\n      }\n\n      .uc-confirm-buttons {\n        display: flex;\n        gap: 12px;\n        justify-content: flex-end;\n      }\n\n      .uc-confirm-cancel,\n      .uc-confirm-ok {\n        padding: 10px 20px;\n        border: none;\n        border-radius: 8px;\n        font-size: 14px;\n        cursor: pointer;\n        transition: all 0.2s;\n      }\n\n      .uc-confirm-cancel {\n        background: var(--secondary-background-color, #f0f0f0);\n        color: var(--primary-text-color);\n      }\n\n      .uc-confirm-cancel:hover {\n        background: var(--disabled-color, #ddd);\n      }\n\n      .uc-confirm-ok {\n        background: var(--primary-color, #03a9f4);\n        color: white;\n      }\n\n      .uc-confirm-ok:hover {\n        filter: brightness(1.1);\n      }\n\n      .uc-confirm-ok:focus {\n        outline: 2px solid var(--primary-color);\n        outline-offset: 2px;\n      }\n    "}};var D={COUNTDOWN:"countdown",COUNTUP:"countup",TIMER:"timer",ENTITY:"entity",REMAINING:"remaining"},ke={FULL:"full",COMPACT:"compact",HUMAN:"human",DIGITAL:"digital"},Ni={mode:D.COUNTDOWN,format:ke.DIGITAL,show_icon:!0,show_label:!1,warning_threshold:60,danger_threshold:10,end_action:null,sound_on_end:!1,hide_when_inactive:!1},nt=class{constructor(e,t={}){this._hass=e,this._config=d(d({},Ni),t),this._element=null,this._intervalId=null,this._targetTime=null,this._startTime=null,this._isRunning=!1,this._isPaused=!1,this._remainingOnPause=0}set hass(e){this._hass=e,this._updateFromEntity()}setConfig(e){switch(this._config=d(d({},Ni),e),this._config.mode){case D.COUNTDOWN:this._config.target_time?this.setTargetTime(new Date(this._config.target_time)):this._config.duration&&this.setDuration(this._config.duration);break;case D.COUNTUP:this._config.start_time?this._startTime=new Date(this._config.start_time):this._startTime=new Date;break}}render(){return this._element=document.createElement("div"),this._element.className="uc-timer",this._element.innerHTML="\n      ".concat(this._config.show_icon?'<ha-icon class="uc-timer-icon" icon="mdi:timer"></ha-icon>':"","\n      ").concat(this._config.show_label&&this._config.label?'<span class="uc-timer-label">'.concat(this._config.label,"</span>"):"",'\n      <span class="uc-timer-value">--:--</span>\n      ').concat(this._config.show_controls?this._renderControls():"","\n    "),this._config.show_controls&&this._bindControlEvents(),this._updateDisplay(),this._element}_renderControls(){return'\n      <div class="uc-timer-controls">\n        <button class="uc-timer-btn uc-timer-start" title="\u0421\u0442\u0430\u0440\u0442">\n          <ha-icon icon="mdi:play"></ha-icon>\n        </button>\n        <button class="uc-timer-btn uc-timer-pause" title="\u041F\u0430\u0443\u0437\u0430">\n          <ha-icon icon="mdi:pause"></ha-icon>\n        </button>\n        <button class="uc-timer-btn uc-timer-reset" title="\u0421\u0431\u0440\u043E\u0441">\n          <ha-icon icon="mdi:refresh"></ha-icon>\n        </button>\n      </div>\n    '}_bindControlEvents(){let e=this._element.querySelector(".uc-timer-start"),t=this._element.querySelector(".uc-timer-pause"),i=this._element.querySelector(".uc-timer-reset");e&&e.addEventListener("click",r=>{r.stopPropagation(),this.start()}),t&&t.addEventListener("click",r=>{r.stopPropagation(),this.pause()}),i&&i.addEventListener("click",r=>{r.stopPropagation(),this.reset()})}setTargetTime(e){this._targetTime=e,this._updateDisplay()}setDuration(e){let t;if(typeof e=="string"){let i=e.split(":").map(Number);i.length===3?t=i[0]*3600+i[1]*60+i[2]:i.length===2?t=i[0]*60+i[1]:t=parseInt(e,10)}else t=e;this._targetTime=new Date(Date.now()+t*1e3),this._config.initial_duration=t}start(){if(!this._isRunning){if(this._isPaused&&this._remainingOnPause>0&&(this._targetTime=new Date(Date.now()+this._remainingOnPause*1e3),this._isPaused=!1,this._remainingOnPause=0),this._config.mode===D.TIMER&&this._config.entity_id){this._hass.callService("timer","start",{entity_id:this._config.entity_id});return}this._isRunning=!0,this._startTicking(),this._updateControlsState()}}pause(){if(this._isRunning){if(this._config.mode===D.TIMER&&this._config.entity_id){this._hass.callService("timer","pause",{entity_id:this._config.entity_id});return}this._isRunning=!1,this._isPaused=!0,this._remainingOnPause=this._getRemaining(),this._stopTicking(),this._updateControlsState()}}reset(){if(this._config.mode===D.TIMER&&this._config.entity_id){this._hass.callService("timer","cancel",{entity_id:this._config.entity_id});return}this._isRunning=!1,this._isPaused=!1,this._remainingOnPause=0,this._config.initial_duration&&this.setDuration(this._config.initial_duration),this._stopTicking(),this._updateDisplay(),this._updateControlsState()}_startTicking(){this._stopTicking(),this._intervalId=setInterval(()=>{this._tick()},1e3)}_stopTicking(){this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)}_tick(){let e=this._getRemaining();this._updateDisplay(),this._config.mode===D.COUNTDOWN&&e<=0&&this._onTimerEnd()}_onTimerEnd(){this._isRunning=!1,this._stopTicking(),this._config.sound_on_end&&this._playEndSound(),this._config.end_action&&this._executeEndAction(),m(this._element,"timer-end",{config:this._config}),this._element.classList.add("uc-timer-ended"),this._updateControlsState()}_playEndSound(){let e=this._config.end_sound||"/local/sounds/timer-end.mp3",t=new Audio(e);t.volume=.5,t.play().catch(()=>{})}_executeEndAction(){let e=this._config.end_action;if(e.service){let[t,i]=e.service.split(".");t&&i&&this._hass.callService(t,i,e.service_data||{})}}_getRemaining(){switch(this._config.mode){case D.COUNTDOWN:return this._targetTime?Math.max(0,Math.floor((this._targetTime-Date.now())/1e3)):0;case D.COUNTUP:return this._startTime?Math.floor((Date.now()-this._startTime)/1e3):0;case D.TIMER:case D.ENTITY:case D.REMAINING:return this._getRemainingFromEntity();default:return 0}}_getRemainingFromEntity(){var r,s,o,a;let e=this._config.entity_id;if(!e||!((s=(r=this._hass)==null?void 0:r.states)!=null&&s[e]))return 0;let t=this._hass.states[e];if(e.startsWith("timer.")){if(t.state!=="active")return 0;let c=new Date(t.attributes.finishes_at);return Math.max(0,Math.floor((c-Date.now())/1e3))}if((o=t.attributes)!=null&&o.remaining)return this._parseTimeString(t.attributes.remaining);if((a=t.attributes)!=null&&a.end_time){let c=new Date(t.attributes.end_time);return Math.max(0,Math.floor((c-Date.now())/1e3))}let i=parseFloat(t.state);return isNaN(i)?0:Math.floor(i)}_parseTimeString(e){let t=e.split(":").map(Number);return t.length===3?t[0]*3600+t[1]*60+t[2]:t.length===2?t[0]*60+t[1]:parseInt(e,10)||0}_updateFromEntity(){var i,r;if(!this._config.entity_id)return;let e=this._config.entity_id,t=(r=(i=this._hass)==null?void 0:i.states)==null?void 0:r[e];if(t){if(e.startsWith("timer.")){let s=t.state==="active",o=t.state==="paused";s&&!this._isRunning?(this._isRunning=!0,this._startTicking()):!s&&this._isRunning&&(this._isRunning=!1,this._stopTicking()),this._isPaused=o}this._updateDisplay(),this._updateControlsState()}}_updateDisplay(){if(!this._element)return;let e=this._getRemaining(),t=this._element.querySelector(".uc-timer-value");if(t&&(t.textContent=this._formatTime(e),this._element.classList.remove("uc-timer-warning","uc-timer-danger"),this._config.mode===D.COUNTDOWN&&(e<=this._config.danger_threshold&&e>0?this._element.classList.add("uc-timer-danger"):e<=this._config.warning_threshold&&this._element.classList.add("uc-timer-warning")),this._config.hide_when_inactive)){let i=!this._isRunning&&e===0;this._element.classList.toggle("uc-timer-hidden",i)}}_formatTime(e){let t=e<0;e=Math.abs(e);let i=Math.floor(e/86400),r=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),o=e%60,a=t?"-":"";switch(this._config.format){case ke.FULL:let c=[];return i>0&&c.push("".concat(i,"\u0434")),r>0&&c.push("".concat(r,"\u0447")),s>0&&c.push("".concat(s,"\u043C")),c.push("".concat(o,"\u0441")),a+c.join(" ");case ke.COMPACT:return i>0?"".concat(a).concat(i,":").concat(this._pad(r),":").concat(this._pad(s),":").concat(this._pad(o)):r>0?"".concat(a).concat(r,":").concat(this._pad(s),":").concat(this._pad(o)):"".concat(a).concat(s,":").concat(this._pad(o));case ke.HUMAN:return a+this._humanize(i,r,s,o);case ke.DIGITAL:default:return i>0?"".concat(a).concat(i,"\u0434 ").concat(this._pad(r),":").concat(this._pad(s),":").concat(this._pad(o)):r>0?"".concat(a).concat(this._pad(r),":").concat(this._pad(s),":").concat(this._pad(o)):"".concat(a).concat(this._pad(s),":").concat(this._pad(o))}}_pad(e){return String(e).padStart(2,"0")}_humanize(e,t,i,r){return e>0?"\u0447\u0435\u0440\u0435\u0437 ".concat(e," ").concat(this._pluralize(e,"\u0434\u0435\u043D\u044C","\u0434\u043D\u044F","\u0434\u043D\u0435\u0439")):t>0?"\u0447\u0435\u0440\u0435\u0437 ".concat(t," ").concat(this._pluralize(t,"\u0447\u0430\u0441","\u0447\u0430\u0441\u0430","\u0447\u0430\u0441\u043E\u0432")):i>0?"\u0447\u0435\u0440\u0435\u0437 ".concat(i," ").concat(this._pluralize(i,"\u043C\u0438\u043D\u0443\u0442\u0443","\u043C\u0438\u043D\u0443\u0442\u044B","\u043C\u0438\u043D\u0443\u0442")):"\u0447\u0435\u0440\u0435\u0437 ".concat(r," ").concat(this._pluralize(r,"\u0441\u0435\u043A\u0443\u043D\u0434\u0443","\u0441\u0435\u043A\u0443\u043D\u0434\u044B","\u0441\u0435\u043A\u0443\u043D\u0434"))}_pluralize(e,t,i,r){let s=e%10,o=e%100;return o>=11&&o<=19?r:s===1?t:s>=2&&s<=4?i:r}_updateControlsState(){if(!this._element||!this._config.show_controls)return;let e=this._element.querySelector(".uc-timer-start"),t=this._element.querySelector(".uc-timer-pause");e&&(e.style.display=this._isRunning?"none":""),t&&(t.style.display=this._isRunning?"":"none")}destroy(){this._stopTicking(),this._element&&(this._element.remove(),this._element=null)}static getStyles(){return"\n      .uc-timer {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', monospace;\n      }\n\n      .uc-timer.uc-timer-hidden {\n        display: none;\n      }\n\n      .uc-timer-icon {\n        --mdc-icon-size: 20px;\n        color: var(--secondary-text-color);\n      }\n\n      .uc-timer-label {\n        font-size: 12px;\n        color: var(--secondary-text-color);\n      }\n\n      .uc-timer-value {\n        font-size: 16px;\n        font-weight: 600;\n        color: var(--primary-text-color);\n        letter-spacing: 0.5px;\n        transition: color 0.3s ease;\n      }\n\n      /* \u0421\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F */\n      .uc-timer.uc-timer-warning .uc-timer-value {\n        color: var(--warning-color, #ff9800);\n      }\n\n      .uc-timer.uc-timer-danger .uc-timer-value {\n        color: var(--error-color, #f44336);\n        animation: uc-timer-blink 0.5s infinite;\n      }\n\n      .uc-timer.uc-timer-ended .uc-timer-value {\n        color: var(--error-color, #f44336);\n      }\n\n      @keyframes uc-timer-blink {\n        0%, 100% { opacity: 1; }\n        50% { opacity: 0.5; }\n      }\n\n      /* \u042D\u043B\u0435\u043C\u0435\u043D\u0442\u044B \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F */\n      .uc-timer-controls {\n        display: flex;\n        gap: 4px;\n        margin-left: 8px;\n      }\n\n      .uc-timer-btn {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 28px;\n        height: 28px;\n        border: none;\n        border-radius: 6px;\n        background: var(--primary-background-color, rgba(0,0,0,0.05));\n        color: var(--primary-text-color);\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .uc-timer-btn:hover {\n        background: var(--primary-color);\n        color: white;\n      }\n\n      .uc-timer-btn ha-icon {\n        --mdc-icon-size: 16px;\n      }\n\n      /* \u041A\u043E\u043C\u043F\u0430\u043A\u0442\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C */\n      .uc-timer.compact {\n        gap: 4px;\n      }\n\n      .uc-timer.compact .uc-timer-value {\n        font-size: 14px;\n      }\n\n      .uc-timer.compact .uc-timer-icon {\n        --mdc-icon-size: 16px;\n      }\n\n      /* \u0411\u043E\u043B\u044C\u0448\u043E\u0439 \u0440\u0435\u0436\u0438\u043C */\n      .uc-timer.large .uc-timer-value {\n        font-size: 24px;\n      }\n\n      .uc-timer.large .uc-timer-icon {\n        --mdc-icon-size: 28px;\n      }\n    "}};var Ne={light:{on:{icon:"mdi:lightbulb",color:"var(--warning-color, #ffc107)"},off:{icon:"mdi:lightbulb-off",color:"var(--secondary-text-color)"},unavailable:{icon:"mdi:lightbulb-question",color:"var(--disabled-color)"}},switch:{on:{icon:"mdi:toggle-switch",color:"var(--primary-color)"},off:{icon:"mdi:toggle-switch-off",color:"var(--secondary-text-color)"}},lock:{locked:{icon:"mdi:lock",color:"var(--success-color, #4caf50)"},unlocked:{icon:"mdi:lock-open",color:"var(--warning-color, #ff9800)"},locking:{icon:"mdi:lock-clock",color:"var(--info-color)"},unlocking:{icon:"mdi:lock-clock",color:"var(--info-color)"}},binary_sensor_door:{on:{icon:"mdi:door-open",color:"var(--warning-color, #ff9800)"},off:{icon:"mdi:door-closed",color:"var(--success-color, #4caf50)"}},binary_sensor_window:{on:{icon:"mdi:window-open",color:"var(--warning-color, #ff9800)"},off:{icon:"mdi:window-closed",color:"var(--success-color, #4caf50)"}},binary_sensor_motion:{on:{icon:"mdi:motion-sensor",color:"var(--primary-color)"},off:{icon:"mdi:motion-sensor-off",color:"var(--secondary-text-color)"}},binary_sensor_occupancy:{on:{icon:"mdi:home-account",color:"var(--primary-color)"},off:{icon:"mdi:home-outline",color:"var(--secondary-text-color)"}},battery:{high:{icon:"mdi:battery-high",color:"var(--success-color, #4caf50)"},medium:{icon:"mdi:battery-medium",color:"var(--warning-color, #ff9800)"},low:{icon:"mdi:battery-low",color:"var(--error-color, #f44336)"},charging:{icon:"mdi:battery-charging",color:"var(--info-color)"}},climate:{heat:{icon:"mdi:fire",color:"#ff5722"},cool:{icon:"mdi:snowflake",color:"#2196f3"},heat_cool:{icon:"mdi:sun-snowflake",color:"var(--primary-color)"},auto:{icon:"mdi:thermostat-auto",color:"var(--success-color)"},dry:{icon:"mdi:water-percent",color:"#795548"},fan_only:{icon:"mdi:fan",color:"#00bcd4"},off:{icon:"mdi:power",color:"var(--secondary-text-color)"}},media_player:{playing:{icon:"mdi:play-circle",color:"var(--primary-color)"},paused:{icon:"mdi:pause-circle",color:"var(--warning-color)"},idle:{icon:"mdi:stop-circle",color:"var(--secondary-text-color)"},off:{icon:"mdi:power",color:"var(--secondary-text-color)"}},weather:{"clear-night":{icon:"mdi:weather-night",color:"#1a237e"},cloudy:{icon:"mdi:weather-cloudy",color:"#78909c"},fog:{icon:"mdi:weather-fog",color:"#90a4ae"},hail:{icon:"mdi:weather-hail",color:"#b0bec5"},lightning:{icon:"mdi:weather-lightning",color:"#ffc107"},"lightning-rainy":{icon:"mdi:weather-lightning-rainy",color:"#ff9800"},partlycloudy:{icon:"mdi:weather-partly-cloudy",color:"#8bc34a"},pouring:{icon:"mdi:weather-pouring",color:"#2196f3"},rainy:{icon:"mdi:weather-rainy",color:"#03a9f4"},snowy:{icon:"mdi:weather-snowy",color:"#e0e0e0"},"snowy-rainy":{icon:"mdi:weather-snowy-rainy",color:"#b3e5fc"},sunny:{icon:"mdi:weather-sunny",color:"#ffeb3b"},windy:{icon:"mdi:weather-windy",color:"#26a69a"},"windy-variant":{icon:"mdi:weather-windy-variant",color:"#4db6ac"}},person:{home:{icon:"mdi:home-account",color:"var(--success-color, #4caf50)"},not_home:{icon:"mdi:account-arrow-right",color:"var(--secondary-text-color)"},unknown:{icon:"mdi:account-question",color:"var(--warning-color)"}},vacuum:{cleaning:{icon:"mdi:robot-vacuum",color:"var(--primary-color)"},docked:{icon:"mdi:robot-vacuum",color:"var(--success-color)"},returning:{icon:"mdi:robot-vacuum",color:"var(--info-color)"},paused:{icon:"mdi:robot-vacuum",color:"var(--warning-color)"},idle:{icon:"mdi:robot-vacuum",color:"var(--secondary-text-color)"},error:{icon:"mdi:robot-vacuum-alert",color:"var(--error-color)"}}},ct=class{constructor(e,t={}){this._hass=e,this._config=t,this._customMappings=new Map}set hass(e){this._hass=e}register(e,t){this._customMappings.set(e,t)}unregister(e){this._customMappings.delete(e)}getIconAndColor(e,t={}){var l,u,h,f;if(!e||!((u=(l=this._hass)==null?void 0:l.states)!=null&&u[e]))return{icon:t.default_icon||"mdi:help-circle",color:null};let i=this._hass.states[e],r=i.state,s=e.split(".")[0],o=(h=i.attributes)==null?void 0:h.device_class,a=this._customMappings.get(e);if(a||(a=this._customMappings.get("".concat(s,".*"))),a||(s==="binary_sensor"&&o&&(a=Ne["binary_sensor_".concat(o)]),a||(a=Ne[s])),!a)return this._getDefaultIcon(i,t);let c=a[r];if(!c&&a._ranges){let p=parseFloat(r);isNaN(p)||(c=this._findInRanges(a._ranges,p))}return!c&&s==="sensor"&&o==="battery"&&(c=this._getBatteryIcon(r)),c||(c=a.default||a.unknown),c?{icon:c.icon||t.default_icon||((f=i.attributes)==null?void 0:f.icon),color:c.color||null}:this._getDefaultIcon(i,t)}_findInRanges(e,t){for(let r of e){let i=r,{min:s=-1/0,max:o=1/0}=i,a=hi(i,["min","max"]);if(t>=s&&t<=o)return a}return null}_getBatteryIcon(e){let t=parseInt(e,10);return isNaN(t)?Ne.battery.unavailable||{icon:"mdi:battery-unknown",color:"var(--secondary-text-color)"}:t<=10?{icon:"mdi:battery-10",color:"var(--error-color, #f44336)"}:t<=20?{icon:"mdi:battery-20",color:"var(--error-color, #f44336)"}:t<=30?{icon:"mdi:battery-30",color:"var(--warning-color, #ff9800)"}:t<=40?{icon:"mdi:battery-40",color:"var(--warning-color, #ff9800)"}:t<=50?{icon:"mdi:battery-50",color:"var(--warning-color, #ff9800)"}:t<=60?{icon:"mdi:battery-60",color:"var(--success-color, #4caf50)"}:t<=70?{icon:"mdi:battery-70",color:"var(--success-color, #4caf50)"}:t<=80?{icon:"mdi:battery-80",color:"var(--success-color, #4caf50)"}:t<=90?{icon:"mdi:battery-90",color:"var(--success-color, #4caf50)"}:{icon:"mdi:battery",color:"var(--success-color, #4caf50)"}}_getDefaultIcon(e,t){var s;let i=t.default_icon||((s=e.attributes)==null?void 0:s.icon)||this._getDomainIcon(e.entity_id),r=e.state==="on"||e.state==="home"?"var(--primary-color)":null;return{icon:i,color:r}}_getDomainIcon(e){let t=e.split(".")[0];return{automation:"mdi:robot",binary_sensor:"mdi:checkbox-marked-circle",button:"mdi:gesture-tap-button",calendar:"mdi:calendar",camera:"mdi:video",climate:"mdi:thermostat",cover:"mdi:window-shutter",device_tracker:"mdi:account",fan:"mdi:fan",group:"mdi:google-circles-communities",input_boolean:"mdi:toggle-switch",input_number:"mdi:ray-vertex",input_select:"mdi:format-list-bulleted",input_text:"mdi:form-textbox",light:"mdi:lightbulb",lock:"mdi:lock",media_player:"mdi:cast",person:"mdi:account",scene:"mdi:palette",script:"mdi:script-text",sensor:"mdi:eye",sun:"mdi:white-balance-sunny",switch:"mdi:flash",timer:"mdi:timer",vacuum:"mdi:robot-vacuum",weather:"mdi:weather-cloudy",zone:"mdi:map-marker"}[t]||"mdi:bookmark"}static createMappingFromConfig(e){var i,r;let t={};for(let s of e)s.state!==void 0&&(t[s.state]={icon:s.icon,color:s.color}),(s.above!==void 0||s.below!==void 0)&&(t._ranges||(t._ranges=[]),t._ranges.push({min:(i=s.above)!=null?i:-1/0,max:(r=s.below)!=null?r:1/0,icon:s.icon,color:s.color}));return t}renderIcon(e,t={}){let{icon:i,color:r}=this.getIconAndColor(e,t),s=document.createElement("ha-icon");return s.setAttribute("icon",i),r&&(s.style.color=r),t.size&&s.style.setProperty("--mdc-icon-size",typeof t.size=="number"?"".concat(t.size,"px"):t.size),s}static getAvailablePresets(){return Object.keys(Ne)}static getStyles(){return"\n      /* Icon Mapping \u043D\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0445 \u0441\u0442\u0438\u043B\u0435\u0439 */\n      /* \u0426\u0432\u0435\u0442\u0430 \u043F\u0440\u0438\u043C\u0435\u043D\u044F\u044E\u0442\u0441\u044F \u0438\u043D\u043B\u0430\u0439\u043D */\n      \n      .uc-mapped-icon {\n        transition: color 0.3s ease;\n      }\n      \n      .uc-mapped-icon.animate {\n        animation: uc-icon-pulse 0.3s ease;\n      }\n      \n      @keyframes uc-icon-pulse {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(1.2); }\n      }\n    "}};var b={ENTRANCE:"entrance",EXIT:"exit",ATTENTION:"attention",STATE:"state",LOADING:"loading",CONTINUOUS:"continuous"},pe={fadeIn:{category:b.ENTRANCE,keyframes:"\n      @keyframes uc-fadeIn {\n        from { opacity: 0; }\n        to { opacity: 1; }\n      }\n    ",animation:"uc-fadeIn 0.3s ease-out forwards",description:"\u041F\u043B\u0430\u0432\u043D\u043E\u0435 \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u0435"},fadeInUp:{category:b.ENTRANCE,keyframes:"\n      @keyframes uc-fadeInUp {\n        from {\n          opacity: 0;\n          transform: translateY(20px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n    ",animation:"uc-fadeInUp 0.4s ease-out forwards",description:"\u041F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u043D\u0438\u0437\u0443"},fadeInDown:{category:b.ENTRANCE,keyframes:"\n      @keyframes uc-fadeInDown {\n        from {\n          opacity: 0;\n          transform: translateY(-20px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n    ",animation:"uc-fadeInDown 0.4s ease-out forwards",description:"\u041F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0432\u0435\u0440\u0445\u0443"},fadeInLeft:{category:b.ENTRANCE,keyframes:"\n      @keyframes uc-fadeInLeft {\n        from {\n          opacity: 0;\n          transform: translateX(-20px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n    ",animation:"uc-fadeInLeft 0.4s ease-out forwards",description:"\u041F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u043B\u0435\u0432\u0430"},fadeInRight:{category:b.ENTRANCE,keyframes:"\n      @keyframes uc-fadeInRight {\n        from {\n          opacity: 0;\n          transform: translateX(20px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n    ",animation:"uc-fadeInRight 0.4s ease-out forwards",description:"\u041F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u043F\u0440\u0430\u0432\u0430"},scaleIn:{category:b.ENTRANCE,keyframes:"\n      @keyframes uc-scaleIn {\n        from {\n          opacity: 0;\n          transform: scale(0.8);\n        }\n        to {\n          opacity: 1;\n          transform: scale(1);\n        }\n      }\n    ",animation:"uc-scaleIn 0.3s ease-out forwards",description:"\u041C\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u0438 \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u0438"},slideInUp:{category:b.ENTRANCE,keyframes:"\n      @keyframes uc-slideInUp {\n        from {\n          transform: translateY(100%);\n        }\n        to {\n          transform: translateY(0);\n        }\n      }\n    ",animation:"uc-slideInUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards",description:"\u0412\u044B\u0435\u0437\u0434 \u0441\u043D\u0438\u0437\u0443"},bounceIn:{category:b.ENTRANCE,keyframes:"\n      @keyframes uc-bounceIn {\n        0% {\n          opacity: 0;\n          transform: scale(0.3);\n        }\n        50% {\n          transform: scale(1.05);\n        }\n        70% {\n          transform: scale(0.9);\n        }\n        100% {\n          opacity: 1;\n          transform: scale(1);\n        }\n      }\n    ",animation:"uc-bounceIn 0.6s ease-out forwards",description:"\u041F\u0440\u0443\u0436\u0438\u043D\u044F\u0449\u0435\u0435 \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u0435"},flipInX:{category:b.ENTRANCE,keyframes:"\n      @keyframes uc-flipInX {\n        from {\n          opacity: 0;\n          transform: perspective(400px) rotateX(90deg);\n        }\n        to {\n          opacity: 1;\n          transform: perspective(400px) rotateX(0);\n        }\n      }\n    ",animation:"uc-flipInX 0.5s ease-out forwards",description:"3D \u043F\u0435\u0440\u0435\u0432\u043E\u0440\u043E\u0442 \u043F\u043E X"},fadeOut:{category:b.EXIT,keyframes:"\n      @keyframes uc-fadeOut {\n        from { opacity: 1; }\n        to { opacity: 0; }\n      }\n    ",animation:"uc-fadeOut 0.3s ease-out forwards",description:"\u041F\u043B\u0430\u0432\u043D\u043E\u0435 \u0438\u0441\u0447\u0435\u0437\u043D\u043E\u0432\u0435\u043D\u0438\u0435"},fadeOutDown:{category:b.EXIT,keyframes:"\n      @keyframes uc-fadeOutDown {\n        from {\n          opacity: 1;\n          transform: translateY(0);\n        }\n        to {\n          opacity: 0;\n          transform: translateY(20px);\n        }\n      }\n    ",animation:"uc-fadeOutDown 0.3s ease-out forwards",description:"\u0418\u0441\u0447\u0435\u0437\u043D\u043E\u0432\u0435\u043D\u0438\u0435 \u0432\u043D\u0438\u0437"},scaleOut:{category:b.EXIT,keyframes:"\n      @keyframes uc-scaleOut {\n        from {\n          opacity: 1;\n          transform: scale(1);\n        }\n        to {\n          opacity: 0;\n          transform: scale(0.8);\n        }\n      }\n    ",animation:"uc-scaleOut 0.3s ease-out forwards",description:"\u0423\u043C\u0435\u043D\u044C\u0448\u0435\u043D\u0438\u0435 \u043F\u0440\u0438 \u0438\u0441\u0447\u0435\u0437\u043D\u043E\u0432\u0435\u043D\u0438\u0438"},pulse:{category:b.ATTENTION,keyframes:"\n      @keyframes uc-pulse {\n        0%, 100% {\n          transform: scale(1);\n        }\n        50% {\n          transform: scale(1.05);\n        }\n      }\n    ",animation:"uc-pulse 1s ease-in-out infinite",description:"\u041F\u0443\u043B\u044C\u0441\u0430\u0446\u0438\u044F"},shake:{category:b.ATTENTION,keyframes:"\n      @keyframes uc-shake {\n        0%, 100% { transform: translateX(0); }\n        10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }\n        20%, 40%, 60%, 80% { transform: translateX(4px); }\n      }\n    ",animation:"uc-shake 0.5s ease-in-out",description:"\u0422\u0440\u044F\u0441\u043A\u0430"},wobble:{category:b.ATTENTION,keyframes:"\n      @keyframes uc-wobble {\n        0%, 100% { transform: rotate(0deg); }\n        15% { transform: rotate(-5deg); }\n        30% { transform: rotate(3deg); }\n        45% { transform: rotate(-3deg); }\n        60% { transform: rotate(2deg); }\n        75% { transform: rotate(-1deg); }\n      }\n    ",animation:"uc-wobble 0.8s ease-in-out",description:"\u041F\u043E\u043A\u0430\u0447\u0438\u0432\u0430\u043D\u0438\u0435"},jello:{category:b.ATTENTION,keyframes:"\n      @keyframes uc-jello {\n        0%, 100% { transform: skewX(0deg) skewY(0deg); }\n        11.1% { transform: skewX(-6.25deg) skewY(-6.25deg); }\n        22.2% { transform: skewX(3.125deg) skewY(3.125deg); }\n        33.3% { transform: skewX(-1.5625deg) skewY(-1.5625deg); }\n        44.4% { transform: skewX(0.78125deg) skewY(0.78125deg); }\n        55.5% { transform: skewX(-0.390625deg) skewY(-0.390625deg); }\n      }\n    ",animation:"uc-jello 0.9s both",description:"\u0416\u0435\u043B\u0435"},heartbeat:{category:b.ATTENTION,keyframes:"\n      @keyframes uc-heartbeat {\n        0%, 40%, 80%, 100% { transform: scale(1); }\n        20%, 60% { transform: scale(1.15); }\n      }\n    ",animation:"uc-heartbeat 1.3s ease-in-out infinite",description:"\u0421\u0435\u0440\u0434\u0446\u0435\u0431\u0438\u0435\u043D\u0438\u0435"},flash:{category:b.ATTENTION,keyframes:"\n      @keyframes uc-flash {\n        0%, 50%, 100% { opacity: 1; }\n        25%, 75% { opacity: 0; }\n      }\n    ",animation:"uc-flash 1s ease infinite",description:"\u041C\u0438\u0433\u0430\u043D\u0438\u0435"},rubberBand:{category:b.ATTENTION,keyframes:"\n      @keyframes uc-rubberBand {\n        0%, 100% { transform: scaleX(1); }\n        30% { transform: scaleX(1.25) scaleY(0.75); }\n        40% { transform: scaleX(0.75) scaleY(1.25); }\n        50% { transform: scaleX(1.15) scaleY(0.85); }\n        65% { transform: scaleX(0.95) scaleY(1.05); }\n        75% { transform: scaleX(1.05) scaleY(0.95); }\n      }\n    ",animation:"uc-rubberBand 1s ease",description:"\u0420\u0435\u0437\u0438\u043D\u043A\u0430"},stateChange:{category:b.STATE,keyframes:"\n      @keyframes uc-stateChange {\n        0% { transform: scale(1); }\n        30% { transform: scale(1.1); }\n        100% { transform: scale(1); }\n      }\n    ",animation:"uc-stateChange 0.3s ease-out",description:"\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F"},colorPulse:{category:b.STATE,keyframes:"\n      @keyframes uc-colorPulse {\n        0%, 100% { filter: brightness(1); }\n        50% { filter: brightness(1.3); }\n      }\n    ",animation:"uc-colorPulse 0.5s ease",description:"\u041F\u0443\u043B\u044C\u0441\u0430\u0446\u0438\u044F \u0446\u0432\u0435\u0442\u0430"},ripple:{category:b.STATE,keyframes:"\n      @keyframes uc-ripple {\n        0% {\n          transform: scale(0);\n          opacity: 0.5;\n        }\n        100% {\n          transform: scale(4);\n          opacity: 0;\n        }\n      }\n    ",animation:"uc-ripple 0.6s linear",description:"\u0412\u043E\u043B\u043D\u0430 (ripple effect)"},spin:{category:b.LOADING,keyframes:"\n      @keyframes uc-spin {\n        from { transform: rotate(0deg); }\n        to { transform: rotate(360deg); }\n      }\n    ",animation:"uc-spin 1s linear infinite",description:"\u0412\u0440\u0430\u0449\u0435\u043D\u0438\u0435"},bounce:{category:b.LOADING,keyframes:"\n      @keyframes uc-bounce {\n        0%, 100% {\n          transform: translateY(0);\n          animation-timing-function: cubic-bezier(0.8, 0, 1, 1);\n        }\n        50% {\n          transform: translateY(-25%);\n          animation-timing-function: cubic-bezier(0, 0, 0.2, 1);\n        }\n      }\n    ",animation:"uc-bounce 1s infinite",description:"\u041F\u0440\u044B\u0436\u043A\u0438"},shimmer:{category:b.LOADING,keyframes:"\n      @keyframes uc-shimmer {\n        0% { background-position: -200% 0; }\n        100% { background-position: 200% 0; }\n      }\n    ",animation:"uc-shimmer 1.5s ease-in-out infinite",description:"\u041C\u0435\u0440\u0446\u0430\u043D\u0438\u0435 (\u0434\u043B\u044F skeleton)"},dots:{category:b.LOADING,keyframes:"\n      @keyframes uc-dots {\n        0%, 80%, 100% { transform: scale(0); }\n        40% { transform: scale(1); }\n      }\n    ",animation:"uc-dots 1.4s ease-in-out infinite both",description:"\u0422\u043E\u0447\u043A\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438"},float:{category:b.CONTINUOUS,keyframes:"\n      @keyframes uc-float {\n        0%, 100% { transform: translateY(0); }\n        50% { transform: translateY(-10px); }\n      }\n    ",animation:"uc-float 3s ease-in-out infinite",description:"\u041F\u043B\u0430\u0432\u0430\u043D\u0438\u0435"},glow:{category:b.CONTINUOUS,keyframes:"\n      @keyframes uc-glow {\n        0%, 100% { box-shadow: 0 0 5px currentColor; }\n        50% { box-shadow: 0 0 20px currentColor, 0 0 30px currentColor; }\n      }\n    ",animation:"uc-glow 2s ease-in-out infinite",description:"\u0421\u0432\u0435\u0447\u0435\u043D\u0438\u0435"},wave:{category:b.CONTINUOUS,keyframes:"\n      @keyframes uc-wave {\n        0%, 100% { transform: rotate(0deg); }\n        20%, 60% { transform: rotate(-25deg); }\n        40%, 80% { transform: rotate(10deg); }\n      }\n    ",animation:"uc-wave 2.5s infinite",description:"\u041C\u0430\u0448\u0443\u0449\u0430\u044F \u0440\u0443\u043A\u0430"}},lt=class{constructor(){this._injectedStyles=new Set}getPreset(e){return pe[e]||null}getByCategory(e){let t={};for(let[i,r]of Object.entries(pe))r.category===e&&(t[i]=r);return t}apply(e,t,i={}){let r=pe[t];if(!r){console.warn("[AnimationPresets] Unknown preset: ".concat(t));return}this._injectKeyframes(t,r.keyframes);let s=r.animation;i.duration&&(s=s.replace(/\d+\.?\d*s/,"".concat(i.duration,"s"))),i.delay&&(s+=" ".concat(i.delay,"s")),i.iterations&&(s=s.replace(/infinite|1/,String(i.iterations))),e.style.animation=s,i.onComplete&&e.addEventListener("animationend",i.onComplete,{once:!0}),i.removeOnComplete!==!1&&e.addEventListener("animationend",()=>{e.style.animation=""},{once:!0})}stagger(e,t,i={}){let r=i.staggerDelay||.05,s=i.startDelay||0;Array.from(e).forEach((o,a)=>{this.apply(o,t,H(d({},i),{delay:s+a*r}))})}_injectKeyframes(e,t){if(this._injectedStyles.has(e))return;let i=document.createElement("style");i.textContent=t,i.setAttribute("data-uc-animation",e),document.head.appendChild(i),this._injectedStyles.add(e)}static getAllStyles(){let e=[];for(let[t,i]of Object.entries(pe))e.push(i.keyframes),e.push("\n        .uc-animate-".concat(t," {\n          animation: ").concat(i.animation,";\n        }\n      "));return e.push("\n      /* \u0423\u0442\u0438\u043B\u0438\u0442\u0430\u0440\u043D\u044B\u0435 \u043A\u043B\u0430\u0441\u0441\u044B \u0434\u043B\u044F \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u0439 */\n      .uc-animate-delay-100 { animation-delay: 0.1s; }\n      .uc-animate-delay-200 { animation-delay: 0.2s; }\n      .uc-animate-delay-300 { animation-delay: 0.3s; }\n      .uc-animate-delay-400 { animation-delay: 0.4s; }\n      .uc-animate-delay-500 { animation-delay: 0.5s; }\n\n      .uc-animate-duration-fast { animation-duration: 0.2s; }\n      .uc-animate-duration-normal { animation-duration: 0.4s; }\n      .uc-animate-duration-slow { animation-duration: 0.8s; }\n\n      .uc-animate-ease-linear { animation-timing-function: linear; }\n      .uc-animate-ease-in { animation-timing-function: ease-in; }\n      .uc-animate-ease-out { animation-timing-function: ease-out; }\n      .uc-animate-ease-in-out { animation-timing-function: ease-in-out; }\n      .uc-animate-ease-spring { animation-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55); }\n\n      .uc-animate-infinite { animation-iteration-count: infinite; }\n      .uc-animate-once { animation-iteration-count: 1; }\n      .uc-animate-twice { animation-iteration-count: 2; }\n\n      .uc-animate-paused { animation-play-state: paused; }\n      .uc-animate-running { animation-play-state: running; }\n\n      /* \u0420\u0435\u0441\u043F\u0435\u043A\u0442 prefers-reduced-motion */\n      @media (prefers-reduced-motion: reduce) {\n        *,\n        *::before,\n        *::after {\n          animation-duration: 0.01ms !important;\n          animation-iteration-count: 1 !important;\n          transition-duration: 0.01ms !important;\n        }\n      }\n    "),e.join("\n")}static getPresetNames(){return Object.keys(pe)}static getDescription(e){var t;return((t=pe[e])==null?void 0:t.description)||""}};var me={IMMEDIATE:"immediate",THROTTLED:"throttled",BATCHED:"batched",ON_DEMAND:"on_demand",VISIBLE_ONLY:"visible_only"},ie={CRITICAL:0,HIGH:1,NORMAL:2,LOW:3,BACKGROUND:4},lr={strategy:me.THROTTLED,throttleMs:100,batchDelayMs:50,maxBatchSize:50,visibilityThreshold:.1,priorityThrottles:{[ie.CRITICAL]:0,[ie.HIGH]:50,[ie.NORMAL]:100,[ie.LOW]:250,[ie.BACKGROUND]:500}},He=class{constructor(){this._config=d({},lr),this._subscribers=new Map,this._pendingUpdates=new Map,this._batchTimeout=null,this._lastUpdateTime=new Map,this._visibilityObserver=null,this._visibleElements=new WeakSet,this._metrics={totalUpdates:0,throttledUpdates:0,batchedUpdates:0,skippedUpdates:0}}configure(e){this._config=d(d({},this._config),e)}subscribe(e,t,i={}){var s,o;let r={callback:t,priority:(s=i.priority)!=null?s:ie.NORMAL,element:i.element,strategy:(o=i.strategy)!=null?o:this._config.strategy};return this._subscribers.has(e)||this._subscribers.set(e,new Set),this._subscribers.get(e).add(r),i.element&&r.strategy===me.VISIBLE_ONLY&&this._observeVisibility(i.element),()=>{this._unsubscribe(e,r)}}_unsubscribe(e,t){let i=this._subscribers.get(e);i&&(i.delete(t),i.size===0&&this._subscribers.delete(e)),t.element&&this._unobserveVisibility(t.element)}processHassUpdate(e,t){var r,s;if(!(t!=null&&t.states))return;let i=[];for(let o of this._subscribers.keys()){let a=(r=e==null?void 0:e.states)==null?void 0:r[o],c=(s=t==null?void 0:t.states)==null?void 0:s[o];this._hasStateChanged(a,c)&&i.push({entityId:o,newState:c})}if(i.length!==0)switch(this._config.strategy){case me.IMMEDIATE:this._processImmediate(i);break;case me.THROTTLED:this._processThrottled(i);break;case me.BATCHED:this._processBatched(i);break;default:this._processThrottled(i)}}_hasStateChanged(e,t){return!e&&t||e&&!t?!0:!e&&!t?!1:e.state!==t.state||e.last_changed!==t.last_changed}_processImmediate(e){for(let{entityId:t,newState:i}of e)this._notifySubscribers(t,i);this._metrics.totalUpdates+=e.length}_processThrottled(e){var i;let t=Date.now();for(let{entityId:r,newState:s}of e){let o=this._subscribers.get(r);if(!o)continue;let a=ie.BACKGROUND;for(let u of o)u.priority<a&&(a=u.priority);let c=(i=this._config.priorityThrottles[a])!=null?i:this._config.throttleMs,l=this._lastUpdateTime.get(r)||0;t-l>=c?(this._notifySubscribers(r,s),this._lastUpdateTime.set(r,t),this._metrics.totalUpdates++):(this._pendingUpdates.set(r,s),this._scheduleDeferredUpdate(r,c-(t-l)),this._metrics.throttledUpdates++)}}_processBatched(e){for(let{entityId:t,newState:i}of e)this._pendingUpdates.set(t,i);this._metrics.batchedUpdates+=e.length,this._batchTimeout||(this._batchTimeout=setTimeout(()=>{this._processBatch()},this._config.batchDelayMs))}_processBatch(){this._batchTimeout=null;let e=Array.from(this._pendingUpdates.entries()).slice(0,this._config.maxBatchSize);requestAnimationFrame(()=>{for(let[t,i]of e)this._notifySubscribers(t,i),this._pendingUpdates.delete(t);this._metrics.totalUpdates+=e.length}),this._pendingUpdates.size>0&&(this._batchTimeout=setTimeout(()=>{this._processBatch()},this._config.batchDelayMs))}_scheduleDeferredUpdate(e,t){setTimeout(()=>{let i=this._pendingUpdates.get(e);i&&(this._notifySubscribers(e,i),this._pendingUpdates.delete(e),this._lastUpdateTime.set(e,Date.now()))},t)}_notifySubscribers(e,t){let i=this._subscribers.get(e);if(i)for(let r of i){if(r.strategy===me.VISIBLE_ONLY&&r.element&&!this._visibleElements.has(r.element)){this._metrics.skippedUpdates++;continue}try{r.callback(t)}catch(s){console.error("[WebSocketOptimizer] Callback error for ".concat(e,":"),s)}}}_observeVisibility(e){this._visibilityObserver||(this._visibilityObserver=new IntersectionObserver(t=>{for(let i of t)i.isIntersecting?this._visibleElements.add(i.target):this._visibleElements.delete(i.target)},{threshold:this._config.visibilityThreshold})),this._visibilityObserver.observe(e)}_unobserveVisibility(e){this._visibilityObserver&&this._visibilityObserver.unobserve(e),this._visibleElements.delete(e)}forceUpdate(e,t){this._notifySubscribers(e,t),this._lastUpdateTime.set(e,Date.now())}flush(){this._batchTimeout&&(clearTimeout(this._batchTimeout),this._batchTimeout=null);for(let[e,t]of this._pendingUpdates)this._notifySubscribers(e,t);this._pendingUpdates.clear()}getMetrics(){return H(d({},this._metrics),{activeSubscriptions:this._subscribers.size,pendingUpdates:this._pendingUpdates.size,efficiency:this._metrics.totalUpdates>0?((this._metrics.totalUpdates-this._metrics.throttledUpdates)/this._metrics.totalUpdates*100).toFixed(1)+"%":"100%"})}resetMetrics(){this._metrics={totalUpdates:0,throttledUpdates:0,batchedUpdates:0,skippedUpdates:0}}destroy(){this.flush(),this._subscribers.clear(),this._lastUpdateTime.clear(),this._visibilityObserver&&(this._visibilityObserver.disconnect(),this._visibilityObserver=null)}},ri=null;function Ri(){return ri||(ri=new He),ri}function Mi(n,e=100){return Oe(n,e)}function Di(n,e=100){return Q(n,e)}var F={STATE_CHANGE:"uc-link-state-change",EXPAND:"uc-link-expand",COLLAPSE:"uc-link-collapse",TOGGLE:"uc-link-toggle",TAB_CHANGE:"uc-link-tab-change",CUSTOM:"uc-link-custom"},Re={MIRROR:"mirror",EXPAND_ONLY:"expand_only",COLLAPSE_ONLY:"collapse_only",INVERSE:"inverse",CUSTOM:"custom"},oi=class{constructor(){this._groups=new Map,this._masters=new Map,this._slaves=new Map,this._listeners=new Map}register(e,t,i={}){let{role:r="slave",syncMode:s=Re.MIRROR}=i;this._groups.has(e)||(this._groups.set(e,new Set),this._slaves.set(e,new Set)),this._groups.get(e).add(t),r==="master"?(this._masters.set(e,t),this._setupMasterListeners(e,t)):(this._slaves.get(e).add(t),this._setupSlaveListeners(e,t,s)),t._ucLinkData={groupId:e,role:r,syncMode:s}}unregister(e,t){let i=this._groups.get(e);i&&(i.delete(t),i.size===0&&(this._groups.delete(e),this._masters.delete(e),this._slaves.delete(e))),this._removeListeners(t),delete t._ucLinkData}_setupMasterListeners(e,t){let i=new Map,r=l=>{this._broadcastToSlaves(e,F.STATE_CHANGE,l.detail)},s=()=>{this._broadcastToSlaves(e,F.EXPAND,{})},o=()=>{this._broadcastToSlaves(e,F.COLLAPSE,{})},a=l=>{this._broadcastToSlaves(e,F.TOGGLE,l.detail)},c=l=>{this._broadcastToSlaves(e,F.TAB_CHANGE,l.detail)};t.addEventListener("uc-state-changed",r),t.addEventListener("uc-expanded",s),t.addEventListener("uc-collapsed",o),t.addEventListener("uc-toggled",a),t.addEventListener("uc-tab-changed",c),i.set("uc-state-changed",r),i.set("uc-expanded",s),i.set("uc-collapsed",o),i.set("uc-toggled",a),i.set("uc-tab-changed",c),this._listeners.set(t,i)}_setupSlaveListeners(e,t,i){let r=new Map,s=o=>{let{type:a,detail:c}=o;o.target!==t&&this._applySyncAction(t,a,c,i)};for(let o of Object.values(F)){let a=c=>{var l;((l=c.detail)==null?void 0:l.groupId)===e&&s({type:o,detail:c.detail})};window.addEventListener(o,a),r.set(o,a)}this._listeners.set(t,r)}_removeListeners(e){let t=this._listeners.get(e);if(!t)return;let i=e._ucLinkData;if((i==null?void 0:i.role)==="master")for(let[r,s]of t)e.removeEventListener(r,s);else for(let[r,s]of t)window.removeEventListener(r,s);this._listeners.delete(e)}_broadcastToSlaves(e,t,i){m(window,t,H(d({},i),{groupId:e}))}_applySyncAction(e,t,i,r){var s,o,a,c,l;if(!(r===Re.EXPAND_ONLY&&t!==F.EXPAND)&&!(r===Re.COLLAPSE_ONLY&&t!==F.COLLAPSE))switch(t){case F.EXPAND:r===Re.INVERSE?(s=e._collapse)==null||s.call(e):(o=e._expand)==null||o.call(e);break;case F.COLLAPSE:r===Re.INVERSE?(a=e._expand)==null||a.call(e):(c=e._collapse)==null||c.call(e);break;case F.TOGGLE:(l=e._toggle)==null||l.call(e);break;case F.TAB_CHANGE:e._setActiveTab&&i.tabIndex!==void 0&&e._setActiveTab(i.tabIndex);break;case F.STATE_CHANGE:e._handleLinkedStateChange&&e._handleLinkedStateChange(i);break}}getGroup(e){return this._groups.get(e)||new Set}getMaster(e){return this._masters.get(e)}getSlaves(e){return this._slaves.get(e)||new Set}hasGroup(e){return this._groups.has(e)}sendToGroup(e,t,i={}){m(window,F.CUSTOM,{groupId:e,eventName:t,data:i})}clear(){for(let[e,t]of this._groups)for(let i of t)this.unregister(e,i)}},si=null;function dr(){return si||(si=new oi),si}var dt=class{constructor(e,t={}){this._card=e,this._config=t,this._registry=dr()}setConfig(e){this._config.group_id&&this._registry.unregister(this._config.group_id,this._card),this._config=e,e.group_id&&this._registry.register(e.group_id,this._card,{role:e.role||"slave",syncMode:e.sync_mode||Re.MIRROR})}broadcast(e,t={}){this._config.group_id&&this._config.role==="master"&&m(this._card,e,t)}sendCustomEvent(e,t={}){this._config.group_id&&this._registry.sendToGroup(this._config.group_id,e,t)}isMaster(){return this._config.role==="master"}getGroupInfo(){let e=this._config.group_id;return e?{id:e,totalCards:this._registry.getGroup(e).size,hasMaster:!!this._registry.getMaster(e),slavesCount:this._registry.getSlaves(e).size}:null}destroy(){this._config.group_id&&this._registry.unregister(this._config.group_id,this._card)}};var re={DOMAIN:"domain",AREA:"area",DEVICE_CLASS:"device_class",DEVICE:"device",FLOOR:"floor",LABEL:"label",STATE:"state",CUSTOM:"custom"},Fe={ALPHABETICAL:"alphabetical",COUNT_DESC:"count_desc",COUNT_ASC:"count_asc",PRIORITY:"priority",CUSTOM:"custom"},ur={automation:"mdi:robot",binary_sensor:"mdi:checkbox-marked-circle",button:"mdi:gesture-tap-button",calendar:"mdi:calendar",camera:"mdi:video",climate:"mdi:thermostat",cover:"mdi:window-shutter",device_tracker:"mdi:account",fan:"mdi:fan",group:"mdi:google-circles-communities",input_boolean:"mdi:toggle-switch",input_number:"mdi:ray-vertex",input_select:"mdi:format-list-bulleted",input_text:"mdi:form-textbox",light:"mdi:lightbulb",lock:"mdi:lock",media_player:"mdi:cast",number:"mdi:ray-vertex",person:"mdi:account",scene:"mdi:palette",script:"mdi:script-text",select:"mdi:format-list-bulleted",sensor:"mdi:eye",sun:"mdi:white-balance-sunny",switch:"mdi:flash",timer:"mdi:timer",update:"mdi:package-up",vacuum:"mdi:robot-vacuum",weather:"mdi:weather-cloudy",zone:"mdi:map-marker"},hr={automation:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0437\u0430\u0446\u0438\u0438",binary_sensor:"\u0411\u0438\u043D\u0430\u0440\u043D\u044B\u0435 \u0441\u0435\u043D\u0441\u043E\u0440\u044B",button:"\u041A\u043D\u043E\u043F\u043A\u0438",calendar:"\u041A\u0430\u043B\u0435\u043D\u0434\u0430\u0440\u0438",camera:"\u041A\u0430\u043C\u0435\u0440\u044B",climate:"\u041A\u043B\u0438\u043C\u0430\u0442",cover:"\u0428\u0442\u043E\u0440\u044B/\u0416\u0430\u043B\u044E\u0437\u0438",device_tracker:"\u0422\u0440\u0435\u043A\u0435\u0440\u044B",fan:"\u0412\u0435\u043D\u0442\u0438\u043B\u044F\u0442\u043E\u0440\u044B",group:"\u0413\u0440\u0443\u043F\u043F\u044B",input_boolean:"\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u0438",input_number:"\u0427\u0438\u0441\u043B\u0430",input_select:"\u0421\u043F\u0438\u0441\u043A\u0438 \u0432\u044B\u0431\u043E\u0440\u0430",input_text:"\u0422\u0435\u043A\u0441\u0442\u043E\u0432\u044B\u0435 \u043F\u043E\u043B\u044F",light:"\u041E\u0441\u0432\u0435\u0449\u0435\u043D\u0438\u0435",lock:"\u0417\u0430\u043C\u043A\u0438",media_player:"\u041C\u0435\u0434\u0438\u0430\u043F\u043B\u0435\u0435\u0440\u044B",number:"\u0427\u0438\u0441\u043B\u0430",person:"\u041B\u044E\u0434\u0438",scene:"\u0421\u0446\u0435\u043D\u044B",script:"\u0421\u043A\u0440\u0438\u043F\u0442\u044B",select:"\u0421\u043F\u0438\u0441\u043A\u0438 \u0432\u044B\u0431\u043E\u0440\u0430",sensor:"\u0421\u0435\u043D\u0441\u043E\u0440\u044B",sun:"\u0421\u043E\u043B\u043D\u0446\u0435",switch:"\u0412\u044B\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u0438",timer:"\u0422\u0430\u0439\u043C\u0435\u0440\u044B",update:"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F",vacuum:"\u041F\u044B\u043B\u0435\u0441\u043E\u0441\u044B",weather:"\u041F\u043E\u0433\u043E\u0434\u0430",zone:"\u0417\u043E\u043D\u044B"},zi={strategy:re.DOMAIN,sort:Fe.ALPHABETICAL,collapsed_by_default:!1,show_empty_groups:!1,show_counts:!0,max_items_per_group:0,exclude_domains:[],exclude_entities:[],include_entities:[],priority_order:[],custom_groups:{}},ut=class{constructor(e,t={}){this._hass=e,this._config=d(d({},zi),t),this._cache=null,this._cacheTimestamp=0}set hass(e){this._hass=e,this._invalidateCache()}setConfig(e){this._config=d(d({},zi),e),this._invalidateCache()}getGroups(e=null){if(this._cache&&Date.now()-this._cacheTimestamp<1e3)return this._cache;let t=this._getFilteredEntities(e),i;switch(this._config.strategy){case re.DOMAIN:i=this._groupByDomain(t);break;case re.AREA:i=this._groupByArea(t);break;case re.DEVICE_CLASS:i=this._groupByDeviceClass(t);break;case re.DEVICE:i=this._groupByDevice(t);break;case re.FLOOR:i=this._groupByFloor(t);break;case re.LABEL:i=this._groupByLabel(t);break;case re.STATE:i=this._groupByState(t);break;case re.CUSTOM:i=this._groupByCustomRules(t);break;default:i=this._groupByDomain(t)}return i=this._sortGroups(i),this._config.max_items_per_group>0&&(i=i.map(r=>H(d({},r),{entities:r.entities.slice(0,this._config.max_items_per_group),hasMore:r.entities.length>this._config.max_items_per_group}))),this._cache=i,this._cacheTimestamp=Date.now(),i}_getFilteredEntities(e){var r,s;let t=((r=this._hass)==null?void 0:r.states)||{},i;return e?i=e.filter(o=>t[o]).map(o=>d({entity_id:o},t[o])):((s=this._config.include_entities)==null?void 0:s.length)>0?i=this._config.include_entities.filter(o=>t[o]).map(o=>d({entity_id:o},t[o])):i=Object.entries(t).map(([o,a])=>d({entity_id:o},a)),i.filter(o=>{let a=o.entity_id.split(".")[0];return!(this._config.exclude_domains.includes(a)||this._config.exclude_entities.includes(o.entity_id))})}_groupByDomain(e){let t=new Map;for(let i of e){let r=i.entity_id.split(".")[0];t.has(r)||t.set(r,{id:r,name:hr[r]||this._capitalize(r),icon:ur[r]||"mdi:bookmark",entities:[],collapsed:this._config.collapsed_by_default}),t.get(r).entities.push(i)}return Array.from(t.values()).filter(i=>this._config.show_empty_groups||i.entities.length>0)}_groupByArea(e){var o,a,c;let t=new Map,i=((o=this._hass)==null?void 0:o.areas)||{},r=((a=this._hass)==null?void 0:a.entities)||{},s=((c=this._hass)==null?void 0:c.devices)||{};t.set("_no_area",{id:"_no_area",name:"\u0411\u0435\u0437 \u043E\u0431\u043B\u0430\u0441\u0442\u0438",icon:"mdi:help-circle-outline",entities:[],collapsed:this._config.collapsed_by_default});for(let l of e){let u=null,h=r[l.entity_id];if(h!=null&&h.area_id)u=h.area_id;else if(h!=null&&h.device_id){let f=s[h.device_id];f!=null&&f.area_id&&(u=f.area_id)}u&&i[u]?(t.has(u)||t.set(u,{id:u,name:i[u].name,icon:i[u].icon||"mdi:home-floor-0",entities:[],collapsed:this._config.collapsed_by_default}),t.get(u).entities.push(l)):t.get("_no_area").entities.push(l)}return Array.from(t.values()).filter(l=>this._config.show_empty_groups||l.entities.length>0)}_groupByDeviceClass(e){var i;let t=new Map;for(let r of e){let s=((i=r.attributes)==null?void 0:i.device_class)||"_none";t.has(s)||t.set(s,{id:s,name:s==="_none"?"\u0411\u0435\u0437 \u043A\u043B\u0430\u0441\u0441\u0430":this._capitalize(s),icon:this._getDeviceClassIcon(s),entities:[],collapsed:this._config.collapsed_by_default}),t.get(s).entities.push(r)}return Array.from(t.values()).filter(r=>this._config.show_empty_groups||r.entities.length>0)}_groupByDevice(e){var s,o;let t=new Map,i=((s=this._hass)==null?void 0:s.entities)||{},r=((o=this._hass)==null?void 0:o.devices)||{};t.set("_no_device",{id:"_no_device",name:"\u0411\u0435\u0437 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430",icon:"mdi:help-circle-outline",entities:[],collapsed:this._config.collapsed_by_default});for(let a of e){let c=i[a.entity_id],l=c==null?void 0:c.device_id;if(l&&r[l]){let u=r[l];t.has(l)||t.set(l,{id:l,name:u.name||u.name_by_user||l,icon:"mdi:devices",manufacturer:u.manufacturer,model:u.model,entities:[],collapsed:this._config.collapsed_by_default}),t.get(l).entities.push(a)}else t.get("_no_device").entities.push(a)}return Array.from(t.values()).filter(a=>this._config.show_empty_groups||a.entities.length>0)}_groupByFloor(e){var a,c,l,u,h;let t=new Map,i=((a=this._hass)==null?void 0:a.areas)||{},r=((c=this._hass)==null?void 0:c.floors)||{},s=((l=this._hass)==null?void 0:l.entities)||{},o=((u=this._hass)==null?void 0:u.devices)||{};t.set("_no_floor",{id:"_no_floor",name:"\u0411\u0435\u0437 \u044D\u0442\u0430\u0436\u0430",icon:"mdi:help-circle-outline",entities:[],collapsed:this._config.collapsed_by_default});for(let f of e){let p=null,_=s[f.entity_id],y=_==null?void 0:_.area_id;if(!y&&(_!=null&&_.device_id)){let v=o[_.device_id];y=v==null?void 0:v.area_id}y&&((h=i[y])!=null&&h.floor_id)&&(p=i[y].floor_id),p&&r[p]?(t.has(p)||t.set(p,{id:p,name:r[p].name,icon:r[p].icon||"mdi:home-floor-0",level:r[p].level,entities:[],collapsed:this._config.collapsed_by_default}),t.get(p).entities.push(f)):t.get("_no_floor").entities.push(f)}return Array.from(t.values()).filter(f=>this._config.show_empty_groups||f.entities.length>0)}_groupByLabel(e){var s,o;let t=new Map,i=((s=this._hass)==null?void 0:s.labels)||{},r=((o=this._hass)==null?void 0:o.entities)||{};t.set("_no_label",{id:"_no_label",name:"\u0411\u0435\u0437 \u043C\u0435\u0442\u043A\u0438",icon:"mdi:label-off-outline",entities:[],collapsed:this._config.collapsed_by_default});for(let a of e){let c=r[a.entity_id],l=(c==null?void 0:c.labels)||[];if(l.length===0)t.get("_no_label").entities.push(a);else for(let u of l){if(!t.has(u)){let h=i[u]||{name:u};t.set(u,{id:u,name:h.name,icon:h.icon||"mdi:label",color:h.color,entities:[],collapsed:this._config.collapsed_by_default})}t.get(u).entities.push(a)}}return Array.from(t.values()).filter(a=>this._config.show_empty_groups||a.entities.length>0)}_groupByState(e){let t=new Map;for(let i of e){let r=i.state;t.has(r)||t.set(r,{id:r,name:this._getStateName(r),icon:this._getStateIcon(r),entities:[],collapsed:this._config.collapsed_by_default}),t.get(r).entities.push(i)}return Array.from(t.values()).filter(i=>this._config.show_empty_groups||i.entities.length>0)}_groupByCustomRules(e){var r;let t=new Map,i=this._config.custom_groups||{};for(let[s,o]of Object.entries(i))t.set(s,{id:s,name:o.name||s,icon:o.icon||"mdi:folder",entities:[],collapsed:(r=o.collapsed)!=null?r:this._config.collapsed_by_default});t.set("_other",{id:"_other",name:"\u041F\u0440\u043E\u0447\u0435\u0435",icon:"mdi:dots-horizontal",entities:[],collapsed:this._config.collapsed_by_default});for(let s of e){let o=!1;for(let[a,c]of Object.entries(i))if(this._matchesGroupRules(s,c)){t.get(a).entities.push(s),o=!0;break}o||t.get("_other").entities.push(s)}return Array.from(t.values()).filter(s=>this._config.show_empty_groups||s.entities.length>0)}_matchesGroupRules(e,t){var r;let i=t.rules||{};if(i.entity_id&&!new RegExp(i.entity_id.replace(/\*/g,".*")).test(e.entity_id))return!1;if(i.domain){let s=e.entity_id.split(".")[0];if(!(Array.isArray(i.domain)?i.domain:[i.domain]).includes(s))return!1}if(i.state&&!(Array.isArray(i.state)?i.state:[i.state]).includes(e.state))return!1;if(i.attribute){let{name:s,value:o,above:a,below:c}=i.attribute,l=(r=e.attributes)==null?void 0:r[s];if(o!==void 0&&l!==o||a!==void 0&&parseFloat(l)<=a||c!==void 0&&parseFloat(l)>=c)return!1}return!0}_sortGroups(e){switch(this._config.sort){case Fe.ALPHABETICAL:return e.sort((i,r)=>i.name.localeCompare(r.name));case Fe.COUNT_DESC:return e.sort((i,r)=>r.entities.length-i.entities.length);case Fe.COUNT_ASC:return e.sort((i,r)=>i.entities.length-r.entities.length);case Fe.PRIORITY:let t=this._config.priority_order||[];return e.sort((i,r)=>{let s=t.indexOf(i.id),o=t.indexOf(r.id);return s===-1&&o===-1?0:s===-1?1:o===-1?-1:s-o});default:return e}}_invalidateCache(){this._cache=null,this._cacheTimestamp=0}_capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")}_getDeviceClassIcon(e){return{battery:"mdi:battery",carbon_dioxide:"mdi:molecule-co2",carbon_monoxide:"mdi:molecule-co",connectivity:"mdi:connection",current:"mdi:current-ac",door:"mdi:door",energy:"mdi:lightning-bolt",gas:"mdi:gas-cylinder",humidity:"mdi:water-percent",illuminance:"mdi:brightness-5",moisture:"mdi:water",motion:"mdi:motion-sensor",occupancy:"mdi:home-account",power:"mdi:flash",power_factor:"mdi:angle-acute",pressure:"mdi:gauge",problem:"mdi:alert-circle",safety:"mdi:shield-check",smoke:"mdi:smoke-detector",sound:"mdi:volume-high",temperature:"mdi:thermometer",timestamp:"mdi:clock",voltage:"mdi:sine-wave",window:"mdi:window-closed"}[e]||"mdi:bookmark"}_getStateName(e){return{on:"\u0412\u043A\u043B\u044E\u0447\u0435\u043D\u043E",off:"\u0412\u044B\u043A\u043B\u044E\u0447\u0435\u043D\u043E",home:"\u0414\u043E\u043C\u0430",not_home:"\u041D\u0435 \u0434\u043E\u043C\u0430",open:"\u041E\u0442\u043A\u0440\u044B\u0442\u043E",closed:"\u0417\u0430\u043A\u0440\u044B\u0442\u043E",locked:"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043E",unlocked:"\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043E",playing:"\u0412\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435",paused:"\u041F\u0430\u0443\u0437\u0430",idle:"\u041E\u0436\u0438\u0434\u0430\u043D\u0438\u0435",unavailable:"\u041D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E",unknown:"\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E"}[e]||this._capitalize(e)}_getStateIcon(e){return{on:"mdi:check-circle",off:"mdi:close-circle",home:"mdi:home",not_home:"mdi:home-export-outline",open:"mdi:door-open",closed:"mdi:door-closed",locked:"mdi:lock",unlocked:"mdi:lock-open",playing:"mdi:play",paused:"mdi:pause",idle:"mdi:sleep",unavailable:"mdi:alert",unknown:"mdi:help-circle"}[e]||"mdi:circle"}};var w={NONE:"none",REDUCED:"reduced",COMPACT:"compact",MINIMAL:"minimal",ICON_ONLY:"icon_only"},fe={MANUAL:"manual",SCREEN_WIDTH:"screen_width",CONTAINER_WIDTH:"container_width",CARD_COUNT:"card_count",AUTO:"auto"},pr={enabled:!0,level:w.NONE,trigger:fe.AUTO,breakpoints:{[w.REDUCED]:768,[w.COMPACT]:480,[w.MINIMAL]:320,[w.ICON_ONLY]:200},containerBreakpoints:{[w.REDUCED]:400,[w.COMPACT]:300,[w.MINIMAL]:200,[w.ICON_ONLY]:120},levelSettings:{[w.NONE]:{padding:"16px",gap:"12px",fontSize:"14px",iconSize:"24px",showTitle:!0,showSubtitle:!0,showBadges:!0,showFooter:!0,gridColumns:null},[w.REDUCED]:{padding:"12px",gap:"8px",fontSize:"13px",iconSize:"22px",showTitle:!0,showSubtitle:!0,showBadges:!0,showFooter:!0,gridColumns:null},[w.COMPACT]:{padding:"8px",gap:"6px",fontSize:"12px",iconSize:"20px",showTitle:!0,showSubtitle:!1,showBadges:!0,showFooter:!1,gridColumns:1},[w.MINIMAL]:{padding:"6px",gap:"4px",fontSize:"11px",iconSize:"18px",showTitle:!0,showSubtitle:!1,showBadges:!1,showFooter:!1,gridColumns:1},[w.ICON_ONLY]:{padding:"4px",gap:"2px",fontSize:"10px",iconSize:"16px",showTitle:!1,showSubtitle:!1,showBadges:!1,showFooter:!1,gridColumns:1}}},ht=class{constructor(e,t={}){this._element=e,this._config=this._mergeConfig(pr,t),this._currentLevel=w.NONE,this._resizeObserver=null,this._mediaQueryListeners=[],this._callbacks=new Set,this._init()}_mergeConfig(e,t){let i=d({},e);for(let r of Object.keys(t))t[r]&&typeof t[r]=="object"&&!Array.isArray(t[r])?i[r]=this._mergeConfig(e[r]||{},t[r]):i[r]=t[r];return i}_init(){if(this._config.enabled){switch(this._config.trigger){case fe.SCREEN_WIDTH:case fe.AUTO:this._setupMediaQueries();break;case fe.CONTAINER_WIDTH:this._setupResizeObserver();break;case fe.MANUAL:this.setLevel(this._config.level);break}this._config.trigger===fe.AUTO&&this._setupResizeObserver()}}_setupMediaQueries(){let e=this._config.breakpoints,t=Object.entries(e).sort(([,i],[,r])=>i-r);for(let[i,r]of t){let s=window.matchMedia("(max-width: ".concat(r,"px)")),o=a=>{this._evaluateLevel()};s.addEventListener("change",o),this._mediaQueryListeners.push({mql:s,handler:o})}this._evaluateLevel()}_setupResizeObserver(){window.ResizeObserver&&(this._resizeObserver=new ResizeObserver(e=>{for(let t of e)this._handleResize(t.contentRect.width)}),this._resizeObserver.observe(this._element))}_handleResize(e){if(this._config.trigger!==fe.CONTAINER_WIDTH&&this._config.trigger!==fe.AUTO)return;let t=this._config.containerBreakpoints,i=w.NONE;for(let[r,s]of Object.entries(t))e<=s&&(i=r);this.setLevel(i)}_evaluateLevel(){let e=this._config.breakpoints,t=window.innerWidth,i=w.NONE;for(let[r,s]of Object.entries(e))t<=s&&(i=r);this.setLevel(i)}setLevel(e){if(!Object.values(w).includes(e)){console.warn("[CompactMode] Unknown level: ".concat(e));return}if(e===this._currentLevel)return;let t=this._currentLevel;this._currentLevel=e,this._applyLevel(e),this._notifyCallbacks(e,t)}getLevel(){return this._currentLevel}getCurrentSettings(){return this._config.levelSettings[this._currentLevel]||{}}_applyLevel(e){for(let i of Object.values(w))this._element.classList.remove("uc-compact-".concat(i));this._element.classList.add("uc-compact-".concat(e));let t=this._config.levelSettings[e];t&&(this._element.style.setProperty("--uc-compact-padding",t.padding),this._element.style.setProperty("--uc-compact-gap",t.gap),this._element.style.setProperty("--uc-compact-font-size",t.fontSize),this._element.style.setProperty("--uc-compact-icon-size",t.iconSize)),this._element.dataset.compactLevel=e}toggleNext(){let e=Object.values(w),i=(e.indexOf(this._currentLevel)+1)%e.length;this.setLevel(e[i])}togglePrevious(){let e=Object.values(w),i=(e.indexOf(this._currentLevel)-1+e.length)%e.length;this.setLevel(e[i])}reset(){this.setLevel(w.NONE)}isCompact(){return this._currentLevel!==w.NONE}shouldShow(e){let t=this.getCurrentSettings(),i="show".concat(e.charAt(0).toUpperCase()+e.slice(1));return t[i]!==!1}getGridColumns(e=2){var i;return(i=this.getCurrentSettings().gridColumns)!=null?i:e}subscribe(e){return this._callbacks.add(e),()=>this._callbacks.delete(e)}_notifyCallbacks(e,t){for(let i of this._callbacks)try{i(e,t)}catch(r){console.error("[CompactMode] Callback error:",r)}}destroy(){for(let{mql:e,handler:t}of this._mediaQueryListeners)e.removeEventListener("change",t);this._mediaQueryListeners=[],this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),this._callbacks.clear();for(let e of Object.values(w))this._element.classList.remove("uc-compact-".concat(e));this._element.style.removeProperty("--uc-compact-padding"),this._element.style.removeProperty("--uc-compact-gap"),this._element.style.removeProperty("--uc-compact-font-size"),this._element.style.removeProperty("--uc-compact-icon-size"),delete this._element.dataset.compactLevel}static getStyles(){return'\n      /* \u0411\u0430\u0437\u043E\u0432\u044B\u0435 CSS \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435 */\n      :host {\n        --uc-compact-padding: 16px;\n        --uc-compact-gap: 12px;\n        --uc-compact-font-size: 14px;\n        --uc-compact-icon-size: 24px;\n      }\n\n      /* REDUCED - \u0423\u043C\u0435\u043D\u044C\u0448\u0435\u043D\u043D\u044B\u0435 \u043E\u0442\u0441\u0442\u0443\u043F\u044B */\n      :host(.uc-compact-reduced),\n      .uc-compact-reduced {\n        --uc-compact-padding: 12px;\n        --uc-compact-gap: 8px;\n        --uc-compact-font-size: 13px;\n        --uc-compact-icon-size: 22px;\n      }\n\n      /* COMPACT - \u041A\u043E\u043C\u043F\u0430\u043A\u0442\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C */\n      :host(.uc-compact-compact),\n      .uc-compact-compact {\n        --uc-compact-padding: 8px;\n        --uc-compact-gap: 6px;\n        --uc-compact-font-size: 12px;\n        --uc-compact-icon-size: 20px;\n      }\n\n      :host(.uc-compact-compact) .uc-subtitle,\n      .uc-compact-compact .uc-subtitle {\n        display: none;\n      }\n\n      :host(.uc-compact-compact) .uc-footer,\n      .uc-compact-compact .uc-footer {\n        display: none;\n      }\n\n      /* MINIMAL - \u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C */\n      :host(.uc-compact-minimal),\n      .uc-compact-minimal {\n        --uc-compact-padding: 6px;\n        --uc-compact-gap: 4px;\n        --uc-compact-font-size: 11px;\n        --uc-compact-icon-size: 18px;\n      }\n\n      :host(.uc-compact-minimal) .uc-subtitle,\n      :host(.uc-compact-minimal) .uc-badges,\n      :host(.uc-compact-minimal) .uc-footer,\n      .uc-compact-minimal .uc-subtitle,\n      .uc-compact-minimal .uc-badges,\n      .uc-compact-minimal .uc-footer {\n        display: none;\n      }\n\n      /* ICON_ONLY - \u0422\u043E\u043B\u044C\u043A\u043E \u0438\u043A\u043E\u043D\u043A\u0438 */\n      :host(.uc-compact-icon_only),\n      .uc-compact-icon_only {\n        --uc-compact-padding: 4px;\n        --uc-compact-gap: 2px;\n        --uc-compact-font-size: 10px;\n        --uc-compact-icon-size: 16px;\n      }\n\n      :host(.uc-compact-icon_only) .uc-title,\n      :host(.uc-compact-icon_only) .uc-subtitle,\n      :host(.uc-compact-icon_only) .uc-badges,\n      :host(.uc-compact-icon_only) .uc-footer,\n      :host(.uc-compact-icon_only) .uc-action-name,\n      .uc-compact-icon_only .uc-title,\n      .uc-compact-icon_only .uc-subtitle,\n      .uc-compact-icon_only .uc-badges,\n      .uc-compact-icon_only .uc-footer,\n      .uc-compact-icon_only .uc-action-name {\n        display: none;\n      }\n\n      /* \u041F\u0440\u0438\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0445 */\n      .uc-header,\n      .uc-body,\n      .uc-footer {\n        padding: var(--uc-compact-padding);\n        gap: var(--uc-compact-gap);\n      }\n\n      .uc-title,\n      .uc-subtitle,\n      .uc-content {\n        font-size: var(--uc-compact-font-size);\n      }\n\n      .uc-header ha-icon,\n      .uc-body ha-icon {\n        --mdc-icon-size: var(--uc-compact-icon-size);\n      }\n\n      /* \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u043E\u0432 */\n      :host,\n      .uc-header,\n      .uc-body,\n      .uc-footer,\n      .uc-title,\n      .uc-subtitle {\n        transition: \n          padding 0.2s ease,\n          gap 0.2s ease,\n          font-size 0.2s ease;\n      }\n\n      /* Grid \u0430\u0434\u0430\u043F\u0442\u0430\u0446\u0438\u044F */\n      :host([data-compact-level="compact"]) .uc-body-grid,\n      :host([data-compact-level="minimal"]) .uc-body-grid,\n      :host([data-compact-level="icon_only"]) .uc-body-grid,\n      [data-compact-level="compact"] .uc-body-grid,\n      [data-compact-level="minimal"] .uc-body-grid,\n      [data-compact-level="icon_only"] .uc-body-grid {\n        grid-template-columns: 1fr !important;\n      }\n\n      /* \u041A\u043E\u043C\u043F\u0430\u043A\u0442\u043D\u044B\u0435 \u043A\u043D\u043E\u043F\u043A\u0438 */\n      :host(.uc-compact-compact) .uc-quick-action,\n      :host(.uc-compact-minimal) .uc-quick-action,\n      :host(.uc-compact-icon_only) .uc-quick-action,\n      .uc-compact-compact .uc-quick-action,\n      .uc-compact-minimal .uc-quick-action,\n      .uc-compact-icon_only .uc-quick-action {\n        padding: 4px 8px;\n        min-width: 28px;\n        min-height: 28px;\n      }\n\n      /* \u041A\u043E\u043C\u043F\u0430\u043A\u0442\u043D\u044B\u0439 header */\n      :host(.uc-compact-minimal) .uc-header,\n      :host(.uc-compact-icon_only) .uc-header,\n      .uc-compact-minimal .uc-header,\n      .uc-compact-icon_only .uc-header {\n        min-height: auto;\n      }\n\n      /* \u0421\u043A\u0440\u044B\u0442\u0438\u0435 \u0441\u0442\u0440\u0435\u043B\u043A\u0438 \u0432 \u043C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u0445 \u0440\u0435\u0436\u0438\u043C\u0430\u0445 */\n      :host(.uc-compact-icon_only) .uc-expand-icon,\n      .uc-compact-icon_only .uc-expand-icon {\n        display: none;\n      }\n    '}};var pt={DEFAULT:{name:"Default",blur:10,opacity:.7,saturation:180,borderOpacity:.2,borderWidth:1,shadowOpacity:.1},CLEAR:{name:"Clear",blur:20,opacity:.9,saturation:100,borderOpacity:.1,borderWidth:1,shadowOpacity:.05},FROSTED:{name:"Frosted",blur:25,opacity:.6,saturation:150,borderOpacity:.3,borderWidth:1,shadowOpacity:.15},TINTED:{name:"Tinted",blur:15,opacity:.5,saturation:200,borderOpacity:.2,borderWidth:1,shadowOpacity:.12,tint:"var(--primary-color)"},DENSE:{name:"Dense",blur:8,opacity:.85,saturation:120,borderOpacity:.4,borderWidth:2,shadowOpacity:.2},NEON:{name:"Neon",blur:12,opacity:.6,saturation:250,borderOpacity:.5,borderWidth:1,shadowOpacity:.15,glowColor:"var(--primary-color)",glowIntensity:10},MINIMAL:{name:"Minimal",blur:5,opacity:.95,saturation:100,borderOpacity:.05,borderWidth:0,shadowOpacity:.05}},ai={LIGHT:{background:"rgba(255, 255, 255, {opacity})",border:"rgba(255, 255, 255, {borderOpacity})",shadow:"rgba(0, 0, 0, {shadowOpacity})"},DARK:{background:"rgba(0, 0, 0, {opacity})",border:"rgba(255, 255, 255, {borderOpacity})",shadow:"rgba(0, 0, 0, {shadowOpacity})"},PRIMARY:{background:"rgba(var(--rgb-primary-color), {opacity})",border:"rgba(var(--rgb-primary-color), {borderOpacity})",shadow:"rgba(var(--rgb-primary-color), {shadowOpacity})"},ACCENT:{background:"rgba(var(--rgb-accent-color), {opacity})",border:"rgba(var(--rgb-accent-color), {borderOpacity})",shadow:"rgba(var(--rgb-accent-color), {shadowOpacity})"}},mt=class{constructor(e={}){this._config=d({preset:"DEFAULT",colorScheme:"LIGHT",customSettings:{}},e)}setPreset(e){pt[e]&&(this._config.preset=e)}setColorScheme(e){ai[e]&&(this._config.colorScheme=e)}getSettings(){let e=pt[this._config.preset]||pt.DEFAULT;return d(d({},e),this._config.customSettings)}generateStyles(e={}){let t=d(d({},this.getSettings()),e),i=ai[this._config.colorScheme]||ai.LIGHT,r=i.background.replace("{opacity}",t.opacity),s=i.border.replace("{borderOpacity}",t.borderOpacity),o=i.shadow.replace("{shadowOpacity}",t.shadowOpacity),a={background:r,backdropFilter:"blur(".concat(t.blur,"px) saturate(").concat(t.saturation,"%)"),WebkitBackdropFilter:"blur(".concat(t.blur,"px) saturate(").concat(t.saturation,"%)"),border:t.borderWidth>0?"".concat(t.borderWidth,"px solid ").concat(s):"none",boxShadow:"0 8px 32px ".concat(o)};return t.tint&&(a.background="linear-gradient(135deg, ".concat(t.tint,"20, ").concat(r,")")),t.glowColor&&t.glowIntensity&&(a.boxShadow="\n        0 8px 32px ".concat(o,",\n        0 0 ").concat(t.glowIntensity,"px ").concat(t.glowColor,"40,\n        inset 0 0 ").concat(t.glowIntensity/2,"px ").concat(t.glowColor,"20\n      ")),a}apply(e,t={}){let i=this.generateStyles(t);for(let[r,s]of Object.entries(i))e.style[r]=s;e.classList.add("uc-glass")}remove(e){let t=["background","backdropFilter","webkitBackdropFilter","border","boxShadow"];for(let i of t)e.style[i]="";e.classList.remove("uc-glass")}generateCSS(e="glass",t={}){let i=this.generateStyles(t);return"\n      .".concat(e," {\n        background: ").concat(i.background,";\n        backdrop-filter: ").concat(i.backdropFilter,";\n        -webkit-backdrop-filter: ").concat(i.WebkitBackdropFilter,";\n        border: ").concat(i.border,";\n        box-shadow: ").concat(i.boxShadow,";\n        border-radius: var(--ha-card-border-radius, 12px);\n      }\n    ")}static getStyles(){let e=[];e.push("\n      .uc-glass {\n        position: relative;\n        isolation: isolate;\n      }\n\n      .uc-glass::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        border-radius: inherit;\n        pointer-events: none;\n        z-index: -1;\n      }\n    ");for(let[t,i]of Object.entries(pt)){let r="uc-glass-".concat(t.toLowerCase()),s="rgba(255, 255, 255, ".concat(i.opacity,")"),o="rgba(0, 0, 0, ".concat(i.opacity,")"),a="rgba(255, 255, 255, ".concat(i.borderOpacity,")"),c="rgba(0, 0, 0, ".concat(i.shadowOpacity,")");e.push("\n        .".concat(r," {\n          background: ").concat(s,";\n          backdrop-filter: blur(").concat(i.blur,"px) saturate(").concat(i.saturation,"%);\n          -webkit-backdrop-filter: blur(").concat(i.blur,"px) saturate(").concat(i.saturation,"%);\n          border: ").concat(i.borderWidth,"px solid ").concat(a,";\n          box-shadow: 0 8px 32px ").concat(c,";\n        }\n\n        @media (prefers-color-scheme: dark) {\n          .").concat(r," {\n            background: ").concat(o,";\n          }\n        }\n      ")),i.glowColor&&e.push("\n          .".concat(r," {\n            box-shadow: \n              0 8px 32px ").concat(c,",\n              0 0 ").concat(i.glowIntensity,"px ").concat(i.glowColor,"40,\n              inset 0 0 ").concat(i.glowIntensity/2,"px ").concat(i.glowColor,"20;\n          }\n        "))}return e.push('\n      /* \u0423\u0442\u0438\u043B\u0438\u0442\u0430\u0440\u043D\u044B\u0435 \u043A\u043B\u0430\u0441\u0441\u044B \u0434\u043B\u044F \u0440\u0430\u0437\u043C\u044B\u0442\u0438\u044F */\n      .uc-blur-none { backdrop-filter: none; -webkit-backdrop-filter: none; }\n      .uc-blur-sm { backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px); }\n      .uc-blur-md { backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }\n      .uc-blur-lg { backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); }\n      .uc-blur-xl { backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px); }\n      .uc-blur-2xl { backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px); }\n\n      /* \u041D\u0430\u0441\u044B\u0449\u0435\u043D\u043D\u043E\u0441\u0442\u044C */\n      .uc-saturate-0 { backdrop-filter: saturate(0%); -webkit-backdrop-filter: saturate(0%); }\n      .uc-saturate-50 { backdrop-filter: saturate(50%); -webkit-backdrop-filter: saturate(50%); }\n      .uc-saturate-100 { backdrop-filter: saturate(100%); -webkit-backdrop-filter: saturate(100%); }\n      .uc-saturate-150 { backdrop-filter: saturate(150%); -webkit-backdrop-filter: saturate(150%); }\n      .uc-saturate-200 { backdrop-filter: saturate(200%); -webkit-backdrop-filter: saturate(200%); }\n\n      /* Fallback \u0434\u043B\u044F \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043E\u0432 \u0431\u0435\u0437 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0438 backdrop-filter */\n      @supports not (backdrop-filter: blur(10px)) {\n        .uc-glass,\n        [class*="uc-glass-"] {\n          background: var(--ha-card-background, rgba(255, 255, 255, 0.95)) !important;\n        }\n      }\n    '),e.join("\n")}};var z={FLAT:"flat",RAISED:"raised",PRESSED:"pressed",INSET:"inset",CONVEX:"convex",CONCAVE:"concave"},_e={SUBTLE:"subtle",LIGHT:"light",MEDIUM:"medium",STRONG:"strong",EXTREME:"extreme"},ni={[_e.SUBTLE]:{distance:3,blur:6,lightOpacity:.5,shadowOpacity:.1},[_e.LIGHT]:{distance:5,blur:10,lightOpacity:.7,shadowOpacity:.15},[_e.MEDIUM]:{distance:8,blur:16,lightOpacity:1,shadowOpacity:.2},[_e.STRONG]:{distance:12,blur:24,lightOpacity:1,shadowOpacity:.3},[_e.EXTREME]:{distance:20,blur:40,lightOpacity:1,shadowOpacity:.4}},ft={LIGHT:{background:"#e0e5ec",lightShadow:"#ffffff",darkShadow:"#a3b1c6",text:"#333333",accent:"#6d5dfc"},DARK:{background:"#2d2d2d",lightShadow:"#3d3d3d",darkShadow:"#1d1d1d",text:"#e0e0e0",accent:"#6d5dfc"},BLUE:{background:"#d6e4f0",lightShadow:"#ffffff",darkShadow:"#a3b8cc",text:"#2c3e50",accent:"#3498db"},GREEN:{background:"#d4e6d4",lightShadow:"#ffffff",darkShadow:"#a3c4a3",text:"#2d4a2d",accent:"#27ae60"},PINK:{background:"#f0d6e4",lightShadow:"#ffffff",darkShadow:"#c4a3b4",text:"#4a2d3d",accent:"#e91e63"},CUSTOM:{background:"var(--neu-background, #e0e5ec)",lightShadow:"var(--neu-light-shadow, #ffffff)",darkShadow:"var(--neu-dark-shadow, #a3b1c6)",text:"var(--neu-text, #333333)",accent:"var(--neu-accent, #6d5dfc)"}},_t=class{constructor(e={}){this._config=d({type:z.RAISED,intensity:_e.MEDIUM,palette:"LIGHT",lightAngle:145,borderRadius:12},e)}setType(e){Object.values(z).includes(e)&&(this._config.type=e)}setIntensity(e){Object.values(_e).includes(e)&&(this._config.intensity=e)}setPalette(e){ft[e]&&(this._config.palette=e)}setLightAngle(e){this._config.lightAngle=e%360}getPalette(){return ft[this._config.palette]||ft.LIGHT}_calculateShadowOffset(){let t=this._config.lightAngle*Math.PI/180,i=ni[this._config.intensity],r=i.distance,s=Math.round(-Math.cos(t)*r),o=Math.round(-Math.sin(t)*r),a=Math.round(Math.cos(t)*r),c=Math.round(Math.sin(t)*r);return{lightX:s,lightY:o,darkX:a,darkY:c,blur:i.blur}}generateShadow(e={}){let t=d(d({},this._config),e),i=this.getPalette(),r=ni[t.intensity],s=this._calculateShadowOffset(),o=i.lightShadow,a=i.darkShadow;switch(t.type){case z.FLAT:return"none";case z.RAISED:return"\n          ".concat(s.lightX,"px ").concat(s.lightY,"px ").concat(s.blur,"px ").concat(o,",\n          ").concat(s.darkX,"px ").concat(s.darkY,"px ").concat(s.blur,"px ").concat(a,"\n        ").trim();case z.PRESSED:return"\n          inset ".concat(s.darkX,"px ").concat(s.darkY,"px ").concat(s.blur,"px ").concat(a,",\n          inset ").concat(s.lightX,"px ").concat(s.lightY,"px ").concat(s.blur,"px ").concat(o,"\n        ").trim();case z.INSET:return"\n          inset ".concat(s.lightX,"px ").concat(s.lightY,"px ").concat(s.blur/2,"px ").concat(o,",\n          inset ").concat(s.darkX,"px ").concat(s.darkY,"px ").concat(s.blur/2,"px ").concat(a,"\n        ").trim();case z.CONVEX:return"\n          ".concat(s.lightX,"px ").concat(s.lightY,"px ").concat(s.blur,"px ").concat(o,",\n          ").concat(s.darkX,"px ").concat(s.darkY,"px ").concat(s.blur,"px ").concat(a,",\n          inset ").concat(s.lightX/2,"px ").concat(s.lightY/2,"px ").concat(s.blur/4,"px ").concat(o,",\n          inset ").concat(s.darkX/2,"px ").concat(s.darkY/2,"px ").concat(s.blur/4,"px ").concat(a,"\n        ").trim();case z.CONCAVE:return"\n          ".concat(s.lightX,"px ").concat(s.lightY,"px ").concat(s.blur,"px ").concat(o,",\n          ").concat(s.darkX,"px ").concat(s.darkY,"px ").concat(s.blur,"px ").concat(a,",\n          inset ").concat(s.darkX/2,"px ").concat(s.darkY/2,"px ").concat(s.blur/4,"px ").concat(a,",\n          inset ").concat(s.lightX/2,"px ").concat(s.lightY/2,"px ").concat(s.blur/4,"px ").concat(o,"\n        ").trim();default:return"none"}}generateGradient(){let e=this.getPalette(),t=this._config.lightAngle;switch(this._config.type){case z.CONVEX:return"linear-gradient(".concat(t,"deg, \n          ").concat(this._lighten(e.background,5),", \n          ").concat(this._darken(e.background,5),")");case z.CONCAVE:return"linear-gradient(".concat(t,"deg, \n          ").concat(this._darken(e.background,5),", \n          ").concat(this._lighten(e.background,5),")");default:return null}}_lighten(e,t){if(e.startsWith("var("))return e;let i=parseInt(e.replace("#",""),16),r=Math.round(2.55*t),s=Math.min(255,(i>>16)+r),o=Math.min(255,(i>>8&255)+r),a=Math.min(255,(i&255)+r);return"#".concat((16777216+s*65536+o*256+a).toString(16).slice(1))}_darken(e,t){if(e.startsWith("var("))return e;let i=parseInt(e.replace("#",""),16),r=Math.round(2.55*t),s=Math.max(0,(i>>16)-r),o=Math.max(0,(i>>8&255)-r),a=Math.max(0,(i&255)-r);return"#".concat((16777216+s*65536+o*256+a).toString(16).slice(1))}generateStyles(e={}){let t=this.getPalette(),i=this.generateShadow(e),r=this.generateGradient(),s={backgroundColor:t.background,boxShadow:i,borderRadius:"".concat(this._config.borderRadius,"px"),color:t.text,border:"none"};return r&&(s.background=r),s}apply(e,t={}){let i=this.generateStyles(t);for(let[r,s]of Object.entries(i))e.style[r]=s;e.classList.add("uc-neu"),e.dataset.neuType=this._config.type}remove(e){let t=["backgroundColor","background","boxShadow","borderRadius","color","border"];for(let i of t)e.style[i]="";e.classList.remove("uc-neu"),delete e.dataset.neuType}static getStyles(){let e=[];for(let[t,i]of Object.entries(ft)){let r=t.toLowerCase();e.push("\n        .uc-neu-".concat(r," {\n          --neu-background: ").concat(i.background,";\n          --neu-light-shadow: ").concat(i.lightShadow,";\n          --neu-dark-shadow: ").concat(i.darkShadow,";\n          --neu-text: ").concat(i.text,";\n          --neu-accent: ").concat(i.accent,";\n          background: var(--neu-background);\n          color: var(--neu-text);\n        }\n      "));for(let[s,o]of Object.entries(z)){let a=s.toLowerCase(),c=ni[_e.MEDIUM],l;switch(o){case z.FLAT:l="none";break;case z.RAISED:l="-".concat(c.distance,"px -").concat(c.distance,"px ").concat(c.blur,"px var(--neu-light-shadow), ").concat(c.distance,"px ").concat(c.distance,"px ").concat(c.blur,"px var(--neu-dark-shadow)");break;case z.PRESSED:l="inset ".concat(c.distance,"px ").concat(c.distance,"px ").concat(c.blur,"px var(--neu-dark-shadow), inset -").concat(c.distance,"px -").concat(c.distance,"px ").concat(c.blur,"px var(--neu-light-shadow)");break;case z.INSET:l="inset -".concat(c.distance/2,"px -").concat(c.distance/2,"px ").concat(c.blur/2,"px var(--neu-light-shadow), inset ").concat(c.distance/2,"px ").concat(c.distance/2,"px ").concat(c.blur/2,"px var(--neu-dark-shadow)");break;default:l="none"}e.push("\n          .uc-neu-".concat(r,".uc-neu-").concat(a," {\n            box-shadow: ").concat(l,";\n          }\n        "))}}return e.push("\n      /* Hover \u044D\u0444\u0444\u0435\u043A\u0442 - \u043F\u0435\u0440\u0435\u0445\u043E\u0434 \u043A pressed */\n      .uc-neu-interactive:hover {\n        box-shadow: inset 4px 4px 8px var(--neu-dark-shadow),\n                    inset -4px -4px 8px var(--neu-light-shadow);\n      }\n\n      /* Active \u044D\u0444\u0444\u0435\u043A\u0442 - \u0433\u043B\u0443\u0431\u0436\u0435 pressed */\n      .uc-neu-interactive:active {\n        box-shadow: inset 6px 6px 12px var(--neu-dark-shadow),\n                    inset -6px -6px 12px var(--neu-light-shadow);\n      }\n\n      /* Transition \u0434\u043B\u044F \u043F\u043B\u0430\u0432\u043D\u043E\u0441\u0442\u0438 */\n      .uc-neu {\n        transition: box-shadow 0.2s ease, background 0.2s ease;\n      }\n\n      /* \u0423\u0442\u0438\u043B\u0438\u0442\u0430\u0440\u043D\u044B\u0435 \u043A\u043B\u0430\u0441\u0441\u044B \u0438\u043D\u0442\u0435\u043D\u0441\u0438\u0432\u043D\u043E\u0441\u0442\u0438 */\n      .uc-neu-subtle { --neu-intensity: 0.5; }\n      .uc-neu-light { --neu-intensity: 0.7; }\n      .uc-neu-medium { --neu-intensity: 1; }\n      .uc-neu-strong { --neu-intensity: 1.3; }\n      .uc-neu-extreme { --neu-intensity: 1.6; }\n\n      /* \u041A\u043D\u043E\u043F\u043A\u0430 \u0432 \u0441\u0442\u0438\u043B\u0435 neumorphism */\n      .uc-neu-button {\n        padding: 12px 24px;\n        border-radius: 12px;\n        border: none;\n        cursor: pointer;\n        font-weight: 500;\n        background: var(--neu-background);\n        color: var(--neu-text);\n        box-shadow: -5px -5px 10px var(--neu-light-shadow),\n                    5px 5px 10px var(--neu-dark-shadow);\n        transition: all 0.2s ease;\n      }\n\n      .uc-neu-button:hover {\n        box-shadow: -2px -2px 5px var(--neu-light-shadow),\n                    2px 2px 5px var(--neu-dark-shadow);\n      }\n\n      .uc-neu-button:active {\n        box-shadow: inset 3px 3px 6px var(--neu-dark-shadow),\n                    inset -3px -3px 6px var(--neu-light-shadow);\n      }\n\n      /* \u0418\u043D\u043F\u0443\u0442 \u0432 \u0441\u0442\u0438\u043B\u0435 neumorphism */\n      .uc-neu-input {\n        padding: 12px 16px;\n        border-radius: 8px;\n        border: none;\n        background: var(--neu-background);\n        color: var(--neu-text);\n        box-shadow: inset 3px 3px 6px var(--neu-dark-shadow),\n                    inset -3px -3px 6px var(--neu-light-shadow);\n        outline: none;\n      }\n\n      .uc-neu-input:focus {\n        box-shadow: inset 4px 4px 8px var(--neu-dark-shadow),\n                    inset -4px -4px 8px var(--neu-light-shadow),\n                    0 0 0 2px var(--neu-accent);\n      }\n    "),e.join("\n")}};var O={GEOMETRIC:"geometric",DOTS:"dots",LINES:"lines",WAVES:"waves",NOISE:"noise",ORGANIC:"organic"},Ee={grid:{category:O.GEOMETRIC,name:"Grid",css:(n="rgba(0,0,0,0.05)",e=20)=>"\n      linear-gradient(".concat(n," 1px, transparent 1px),\n      linear-gradient(90deg, ").concat(n," 1px, transparent 1px)\n    "),size:(n=20)=>"".concat(n,"px ").concat(n,"px"),description:"\u0421\u0435\u0442\u043A\u0430"},checkerboard:{category:O.GEOMETRIC,name:"Checkerboard",css:(n="rgba(0,0,0,0.05)",e=20)=>"\n      linear-gradient(45deg, ".concat(n," 25%, transparent 25%),\n      linear-gradient(-45deg, ").concat(n," 25%, transparent 25%),\n      linear-gradient(45deg, transparent 75%, ").concat(n," 75%),\n      linear-gradient(-45deg, transparent 75%, ").concat(n," 75%)\n    "),size:(n=20)=>"".concat(n,"px ").concat(n,"px"),position:(n=20)=>"0 0, 0 ".concat(n/2,"px, ").concat(n/2,"px -").concat(n/2,"px, -").concat(n/2,"px 0px"),description:"\u0428\u0430\u0445\u043C\u0430\u0442\u043D\u0430\u044F \u0434\u043E\u0441\u043A\u0430"},triangles:{category:O.GEOMETRIC,name:"Triangles",css:(n="rgba(0,0,0,0.05)",e=40)=>"\n      linear-gradient(135deg, ".concat(n," 25%, transparent 25%) -").concat(e/2,"px 0,\n      linear-gradient(225deg, ").concat(n," 25%, transparent 25%) -").concat(e/2,"px 0,\n      linear-gradient(315deg, ").concat(n," 25%, transparent 25%),\n      linear-gradient(45deg, ").concat(n," 25%, transparent 25%)\n    "),size:(n=40)=>"".concat(n,"px ").concat(n,"px"),description:"\u0422\u0440\u0435\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A\u0438"},hexagons:{category:O.GEOMETRIC,name:"Hexagons",svg:(n="#00000010",e=30)=>'\n      <svg xmlns="http://www.w3.org/2000/svg" width="'.concat(e*2,'" height="').concat(e*1.73,'">\n        <polygon points="').concat(e,",0 ").concat(e*2,",").concat(e*.5," ").concat(e*2,",").concat(e*1.23," ").concat(e,",").concat(e*1.73," 0,").concat(e*1.23," 0,").concat(e*.5,'"\n                 fill="none" stroke="').concat(n,'" stroke-width="1"/>\n      </svg>\n    '),description:"\u0428\u0435\u0441\u0442\u0438\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A\u0438"},diamonds:{category:O.GEOMETRIC,name:"Diamonds",css:(n="rgba(0,0,0,0.05)",e=20)=>"\n      linear-gradient(135deg, ".concat(n," 25%, transparent 25%),\n      linear-gradient(225deg, ").concat(n," 25%, transparent 25%),\n      linear-gradient(45deg, ").concat(n," 25%, transparent 25%),\n      linear-gradient(315deg, ").concat(n," 25%, transparent 25%)\n    "),size:(n=20)=>"".concat(n,"px ").concat(n,"px"),position:(n=20)=>"".concat(n/2,"px 0, ").concat(n/2,"px 0, 0 0, 0 0"),description:"\u0420\u043E\u043C\u0431\u044B"},dots:{category:O.DOTS,name:"Dots",css:(n="rgba(0,0,0,0.1)",e=20)=>"\n      radial-gradient(".concat(n," 2px, transparent 2px)\n    "),size:(n=20)=>"".concat(n,"px ").concat(n,"px"),description:"\u0422\u043E\u0447\u043A\u0438"},dotsLarge:{category:O.DOTS,name:"Dots Large",css:(n="rgba(0,0,0,0.08)",e=30)=>"\n      radial-gradient(".concat(n," 4px, transparent 4px)\n    "),size:(n=30)=>"".concat(n,"px ").concat(n,"px"),description:"\u041A\u0440\u0443\u043F\u043D\u044B\u0435 \u0442\u043E\u0447\u043A\u0438"},dotsGradient:{category:O.DOTS,name:"Dots Gradient",css:(n="rgba(0,0,0,0.1)",e=20)=>"\n      radial-gradient(circle at center, ".concat(n,", transparent 50%)\n    "),size:(n=20)=>"".concat(n,"px ").concat(n,"px"),description:"\u0422\u043E\u0447\u043A\u0438 \u0441 \u0433\u0440\u0430\u0434\u0438\u0435\u043D\u0442\u043E\u043C"},horizontalLines:{category:O.LINES,name:"Horizontal Lines",css:(n="rgba(0,0,0,0.05)",e=10)=>"\n      linear-gradient(".concat(n," 1px, transparent 1px)\n    "),size:(n=10)=>"100% ".concat(n,"px"),description:"\u0413\u043E\u0440\u0438\u0437\u043E\u043D\u0442\u0430\u043B\u044C\u043D\u044B\u0435 \u043B\u0438\u043D\u0438\u0438"},verticalLines:{category:O.LINES,name:"Vertical Lines",css:(n="rgba(0,0,0,0.05)",e=10)=>"\n      linear-gradient(90deg, ".concat(n," 1px, transparent 1px)\n    "),size:(n=10)=>"".concat(n,"px 100%"),description:"\u0412\u0435\u0440\u0442\u0438\u043A\u0430\u043B\u044C\u043D\u044B\u0435 \u043B\u0438\u043D\u0438\u0438"},diagonalLines:{category:O.LINES,name:"Diagonal Lines",css:(n="rgba(0,0,0,0.05)",e=10)=>"\n      repeating-linear-gradient(\n        45deg,\n        transparent,\n        transparent ".concat(e,"px,\n        ").concat(n," ").concat(e,"px,\n        ").concat(n," ").concat(e+1,"px\n      )\n    "),size:()=>"auto",description:"\u0414\u0438\u0430\u0433\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0435 \u043B\u0438\u043D\u0438\u0438"},crosshatch:{category:O.LINES,name:"Crosshatch",css:(n="rgba(0,0,0,0.05)",e=10)=>"\n      repeating-linear-gradient(\n        45deg,\n        transparent,\n        transparent ".concat(e,"px,\n        ").concat(n," ").concat(e,"px,\n        ").concat(n," ").concat(e+1,"px\n      ),\n      repeating-linear-gradient(\n        -45deg,\n        transparent,\n        transparent ").concat(e,"px,\n        ").concat(n," ").concat(e,"px,\n        ").concat(n," ").concat(e+1,"px\n      )\n    "),size:()=>"auto",description:"\u041F\u0435\u0440\u0435\u043A\u0440\u0451\u0441\u0442\u043D\u0430\u044F \u0448\u0442\u0440\u0438\u0445\u043E\u0432\u043A\u0430"},waves:{category:O.WAVES,name:"Waves",svg:(n="#00000010",e=40)=>'\n      <svg xmlns="http://www.w3.org/2000/svg" width="'.concat(e,'" height="').concat(e/2,'">\n        <path d="M0 ').concat(e/4," Q ").concat(e/4," 0 ").concat(e/2," ").concat(e/4," T ").concat(e," ").concat(e/4,'" \n              fill="none" stroke="').concat(n,'" stroke-width="1"/>\n      </svg>\n    '),description:"\u0412\u043E\u043B\u043D\u044B"},zigzag:{category:O.WAVES,name:"Zigzag",css:(n="rgba(0,0,0,0.05)",e=20)=>"\n      linear-gradient(135deg, ".concat(n," 25%, transparent 25%),\n      linear-gradient(225deg, ").concat(n," 25%, transparent 25%)\n    "),size:(n=20)=>"".concat(n,"px ").concat(n,"px"),position:()=>"0 0, 10px 0",description:"\u0417\u0438\u0433\u0437\u0430\u0433"},noise:{category:O.NOISE,name:"Noise",svg:()=>'\n      <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">\n        <filter id="noise">\n          <feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="3" stitchTiles="stitch"/>\n        </filter>\n        <rect width="100%" height="100%" filter="url(#noise)" opacity="0.05"/>\n      </svg>\n    ',description:"\u0428\u0443\u043C"},grain:{category:O.NOISE,name:"Grain",svg:()=>'\n      <svg xmlns="http://www.w3.org/2000/svg" width="300" height="300">\n        <filter id="grain">\n          <feTurbulence type="turbulence" baseFrequency="0.9" numOctaves="1" result="noise"/>\n          <feColorMatrix type="saturate" values="0"/>\n        </filter>\n        <rect width="100%" height="100%" filter="url(#grain)" opacity="0.03"/>\n      </svg>\n    ',description:"\u0417\u0435\u0440\u043D\u0438\u0441\u0442\u043E\u0441\u0442\u044C"},topography:{category:O.ORGANIC,name:"Topography",svg:(n="#00000008")=>'\n      <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100">\n        <circle cx="20" cy="20" r="15" fill="none" stroke="'.concat(n,'" stroke-width="1"/>\n        <circle cx="20" cy="20" r="25" fill="none" stroke="').concat(n,'" stroke-width="1"/>\n        <circle cx="20" cy="20" r="35" fill="none" stroke="').concat(n,'" stroke-width="1"/>\n        <circle cx="80" cy="80" r="10" fill="none" stroke="').concat(n,'" stroke-width="1"/>\n        <circle cx="80" cy="80" r="20" fill="none" stroke="').concat(n,'" stroke-width="1"/>\n        <circle cx="80" cy="80" r="30" fill="none" stroke="').concat(n,'" stroke-width="1"/>\n      </svg>\n    '),description:"\u0422\u043E\u043F\u043E\u0433\u0440\u0430\u0444\u0438\u044F"},circuit:{category:O.ORGANIC,name:"Circuit",svg:(n="#00000010")=>'\n      <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50">\n        <path d="M0 25 H20 V10 H30 V25 H50 M25 0 V10 M25 50 V40" \n              fill="none" stroke="'.concat(n,'" stroke-width="1"/>\n        <circle cx="25" cy="10" r="2" fill="').concat(n,'"/>\n        <circle cx="25" cy="40" r="2" fill="').concat(n,'"/>\n      </svg>\n    '),description:"\u0421\u0445\u0435\u043C\u0430"}},gt=class{constructor(e={}){this._config=d({pattern:"grid",color:"rgba(0, 0, 0, 0.05)",size:20,opacity:1,blend:"normal"},e)}setPattern(e){Ee[e]&&(this._config.pattern=e)}setColor(e){this._config.color=e}setSize(e){this._config.size=e}getPattern(){return Ee[this._config.pattern]||Ee.grid}generateStyles(e={}){let t=d(d({},this._config),e),i=Ee[t.pattern];if(!i)return{};let r={backgroundBlendMode:t.blend};if(i.css&&(r.backgroundImage=i.css(t.color,t.size),i.size&&(r.backgroundSize=i.size(t.size)),i.position&&(r.backgroundPosition=i.position(t.size))),i.svg){let s=i.svg(t.color,t.size),o=encodeURIComponent(s);r.backgroundImage='url("data:image/svg+xml,'.concat(o,'")')}return t.opacity<1&&(r.opacity=t.opacity),r}apply(e,t={}){let i=this.generateStyles(t);for(let[r,s]of Object.entries(i))e.style[r]=s;e.classList.add("uc-pattern"),e.dataset.pattern=this._config.pattern}remove(e){e.style.backgroundImage="",e.style.backgroundSize="",e.style.backgroundPosition="",e.style.backgroundBlendMode="",e.classList.remove("uc-pattern"),delete e.dataset.pattern}static getByCategory(e){let t={};for(let[i,r]of Object.entries(Ee))r.category===e&&(t[i]=r);return t}static getPatternNames(){return Object.keys(Ee)}static getStyles(){let e=[];for(let[t,i]of Object.entries(Ee))if(i.css){let r=i.css("rgba(0,0,0,0.05)",20),s=i.size?i.size(20):"auto",o=i.position?i.position(20):"0 0";e.push("\n          .uc-pattern-".concat(t," {\n            background-image: ").concat(r,";\n            background-size: ").concat(s,";\n            background-position: ").concat(o,";\n          }\n        "))}else if(i.svg){let r=i.svg("rgba(0,0,0,0.05)",20),s=encodeURIComponent(r);e.push("\n          .uc-pattern-".concat(t,' {\n            background-image: url("data:image/svg+xml,').concat(s,'");\n          }\n        '))}return e.push("\n      /* \u0420\u0430\u0437\u043C\u0435\u0440\u044B \u043F\u0430\u0442\u0442\u0435\u0440\u043D\u043E\u0432 */\n      .uc-pattern-sm { background-size: 10px 10px; }\n      .uc-pattern-md { background-size: 20px 20px; }\n      .uc-pattern-lg { background-size: 40px 40px; }\n      .uc-pattern-xl { background-size: 60px 60px; }\n\n      /* \u041F\u0440\u043E\u0437\u0440\u0430\u0447\u043D\u043E\u0441\u0442\u044C */\n      .uc-pattern-opacity-10 { opacity: 0.1; }\n      .uc-pattern-opacity-25 { opacity: 0.25; }\n      .uc-pattern-opacity-50 { opacity: 0.5; }\n      .uc-pattern-opacity-75 { opacity: 0.75; }\n\n      /* \u0420\u0435\u0436\u0438\u043C\u044B \u043D\u0430\u043B\u043E\u0436\u0435\u043D\u0438\u044F */\n      .uc-pattern-blend-multiply { background-blend-mode: multiply; }\n      .uc-pattern-blend-screen { background-blend-mode: screen; }\n      .uc-pattern-blend-overlay { background-blend-mode: overlay; }\n      .uc-pattern-blend-darken { background-blend-mode: darken; }\n      .uc-pattern-blend-lighten { background-blend-mode: lighten; }\n\n      /* \u0410\u043D\u0438\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u043F\u0430\u0442\u0442\u0435\u0440\u043D\u044B */\n      .uc-pattern-animated {\n        animation: uc-pattern-move 20s linear infinite;\n      }\n\n      @keyframes uc-pattern-move {\n        from { background-position: 0 0; }\n        to { background-position: 100px 100px; }\n      }\n    "),e.join("\n")}};var ee={GRADIENT:"gradient",GLOW:"glow",PULSE:"pulse",RAINBOW:"rainbow",DASH:"dash",WAVE:"wave",NEON:"neon",SHIMMER:"shimmer"},bt={PRIMARY:["var(--primary-color)","var(--accent-color, #6366f1)"],RAINBOW:["#ff0000","#ff7f00","#ffff00","#00ff00","#0000ff","#8b00ff","#ff0000"],SUNSET:["#ff6b6b","#feca57","#ff9ff3"],OCEAN:["#0077be","#00a5cf","#00d4aa"],FIRE:["#ff4500","#ff6b00","#ffd700"],PURPLE:["#667eea","#764ba2"],CYAN:["#00d2ff","#3a7bd5"],EMERALD:["#11998e","#38ef7d"]},mr={type:ee.GRADIENT,width:2,radius:12,duration:3,colors:bt.PRIMARY,glowSize:10,glowOpacity:.5},yt=class{constructor(e={}){this._config=d(d({},mr),e),this._styleElement=null,this._animationId="uc-border-".concat(Math.random().toString(36).substr(2,9))}setType(e){Object.values(ee).includes(e)&&(this._config.type=e)}setColors(e){this._config.colors=e}setGradientPreset(e){bt[e]&&(this._config.colors=bt[e])}generateStyles(){let{type:e,width:t,radius:i,colors:r,glowSize:s,glowOpacity:o}=this._config;switch(e){case ee.GRADIENT:return this._generateGradientStyles();case ee.GLOW:return this._generateGlowStyles();case ee.PULSE:return this._generatePulseStyles();case ee.RAINBOW:return this._generateRainbowStyles();case ee.DASH:return this._generateDashStyles();case ee.WAVE:return this._generateWaveStyles();case ee.NEON:return this._generateNeonStyles();case ee.SHIMMER:return this._generateShimmerStyles();default:return{}}}_generateGradientStyles(){let{width:e,radius:t,colors:i,duration:r}=this._config,s="linear-gradient(90deg, ".concat(i.join(", "),")");return{position:"relative",borderRadius:"".concat(t,"px"),padding:"".concat(e,"px"),background:s,backgroundSize:"200% 200%",animation:"".concat(this._animationId,"-gradient ").concat(r,"s ease infinite"),keyframes:"\n        @keyframes ".concat(this._animationId,"-gradient {\n          0% { background-position: 0% 50%; }\n          50% { background-position: 100% 50%; }\n          100% { background-position: 0% 50%; }\n        }\n      ")}}_generateGlowStyles(){let{width:e,radius:t,colors:i,glowSize:r,glowOpacity:s,duration:o}=this._config,a=i[0];return{position:"relative",borderRadius:"".concat(t,"px"),border:"".concat(e,"px solid ").concat(a),boxShadow:"0 0 ".concat(r,"px ").concat(a),animation:"".concat(this._animationId,"-glow ").concat(o,"s ease-in-out infinite"),keyframes:"\n        @keyframes ".concat(this._animationId,"-glow {\n          0%, 100% {\n            box-shadow: 0 0 ").concat(r,"px ").concat(a).concat(Math.round(s*255).toString(16),";\n          }\n          50% {\n            box-shadow: 0 0 ").concat(r*2,"px ").concat(a,", 0 0 ").concat(r*3,"px ").concat(a).concat(Math.round(s*.5*255).toString(16),";\n          }\n        }\n      ")}}_generatePulseStyles(){let{width:e,radius:t,colors:i,duration:r}=this._config;return{position:"relative",borderRadius:"".concat(t,"px"),border:"".concat(e,"px solid ").concat(i[0]),animation:"".concat(this._animationId,"-pulse ").concat(r,"s ease-in-out infinite"),keyframes:"\n        @keyframes ".concat(this._animationId,"-pulse {\n          0%, 100% {\n            border-color: ").concat(i[0],";\n            border-width: ").concat(e,"px;\n          }\n          50% {\n            border-color: ").concat(i[1]||i[0],";\n            border-width: ").concat(e+1,"px;\n          }\n        }\n      ")}}_generateRainbowStyles(){let{width:e,radius:t,duration:i}=this._config,r=bt.RAINBOW;return{position:"relative",borderRadius:"".concat(t,"px"),padding:"".concat(e,"px"),background:"linear-gradient(90deg, ".concat(r.join(", "),")"),backgroundSize:"400% 400%",animation:"".concat(this._animationId,"-rainbow ").concat(i,"s linear infinite"),keyframes:"\n        @keyframes ".concat(this._animationId,"-rainbow {\n          0% { background-position: 0% 50%; }\n          100% { background-position: 400% 50%; }\n        }\n      ")}}_generateDashStyles(){let{width:e,radius:t,colors:i,duration:r}=this._config;return{position:"relative",borderRadius:"".concat(t,"px"),border:"".concat(e,"px dashed ").concat(i[0]),animation:"".concat(this._animationId,"-dash ").concat(r,"s linear infinite"),keyframes:"\n        @keyframes ".concat(this._animationId,"-dash {\n          to {\n            stroke-dashoffset: -100;\n          }\n        }\n      "),svgAnimation:!0}}_generateWaveStyles(){let{width:e,radius:t,colors:i,duration:r}=this._config;return{position:"relative",borderRadius:"".concat(t,"px"),border:"".concat(e,"px solid transparent"),backgroundImage:"linear-gradient(var(--ha-card-background), var(--ha-card-background)), linear-gradient(90deg, ".concat(i.join(", "),")"),backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box",animation:"".concat(this._animationId,"-wave ").concat(r,"s ease-in-out infinite"),keyframes:"\n        @keyframes ".concat(this._animationId,"-wave {\n          0%, 100% { border-width: ").concat(e,"px; }\n          50% { border-width: ").concat(e+2,"px; }\n        }\n      ")}}_generateNeonStyles(){let{width:e,radius:t,colors:i,glowSize:r,duration:s}=this._config,o=i[0];return{position:"relative",borderRadius:"".concat(t,"px"),border:"".concat(e,"px solid ").concat(o),boxShadow:"\n        0 0 ".concat(r/2,"px ").concat(o,",\n        0 0 ").concat(r,"px ").concat(o,",\n        0 0 ").concat(r*2,"px ").concat(o,",\n        inset 0 0 ").concat(r/2,"px ").concat(o,"\n      "),animation:"".concat(this._animationId,"-neon ").concat(s,"s ease-in-out infinite alternate"),keyframes:"\n        @keyframes ".concat(this._animationId,"-neon {\n          from {\n            box-shadow:\n              0 0 ").concat(r/2,"px ").concat(o,",\n              0 0 ").concat(r,"px ").concat(o,",\n              0 0 ").concat(r*2,"px ").concat(o,",\n              inset 0 0 ").concat(r/2,"px ").concat(o,";\n          }\n          to {\n            box-shadow:\n              0 0 ").concat(r,"px ").concat(o,",\n              0 0 ").concat(r*2,"px ").concat(o,",\n              0 0 ").concat(r*3,"px ").concat(o,",\n              0 0 ").concat(r*4,"px ").concat(o,",\n              inset 0 0 ").concat(r,"px ").concat(o,";\n          }\n        }\n      ")}}_generateShimmerStyles(){let{width:e,radius:t,colors:i,duration:r}=this._config;return{position:"relative",borderRadius:"".concat(t,"px"),padding:"".concat(e,"px"),background:"linear-gradient(90deg, transparent 0%, ".concat(i[0],"40 50%, transparent 100%), ").concat(i[0]),backgroundSize:"200% 100%, 100% 100%",animation:"".concat(this._animationId,"-shimmer ").concat(r,"s linear infinite"),keyframes:"\n        @keyframes ".concat(this._animationId,"-shimmer {\n          from { background-position: -200% 0, 0 0; }\n          to { background-position: 200% 0, 0 0; }\n        }\n      ")}}apply(e){let t=this.generateStyles();t.keyframes&&this._injectKeyframes(t.keyframes);for(let[i,r]of Object.entries(t))i!=="keyframes"&&i!=="svgAnimation"&&(e.style[i]=r);t.svgAnimation&&this._applySvgBorder(e),e.classList.add("uc-border-animated"),e.dataset.borderAnimation=this._config.type}_injectKeyframes(e){if(this._styleElement){this._styleElement.textContent=e;return}this._styleElement=document.createElement("style"),this._styleElement.textContent=e,this._styleElement.setAttribute("data-uc-border",this._animationId),document.head.appendChild(this._styleElement)}_applySvgBorder(e){let t=e.getBoundingClientRect(),{width:i,radius:r,colors:s,duration:o}=this._config,a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.style.cssText="\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      pointer-events: none;\n      overflow: visible;\n    ",a.innerHTML='\n      <rect \n        x="'.concat(i/2,'" \n        y="').concat(i/2,'" \n        width="calc(100% - ').concat(i,'px)" \n        height="calc(100% - ').concat(i,'px)"\n        rx="').concat(r,'"\n        fill="none"\n        stroke="').concat(s[0],'"\n        stroke-width="').concat(i,'"\n        stroke-dasharray="10 5"\n        stroke-linecap="round"\n      >\n        <animate \n          attributeName="stroke-dashoffset"\n          from="0"\n          to="-30"\n          dur="').concat(o,'s"\n          repeatCount="indefinite"\n        />\n      </rect>\n    '),e.style.position="relative",e.appendChild(a)}remove(e){let t=["position","borderRadius","padding","background","backgroundSize","backgroundImage","backgroundOrigin","backgroundClip","border","boxShadow","animation"];for(let r of t)e.style[r]="";let i=e.querySelector("svg");i&&i.remove(),this._styleElement&&(this._styleElement.remove(),this._styleElement=null),e.classList.remove("uc-border-animated"),delete e.dataset.borderAnimation}static getStyles(){return"\n      .uc-border-animated {\n        isolation: isolate;\n      }\n\n      .uc-border-animated::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        border-radius: inherit;\n        pointer-events: none;\n        z-index: -1;\n      }\n\n      /* \u0423\u0442\u0438\u043B\u0438\u0442\u0430\u0440\u043D\u044B\u0435 \u043A\u043B\u0430\u0441\u0441\u044B */\n      .uc-border-gradient {\n        background: linear-gradient(90deg, var(--primary-color), var(--accent-color, #6366f1));\n        background-size: 200% 200%;\n        animation: uc-border-gradient-anim 3s ease infinite;\n      }\n\n      @keyframes uc-border-gradient-anim {\n        0% { background-position: 0% 50%; }\n        50% { background-position: 100% 50%; }\n        100% { background-position: 0% 50%; }\n      }\n\n      .uc-border-glow {\n        box-shadow: 0 0 10px var(--primary-color);\n        animation: uc-border-glow-anim 2s ease-in-out infinite;\n      }\n\n      @keyframes uc-border-glow-anim {\n        0%, 100% { box-shadow: 0 0 10px var(--primary-color); }\n        50% { box-shadow: 0 0 20px var(--primary-color), 0 0 30px var(--primary-color); }\n      }\n\n      .uc-border-rainbow {\n        background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #8b00ff, #ff0000);\n        background-size: 400% 400%;\n        animation: uc-border-rainbow-anim 3s linear infinite;\n      }\n\n      @keyframes uc-border-rainbow-anim {\n        0% { background-position: 0% 50%; }\n        100% { background-position: 400% 50%; }\n      }\n    "}};var C={TRANSFORM:"transform",SHADOW:"shadow",GLOW:"glow",OVERLAY:"overlay",BORDER:"border",BACKGROUND:"background"},vt={lift:{category:C.TRANSFORM,name:"Lift",description:"\u041F\u0440\u0438\u043F\u043E\u0434\u043D\u0438\u043C\u0430\u043D\u0438\u0435",styles:{transition:"transform 0.3s ease, box-shadow 0.3s ease",":hover":{transform:"translateY(-4px)",boxShadow:"0 12px 24px rgba(0, 0, 0, 0.15)"}}},scale:{category:C.TRANSFORM,name:"Scale",description:"\u0423\u0432\u0435\u043B\u0438\u0447\u0435\u043D\u0438\u0435",styles:{transition:"transform 0.3s ease",":hover":{transform:"scale(1.02)"}}},tilt:{category:C.TRANSFORM,name:"Tilt",description:"\u041D\u0430\u043A\u043B\u043E\u043D",styles:{transition:"transform 0.3s ease",":hover":{transform:"perspective(1000px) rotateX(5deg) rotateY(5deg)"}},interactive:!0},float:{category:C.TRANSFORM,name:"Float",description:"\u041F\u043B\u0430\u0432\u0430\u043D\u0438\u0435",styles:{transition:"transform 0.3s ease, box-shadow 0.3s ease",":hover":{transform:"translateY(-8px) scale(1.01)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.2)"}}},push:{category:C.TRANSFORM,name:"Push",description:"\u0412\u0434\u0430\u0432\u043B\u0438\u0432\u0430\u043D\u0438\u0435",styles:{transition:"transform 0.2s ease, box-shadow 0.2s ease",":hover":{transform:"scale(0.98)",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.1)"}}},rotate:{category:C.TRANSFORM,name:"Rotate",description:"\u041B\u0451\u0433\u043A\u0438\u0439 \u043F\u043E\u0432\u043E\u0440\u043E\u0442",styles:{transition:"transform 0.3s ease",":hover":{transform:"rotate(1deg)"}}},shadowLift:{category:C.SHADOW,name:"Shadow Lift",description:"\u0422\u0435\u043D\u044C \u0441 \u043F\u043E\u0434\u044A\u0451\u043C\u043E\u043C",styles:{boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",transition:"box-shadow 0.3s ease, transform 0.3s ease",":hover":{boxShadow:"0 14px 28px rgba(0, 0, 0, 0.15), 0 10px 10px rgba(0, 0, 0, 0.1)",transform:"translateY(-2px)"}}},shadowGrow:{category:C.SHADOW,name:"Shadow Grow",description:"\u0420\u0430\u0441\u0442\u0443\u0449\u0430\u044F \u0442\u0435\u043D\u044C",styles:{boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"box-shadow 0.3s ease",":hover":{boxShadow:"0 8px 30px rgba(0, 0, 0, 0.2)"}}},shadowColor:{category:C.SHADOW,name:"Shadow Color",description:"\u0426\u0432\u0435\u0442\u043D\u0430\u044F \u0442\u0435\u043D\u044C",styles:{transition:"box-shadow 0.3s ease",":hover":{boxShadow:"0 10px 30px var(--primary-color, rgba(99, 102, 241, 0.3))"}}},shadowInset:{category:C.SHADOW,name:"Shadow Inset",description:"\u0412\u043D\u0443\u0442\u0440\u0435\u043D\u043D\u044F\u044F \u0442\u0435\u043D\u044C",styles:{transition:"box-shadow 0.3s ease",":hover":{boxShadow:"inset 0 4px 8px rgba(0, 0, 0, 0.1)"}}},glow:{category:C.GLOW,name:"Glow",description:"\u0421\u0432\u0435\u0447\u0435\u043D\u0438\u0435",styles:{transition:"box-shadow 0.3s ease",":hover":{boxShadow:"0 0 20px var(--primary-color, rgba(99, 102, 241, 0.5))"}}},glowPulse:{category:C.GLOW,name:"Glow Pulse",description:"\u041F\u0443\u043B\u044C\u0441\u0438\u0440\u0443\u044E\u0449\u0435\u0435 \u0441\u0432\u0435\u0447\u0435\u043D\u0438\u0435",styles:{transition:"box-shadow 0.3s ease",":hover":{animation:"uc-hover-glow-pulse 1.5s ease-in-out infinite"}}},neon:{category:C.GLOW,name:"Neon",description:"\u041D\u0435\u043E\u043D\u043E\u0432\u043E\u0435 \u0441\u0432\u0435\u0447\u0435\u043D\u0438\u0435",styles:{transition:"box-shadow 0.3s ease, border-color 0.3s ease",":hover":{borderColor:"var(--primary-color)",boxShadow:"\n          0 0 5px var(--primary-color),\n          0 0 10px var(--primary-color),\n          0 0 20px var(--primary-color),\n          0 0 40px var(--primary-color)\n        "}}},shine:{category:C.OVERLAY,name:"Shine",description:"\u0411\u043B\u0435\u0441\u043A",styles:{position:"relative",overflow:"hidden",":hover::after":{content:'""',position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"linear-gradient(to right, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%)",transform:"rotate(30deg)",animation:"uc-hover-shine 0.75s ease-out"}},requiresPseudo:!0},overlay:{category:C.OVERLAY,name:"Overlay",description:"\u0417\u0430\u0442\u0435\u043C\u043D\u0435\u043D\u0438\u0435",styles:{position:"relative",":hover::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.1)",borderRadius:"inherit",pointerEvents:"none"}},requiresPseudo:!0},gradient:{category:C.OVERLAY,name:"Gradient",description:"\u0413\u0440\u0430\u0434\u0438\u0435\u043D\u0442\u043D\u043E\u0435 \u043D\u0430\u043B\u043E\u0436\u0435\u043D\u0438\u0435",styles:{position:"relative",":hover::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, var(--primary-color, rgba(99, 102, 241, 0.1)) 0%, transparent 100%)",borderRadius:"inherit",pointerEvents:"none"}},requiresPseudo:!0},borderHighlight:{category:C.BORDER,name:"Border Highlight",description:"\u041F\u043E\u0434\u0441\u0432\u0435\u0442\u043A\u0430 \u0433\u0440\u0430\u043D\u0438\u0446\u044B",styles:{border:"2px solid transparent",transition:"border-color 0.3s ease",":hover":{borderColor:"var(--primary-color)"}}},borderGradient:{category:C.BORDER,name:"Border Gradient",description:"\u0413\u0440\u0430\u0434\u0438\u0435\u043D\u0442\u043D\u0430\u044F \u0433\u0440\u0430\u043D\u0438\u0446\u0430",styles:{position:"relative",":hover::before":{content:'""',position:"absolute",top:-2,left:-2,right:-2,bottom:-2,background:"linear-gradient(90deg, var(--primary-color), var(--accent-color, #6366f1))",borderRadius:"inherit",zIndex:-1}},requiresPseudo:!0},bgBrighten:{category:C.BACKGROUND,name:"Brighten",description:"\u041E\u0441\u0432\u0435\u0442\u043B\u0435\u043D\u0438\u0435 \u0444\u043E\u043D\u0430",styles:{transition:"filter 0.3s ease",":hover":{filter:"brightness(1.05)"}}},bgDarken:{category:C.BACKGROUND,name:"Darken",description:"\u0417\u0430\u0442\u0435\u043C\u043D\u0435\u043D\u0438\u0435 \u0444\u043E\u043D\u0430",styles:{transition:"filter 0.3s ease",":hover":{filter:"brightness(0.95)"}}},bgColor:{category:C.BACKGROUND,name:"Color Shift",description:"\u0421\u043C\u0435\u0449\u0435\u043D\u0438\u0435 \u0446\u0432\u0435\u0442\u0430",styles:{transition:"background-color 0.3s ease",":hover":{backgroundColor:"var(--primary-color, rgba(99, 102, 241, 0.1))"}}}},xt=class{constructor(e,t={}){this._element=e,this._config=d({effect:"lift",duration:.3,customStyles:{}},t),this._styleElement=null,this._effectId="uc-hover-".concat(Math.random().toString(36).substr(2,9))}setEffect(e){vt[e]&&(this._config.effect=e)}getEffect(){return vt[this._config.effect]||vt.lift}apply(){let e=this.getEffect();for(let[t,i]of Object.entries(e.styles))t.startsWith(":")||(this._element.style[t]=i);this._injectStyles(e),this._element.classList.add("uc-hover-effect",this._effectId)}_injectStyles(e){this._styleElement&&this._styleElement.remove();let t=e.styles[":hover"]||{},i=e.styles[":hover::before"]||{},r=e.styles[":hover::after"]||{},s="";Object.keys(t).length>0&&(s+=".".concat(this._effectId,":hover { ").concat(this._objectToCSS(t)," }\n")),(e.styles["::before"]||Object.keys(i).length>0)&&(s+=".".concat(this._effectId,"::before { content: ''; ").concat(this._objectToCSS(e.styles["::before"]||{})," }\n"),s+=".".concat(this._effectId,":hover::before { ").concat(this._objectToCSS(i)," }\n")),Object.keys(r).length>0&&(s+=".".concat(this._effectId,"::after { content: ''; position: absolute; opacity: 0; transition: opacity 0.3s ease; }\n"),s+=".".concat(this._effectId,":hover::after { opacity: 1; ").concat(this._objectToCSS(r)," }\n")),this._styleElement=document.createElement("style"),this._styleElement.textContent=s,this._styleElement.setAttribute("data-uc-hover",this._effectId),document.head.appendChild(this._styleElement)}_objectToCSS(e){return Object.entries(e).filter(([t])=>!t.startsWith(":")).map(([t,i])=>{let r=t.replace(/([A-Z])/g,"-$1").toLowerCase();return"".concat(r,": ").concat(i)}).join("; ")}remove(){this._element.classList.remove("uc-hover-effect",this._effectId),this._styleElement&&(this._styleElement.remove(),this._styleElement=null)}static applyTilt(e,t={}){let{max:i=10,perspective:r=1e3,scale:s=1.02}=t;e.style.transition="transform 0.1s ease-out",e.style.transformStyle="preserve-3d";let o=c=>{let l=e.getBoundingClientRect(),u=c.clientX-l.left,h=c.clientY-l.top,f=l.width/2,p=l.height/2,_=(h-p)/p*-i,y=(u-f)/f*i;e.style.transform="perspective(".concat(r,"px) rotateX(").concat(_,"deg) rotateY(").concat(y,"deg) scale(").concat(s,")")},a=()=>{e.style.transform="perspective(1000px) rotateX(0) rotateY(0) scale(1)"};return e.addEventListener("mousemove",o),e.addEventListener("mouseleave",a),()=>{e.removeEventListener("mousemove",o),e.removeEventListener("mouseleave",a)}}static getStyles(){let e=[];for(let[t,i]of Object.entries(vt)){let r="uc-hover-".concat(t),s=d({},i.styles);delete s[":hover"],delete s[":hover::before"],delete s[":hover::after"],e.push("\n        .".concat(r," {\n          ").concat(Object.entries(s).filter(([o])=>!o.startsWith(":")).map(([o,a])=>"".concat(o.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(a)).join("; "),"\n        }\n      ")),i.styles[":hover"]&&e.push("\n          .".concat(r,":hover {\n            ").concat(Object.entries(i.styles[":hover"]).map(([o,a])=>"".concat(o.replace(/([A-Z])/g,"-$1").toLowerCase(),": ").concat(a)).join("; "),"\n          }\n        "))}return e.push("\n      @keyframes uc-hover-shine {\n        from { transform: translateX(-100%) rotate(30deg); }\n        to { transform: translateX(100%) rotate(30deg); }\n      }\n\n      @keyframes uc-hover-glow-pulse {\n        0%, 100% { box-shadow: 0 0 20px var(--primary-color, rgba(99, 102, 241, 0.5)); }\n        50% { box-shadow: 0 0 40px var(--primary-color, rgba(99, 102, 241, 0.8)); }\n      }\n\n      /* \u0411\u0430\u0437\u043E\u0432\u044B\u0435 \u0443\u0442\u0438\u043B\u0438\u0442\u0430\u0440\u043D\u044B\u0435 \u043A\u043B\u0430\u0441\u0441\u044B */\n      .uc-hover-effect {\n        cursor: pointer;\n      }\n\n      .uc-hover-disabled {\n        pointer-events: none;\n      }\n    "),e.join("\n")}};var ge={light:{name:"Light",type:"light",colors:{background:"#ffffff",surface:"#f5f5f5",primary:"#6366f1",secondary:"#8b5cf6",accent:"#06b6d4",text:"#1f2937",textSecondary:"#6b7280",border:"#e5e7eb",success:"#10b981",warning:"#f59e0b",error:"#ef4444",info:"#3b82f6"}},paper:{name:"Paper",type:"light",colors:{background:"#faf8f5",surface:"#f5f2ed",primary:"#8b7355",secondary:"#a67c52",accent:"#c49a6c",text:"#3d3d3d",textSecondary:"#6b6b6b",border:"#e0dcd5",success:"#5d8a66",warning:"#c9a227",error:"#b54040",info:"#5a7fa6"}},cream:{name:"Cream",type:"light",colors:{background:"#fffdf7",surface:"#fff9e6",primary:"#d4a574",secondary:"#c49570",accent:"#e6c88a",text:"#4a4540",textSecondary:"#7d7267",border:"#ece4d4",success:"#7db47d",warning:"#e0b050",error:"#d47070",info:"#70a0c0"}},dark:{name:"Dark",type:"dark",colors:{background:"#1a1a2e",surface:"#16213e",primary:"#6366f1",secondary:"#8b5cf6",accent:"#06b6d4",text:"#f1f5f9",textSecondary:"#94a3b8",border:"#334155",success:"#10b981",warning:"#f59e0b",error:"#ef4444",info:"#3b82f6"}},midnight:{name:"Midnight",type:"dark",colors:{background:"#0f0f1a",surface:"#1a1a2e",primary:"#818cf8",secondary:"#a78bfa",accent:"#22d3ee",text:"#e2e8f0",textSecondary:"#94a3b8",border:"#2d2d44",success:"#34d399",warning:"#fbbf24",error:"#f87171",info:"#60a5fa"}},amoled:{name:"AMOLED",type:"dark",colors:{background:"#000000",surface:"#0a0a0a",primary:"#6366f1",secondary:"#8b5cf6",accent:"#06b6d4",text:"#ffffff",textSecondary:"#a1a1aa",border:"#27272a",success:"#22c55e",warning:"#eab308",error:"#ef4444",info:"#3b82f6"}},ocean:{name:"Ocean",type:"dark",colors:{background:"#0c1929",surface:"#132f4c",primary:"#00a9ff",secondary:"#0091ea",accent:"#00e5ff",text:"#e3f2fd",textSecondary:"#90caf9",border:"#1e4976",success:"#4caf50",warning:"#ffc107",error:"#ff5252",info:"#29b6f6"}},forest:{name:"Forest",type:"dark",colors:{background:"#1a2f1a",surface:"#2d4a2d",primary:"#4caf50",secondary:"#66bb6a",accent:"#a5d6a7",text:"#e8f5e9",textSecondary:"#a5d6a7",border:"#3d6b3d",success:"#81c784",warning:"#ffd54f",error:"#ef5350",info:"#4fc3f7"}},sunset:{name:"Sunset",type:"dark",colors:{background:"#2d1f2f",surface:"#4a2d4a",primary:"#ff6b6b",secondary:"#feca57",accent:"#ff9ff3",text:"#fff5f5",textSecondary:"#ffb8b8",border:"#5c3a5c",success:"#7bed9f",warning:"#ffeaa7",error:"#ff6b6b",info:"#74b9ff"}},lavender:{name:"Lavender",type:"light",colors:{background:"#f5f0ff",surface:"#ede4ff",primary:"#7c3aed",secondary:"#8b5cf6",accent:"#c4b5fd",text:"#3b0764",textSecondary:"#6b21a8",border:"#d8b4fe",success:"#22c55e",warning:"#f59e0b",error:"#ef4444",info:"#6366f1"}},rose:{name:"Rose",type:"light",colors:{background:"#fff5f7",surface:"#ffe4e6",primary:"#f43f5e",secondary:"#fb7185",accent:"#fda4af",text:"#4c0519",textSecondary:"#881337",border:"#fecdd3",success:"#10b981",warning:"#f59e0b",error:"#e11d48",info:"#3b82f6"}},neon:{name:"Neon",type:"dark",colors:{background:"#0a0a0a",surface:"#141414",primary:"#00ff88",secondary:"#ff00ff",accent:"#00ffff",text:"#ffffff",textSecondary:"#888888",border:"#333333",success:"#00ff88",warning:"#ffff00",error:"#ff0055",info:"#00ffff"}},cyberpunk:{name:"Cyberpunk",type:"dark",colors:{background:"#0d0221",surface:"#1a0a3e",primary:"#ff00ff",secondary:"#00ffff",accent:"#ffff00",text:"#ffffff",textSecondary:"#b794f6",border:"#3d1a78",success:"#00ff88",warning:"#ffff00",error:"#ff0055",info:"#00ffff"}},terminal:{name:"Terminal",type:"dark",colors:{background:"#0c0c0c",surface:"#1a1a1a",primary:"#00ff00",secondary:"#00cc00",accent:"#88ff88",text:"#00ff00",textSecondary:"#00aa00",border:"#004400",success:"#00ff00",warning:"#ffff00",error:"#ff0000",info:"#00ffff"}},sepia:{name:"Sepia",type:"light",colors:{background:"#f4ecd8",surface:"#e8dcc8",primary:"#8b4513",secondary:"#a0522d",accent:"#cd853f",text:"#3e2723",textSecondary:"#5d4037",border:"#d7cbb9",success:"#558b2f",warning:"#f9a825",error:"#c62828",info:"#0277bd"}}},wt=class{constructor(e={}){this._config=d({scheme:"light",customColors:{}},e)}setScheme(e){ge[e]&&(this._config.scheme=e)}getScheme(){let e=ge[this._config.scheme]||ge.light;return H(d({},e),{colors:d(d({},e.colors),this._config.customColors)})}getColor(e){return this.getScheme().colors[e]||e}setCustomColor(e,t){this._config.customColors[e]=t}generateCSSVariables(){let e=this.getScheme(),t={};for(let[i,r]of Object.entries(e.colors)){t["--uc-".concat(this._kebabCase(i))]=r;let s=this._hexToRgb(r);s&&(t["--uc-".concat(this._kebabCase(i),"-rgb")]="".concat(s.r,", ").concat(s.g,", ").concat(s.b))}return t}apply(e){let t=this.generateCSSVariables();for(let[i,r]of Object.entries(t))e.style.setProperty(i,r);e.dataset.colorScheme=this._config.scheme,e.classList.add("uc-color-scheme")}remove(e){let t=this.getScheme();for(let i of Object.keys(t.colors))e.style.removeProperty("--uc-".concat(this._kebabCase(i))),e.style.removeProperty("--uc-".concat(this._kebabCase(i),"-rgb"));delete e.dataset.colorScheme,e.classList.remove("uc-color-scheme")}_kebabCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}_hexToRgb(e){if(!e.startsWith("#"))return null;let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}static getSchemeNames(){return Object.keys(ge)}static getSchemesByType(e){let t={};for(let[i,r]of Object.entries(ge))r.type===e&&(t[i]=r);return t}static getStyles(){let e=[];for(let[t,i]of Object.entries(ge)){let r=Object.entries(i.colors).map(([s,o])=>{let a=s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return"--uc-".concat(a,": ").concat(o)}).join(";\n    ");e.push("\n        .uc-scheme-".concat(t,',\n        [data-color-scheme="').concat(t,'"] {\n          ').concat(r,";\n        }\n      "))}return e.push("\n      /* \u0426\u0432\u0435\u0442\u0430 \u0442\u0435\u043A\u0441\u0442\u0430 */\n      .uc-text-primary { color: var(--uc-text); }\n      .uc-text-secondary { color: var(--uc-text-secondary); }\n      .uc-text-success { color: var(--uc-success); }\n      .uc-text-warning { color: var(--uc-warning); }\n      .uc-text-error { color: var(--uc-error); }\n      .uc-text-info { color: var(--uc-info); }\n\n      /* \u0426\u0432\u0435\u0442\u0430 \u0444\u043E\u043D\u0430 */\n      .uc-bg-background { background-color: var(--uc-background); }\n      .uc-bg-surface { background-color: var(--uc-surface); }\n      .uc-bg-primary { background-color: var(--uc-primary); }\n      .uc-bg-secondary { background-color: var(--uc-secondary); }\n      .uc-bg-accent { background-color: var(--uc-accent); }\n\n      /* \u0426\u0432\u0435\u0442\u0430 \u0433\u0440\u0430\u043D\u0438\u0446 */\n      .uc-border-default { border-color: var(--uc-border); }\n      .uc-border-primary { border-color: var(--uc-primary); }\n      .uc-border-secondary { border-color: var(--uc-secondary); }\n\n      /* \u0410\u0434\u0430\u043F\u0442\u0438\u0432\u043D\u0430\u044F \u0441\u0445\u0435\u043C\u0430 */\n      @media (prefers-color-scheme: dark) {\n        .uc-scheme-auto {\n          ".concat(Object.entries(ge.dark.colors).map(([t,i])=>{let r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return"--uc-".concat(r,": ").concat(i)}).join(";\n    "),";\n        }\n      }\n\n      @media (prefers-color-scheme: light) {\n        .uc-scheme-auto {\n          ").concat(Object.entries(ge.light.colors).map(([t,i])=>{let r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return"--uc-".concat(r,": ").concat(i)}).join(";\n    "),";\n        }\n      }\n    ")),e.join("\n")}};var V={SPINNER:"spinner",DOTS:"dots",BARS:"bars",PULSE:"pulse",SKELETON:"skeleton",WAVE:"wave",RING:"ring",BOUNCE:"bounce",PROGRESS:"progress",SHIMMER:"shimmer"},Ce={XS:"xs",SM:"sm",MD:"md",LG:"lg",XL:"xl"},Se={[Ce.XS]:{size:16,stroke:2,dotSize:4},[Ce.SM]:{size:24,stroke:2.5,dotSize:6},[Ce.MD]:{size:32,stroke:3,dotSize:8},[Ce.LG]:{size:48,stroke:4,dotSize:10},[Ce.XL]:{size:64,stroke:5,dotSize:12}},kt=class{constructor(e={}){this._config=d({type:V.SPINNER,size:Ce.MD,color:"var(--primary-color, #6366f1)",secondaryColor:"var(--primary-color-light, rgba(99, 102, 241, 0.2))",speed:1},e)}setType(e){Object.values(V).includes(e)&&(this._config.type=e)}setSize(e){Object.values(Ce).includes(e)&&(this._config.size=e)}create(){let{type:e}=this._config;switch(e){case V.SPINNER:return this._createSpinner();case V.DOTS:return this._createDots();case V.BARS:return this._createBars();case V.PULSE:return this._createPulse();case V.SKELETON:return this._createSkeleton();case V.WAVE:return this._createWave();case V.RING:return this._createRing();case V.BOUNCE:return this._createBounce();case V.PROGRESS:return this._createProgress();case V.SHIMMER:return this._createShimmer();default:return this._createSpinner()}}_createSpinner(){let e=Se[this._config.size],{size:t,stroke:i}=e,{color:r,secondaryColor:s,speed:o}=this._config,a=document.createElement("div");return a.className="uc-loading uc-loading-spinner",a.innerHTML='\n      <svg width="'.concat(t,'" height="').concat(t,'" viewBox="0 0 ').concat(t," ").concat(t,'">\n        <circle\n          cx="').concat(t/2,'"\n          cy="').concat(t/2,'"\n          r="').concat((t-i)/2,'"\n          stroke="').concat(s,'"\n          stroke-width="').concat(i,'"\n          fill="none"\n        />\n        <circle\n          cx="').concat(t/2,'"\n          cy="').concat(t/2,'"\n          r="').concat((t-i)/2,'"\n          stroke="').concat(r,'"\n          stroke-width="').concat(i,'"\n          fill="none"\n          stroke-linecap="round"\n          stroke-dasharray="').concat(Math.PI*(t-i)*.75,'"\n          stroke-dashoffset="0"\n          style="animation: uc-loading-spin ').concat(1/o,'s linear infinite; transform-origin: center;"\n        />\n      </svg>\n    '),a}_createDots(){let e=Se[this._config.size],{dotSize:t}=e,{color:i,speed:r}=this._config,s=document.createElement("div");s.className="uc-loading uc-loading-dots",s.style.gap="".concat(t/2,"px");for(let o=0;o<3;o++){let a=document.createElement("span");a.style.cssText="\n        width: ".concat(t,"px;\n        height: ").concat(t,"px;\n        background: ").concat(i,";\n        border-radius: 50%;\n        animation: uc-loading-dots-bounce ").concat(.6/r,"s ease-in-out infinite;\n        animation-delay: ").concat(o*.1,"s;\n      "),s.appendChild(a)}return s}_createBars(){let e=Se[this._config.size],{size:t}=e,{color:i,speed:r}=this._config,s=document.createElement("div");s.className="uc-loading uc-loading-bars",s.style.height="".concat(t,"px"),s.style.gap="3px";for(let o=0;o<5;o++){let a=document.createElement("span");a.style.cssText="\n        width: ".concat(t/8,"px;\n        height: 100%;\n        background: ").concat(i,";\n        border-radius: 2px;\n        animation: uc-loading-bars-scale ").concat(1/r,"s ease-in-out infinite;\n        animation-delay: ").concat(o*.1,"s;\n      "),s.appendChild(a)}return s}_createPulse(){let e=Se[this._config.size],{size:t}=e,{color:i,speed:r}=this._config,s=document.createElement("div");return s.className="uc-loading uc-loading-pulse",s.style.cssText="\n      width: ".concat(t,"px;\n      height: ").concat(t,"px;\n      background: ").concat(i,";\n      border-radius: 50%;\n      animation: uc-loading-pulse ").concat(1/r,"s ease-in-out infinite;\n    "),s}_createSkeleton(){let{color:e,secondaryColor:t}=this._config,i=document.createElement("div");return i.className="uc-loading uc-loading-skeleton",i.style.cssText="\n      width: 100%;\n      height: 100%;\n      background: linear-gradient(\n        90deg,\n        ".concat(t," 25%,\n        ").concat(e,"40 50%,\n        ").concat(t," 75%\n      );\n      background-size: 200% 100%;\n      animation: uc-loading-shimmer 1.5s infinite;\n      border-radius: inherit;\n    "),i}_createWave(){let e=Se[this._config.size],{size:t}=e,{color:i,speed:r}=this._config,s=document.createElement("div");s.className="uc-loading uc-loading-wave",s.style.cssText="\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      height: ".concat(t,"px;\n    ");for(let o=0;o<5;o++){let a=document.createElement("span");a.style.cssText="\n        width: 4px;\n        height: 40%;\n        background: ".concat(i,";\n        border-radius: 2px;\n        animation: uc-loading-wave ").concat(1.2/r,"s ease-in-out infinite;\n        animation-delay: ").concat(o*.1,"s;\n      "),s.appendChild(a)}return s}_createRing(){let e=Se[this._config.size],{size:t,stroke:i}=e,{color:r,speed:s}=this._config,o=document.createElement("div");return o.className="uc-loading uc-loading-ring",o.style.cssText="\n      width: ".concat(t,"px;\n      height: ").concat(t,"px;\n      border: ").concat(i,"px solid ").concat(r,"30;\n      border-top-color: ").concat(r,";\n      border-radius: 50%;\n      animation: uc-loading-spin ").concat(1/s,"s linear infinite;\n    "),o}_createBounce(){let e=Se[this._config.size],{dotSize:t}=e,{color:i,speed:r}=this._config,s=document.createElement("div");s.className="uc-loading uc-loading-bounce",s.style.cssText="\n      display: flex;\n      align-items: flex-end;\n      gap: ".concat(t/2,"px;\n      height: ").concat(t*2,"px;\n    ");for(let o=0;o<3;o++){let a=document.createElement("span");a.style.cssText="\n        width: ".concat(t,"px;\n        height: ").concat(t,"px;\n        background: ").concat(i,";\n        border-radius: 50%;\n        animation: uc-loading-bounce ").concat(.5/r,"s ease-in-out infinite alternate;\n        animation-delay: ").concat(o*.1,"s;\n      "),s.appendChild(a)}return s}_createProgress(){let{color:e,secondaryColor:t,speed:i}=this._config,r=document.createElement("div");r.className="uc-loading uc-loading-progress",r.style.cssText="\n      width: 100%;\n      height: 4px;\n      background: ".concat(t,";\n      border-radius: 2px;\n      overflow: hidden;\n    ");let s=document.createElement("div");return s.style.cssText="\n      width: 30%;\n      height: 100%;\n      background: ".concat(e,";\n      border-radius: 2px;\n      animation: uc-loading-progress ").concat(1.5/i,"s ease-in-out infinite;\n    "),r.appendChild(s),r}_createShimmer(){let{color:e,secondaryColor:t}=this._config,i=document.createElement("div");return i.className="uc-loading uc-loading-shimmer",i.style.cssText="\n      width: 100%;\n      height: 100%;\n      background: linear-gradient(\n        110deg,\n        ".concat(t," 8%,\n        ").concat(e,"20 18%,\n        ").concat(t," 33%\n      );\n      background-size: 200% 100%;\n      animation: uc-loading-shimmer 1.5s linear infinite;\n      border-radius: inherit;\n    "),i}static getStyles(){return"\n      /* \u0411\u0430\u0437\u043E\u0432\u044B\u0435 \u0441\u0442\u0438\u043B\u0438 */\n      .uc-loading {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .uc-loading-dots,\n      .uc-loading-bars,\n      .uc-loading-wave,\n      .uc-loading-bounce {\n        display: inline-flex;\n      }\n\n      /* \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u0438 */\n      @keyframes uc-loading-spin {\n        from { transform: rotate(0deg); }\n        to { transform: rotate(360deg); }\n      }\n\n      @keyframes uc-loading-dots-bounce {\n        0%, 80%, 100% {\n          transform: scale(0);\n          opacity: 0.5;\n        }\n        40% {\n          transform: scale(1);\n          opacity: 1;\n        }\n      }\n\n      @keyframes uc-loading-bars-scale {\n        0%, 40%, 100% {\n          transform: scaleY(0.4);\n        }\n        20% {\n          transform: scaleY(1);\n        }\n      }\n\n      @keyframes uc-loading-pulse {\n        0%, 100% {\n          transform: scale(0.8);\n          opacity: 0.5;\n        }\n        50% {\n          transform: scale(1);\n          opacity: 1;\n        }\n      }\n\n      @keyframes uc-loading-wave {\n        0%, 40%, 100% {\n          transform: scaleY(0.4);\n        }\n        20% {\n          transform: scaleY(1);\n        }\n      }\n\n      @keyframes uc-loading-bounce {\n        from {\n          transform: translateY(0);\n        }\n        to {\n          transform: translateY(-100%);\n        }\n      }\n\n      @keyframes uc-loading-progress {\n        0% {\n          transform: translateX(-100%);\n        }\n        100% {\n          transform: translateX(400%);\n        }\n      }\n\n      @keyframes uc-loading-shimmer {\n        0% {\n          background-position: -200% 0;\n        }\n        100% {\n          background-position: 200% 0;\n        }\n      }\n\n      /* \u0423\u0442\u0438\u043B\u0438\u0442\u0430\u0440\u043D\u044B\u0435 \u043A\u043B\u0430\u0441\u0441\u044B \u0440\u0430\u0437\u043C\u0435\u0440\u043E\u0432 */\n      .uc-loading-xs { transform: scale(0.5); }\n      .uc-loading-sm { transform: scale(0.75); }\n      .uc-loading-md { transform: scale(1); }\n      .uc-loading-lg { transform: scale(1.5); }\n      .uc-loading-xl { transform: scale(2); }\n\n      /* \u041E\u0432\u0435\u0440\u043B\u0435\u0439 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 */\n      .uc-loading-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background: var(--ha-card-background, rgba(255, 255, 255, 0.8));\n        backdrop-filter: blur(4px);\n        z-index: 10;\n        border-radius: inherit;\n      }\n    "}};var P={CLICK:"click",TOGGLE:"toggle",SUCCESS:"success",ERROR:"error",NOTIFICATION:"notification",PROGRESS:"progress",FEEDBACK:"feedback"},Pi={ripple:{category:P.CLICK,name:"Ripple",description:"Material Design \u0432\u043E\u043B\u043D\u0430",trigger:"click"},pop:{category:P.CLICK,name:"Pop",description:"\u0411\u044B\u0441\u0442\u0440\u043E\u0435 \u0443\u0432\u0435\u043B\u0438\u0447\u0435\u043D\u0438\u0435",trigger:"click",keyframes:"\n      @keyframes uc-micro-pop {\n        0% { transform: scale(1); }\n        50% { transform: scale(0.95); }\n        100% { transform: scale(1); }\n      }\n    ",duration:200},press:{category:P.CLICK,name:"Press",description:"\u041D\u0430\u0436\u0430\u0442\u0438\u0435",trigger:"click",keyframes:"\n      @keyframes uc-micro-press {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(0.97); }\n      }\n    ",duration:150},flip:{category:P.TOGGLE,name:"Flip",description:"3D \u043F\u0435\u0440\u0435\u0432\u043E\u0440\u043E\u0442",trigger:"toggle",keyframes:"\n      @keyframes uc-micro-flip {\n        0% { transform: perspective(400px) rotateY(0); }\n        100% { transform: perspective(400px) rotateY(180deg); }\n      }\n    ",duration:400},slide:{category:P.TOGGLE,name:"Slide",description:"\u0421\u043A\u043E\u043B\u044C\u0436\u0435\u043D\u0438\u0435",trigger:"toggle",keyframes:"\n      @keyframes uc-micro-slide-on {\n        from { transform: translateX(-100%); }\n        to { transform: translateX(0); }\n      }\n      @keyframes uc-micro-slide-off {\n        from { transform: translateX(0); }\n        to { transform: translateX(100%); }\n      }\n    ",duration:200},morph:{category:P.TOGGLE,name:"Morph",description:"\u0422\u0440\u0430\u043D\u0441\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u0444\u043E\u0440\u043C\u044B",trigger:"toggle"},checkmark:{category:P.SUCCESS,name:"Checkmark",description:"\u0410\u043D\u0438\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u0430\u044F \u0433\u0430\u043B\u043E\u0447\u043A\u0430",trigger:"success",svg:'\n      <svg width="24" height="24" viewBox="0 0 24 24">\n        <path \n          class="uc-checkmark-path"\n          d="M4 12 L9 17 L20 6" \n          fill="none" \n          stroke="currentColor" \n          stroke-width="3"\n          stroke-linecap="round"\n          stroke-linejoin="round"\n        />\n      </svg>\n    ',keyframes:"\n      @keyframes uc-micro-checkmark {\n        0% { stroke-dashoffset: 24; }\n        100% { stroke-dashoffset: 0; }\n      }\n    ",duration:300},confetti:{category:P.SUCCESS,name:"Confetti",description:"\u041A\u043E\u043D\u0444\u0435\u0442\u0442\u0438",trigger:"success",duration:1e3},celebrate:{category:P.SUCCESS,name:"Celebrate",description:"\u041F\u0440\u0430\u0437\u0434\u043D\u043E\u0432\u0430\u043D\u0438\u0435",trigger:"success",keyframes:"\n      @keyframes uc-micro-celebrate {\n        0%, 100% { transform: scale(1) rotate(0); }\n        25% { transform: scale(1.2) rotate(-5deg); }\n        50% { transform: scale(1.2) rotate(5deg); }\n        75% { transform: scale(1.1) rotate(-3deg); }\n      }\n    ",duration:500},shake:{category:P.ERROR,name:"Shake",description:"\u0422\u0440\u044F\u0441\u043A\u0430",trigger:"error",keyframes:"\n      @keyframes uc-micro-shake {\n        0%, 100% { transform: translateX(0); }\n        10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }\n        20%, 40%, 60%, 80% { transform: translateX(4px); }\n      }\n    ",duration:500},cross:{category:P.ERROR,name:"Cross",description:"\u0410\u043D\u0438\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u043A\u0440\u0435\u0441\u0442\u0438\u043A",trigger:"error",svg:'\n      <svg width="24" height="24" viewBox="0 0 24 24">\n        <path \n          class="uc-cross-path-1"\n          d="M6 6 L18 18" \n          fill="none" \n          stroke="currentColor" \n          stroke-width="3"\n          stroke-linecap="round"\n        />\n        <path \n          class="uc-cross-path-2"\n          d="M18 6 L6 18" \n          fill="none" \n          stroke="currentColor" \n          stroke-width="3"\n          stroke-linecap="round"\n        />\n      </svg>\n    ',duration:300},bell:{category:P.NOTIFICATION,name:"Bell",description:"\u0417\u0432\u043E\u043D\u043E\u043A \u043A\u043E\u043B\u043E\u043A\u043E\u043B\u044C\u0447\u0438\u043A\u0430",trigger:"notification",keyframes:"\n      @keyframes uc-micro-bell {\n        0%, 100% { transform: rotate(0); }\n        10%, 30% { transform: rotate(10deg); }\n        20%, 40% { transform: rotate(-10deg); }\n        50% { transform: rotate(5deg); }\n        60% { transform: rotate(-5deg); }\n        70% { transform: rotate(2deg); }\n        80% { transform: rotate(-2deg); }\n      }\n    ",duration:600},badge:{category:P.NOTIFICATION,name:"Badge",description:"\u041F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u0435 \u0431\u0435\u0439\u0434\u0436\u0430",trigger:"notification",keyframes:"\n      @keyframes uc-micro-badge {\n        0% { transform: scale(0); opacity: 0; }\n        50% { transform: scale(1.2); }\n        100% { transform: scale(1); opacity: 1; }\n      }\n    ",duration:300},heartbeat:{category:P.FEEDBACK,name:"Heartbeat",description:"\u0421\u0435\u0440\u0434\u0446\u0435\u0431\u0438\u0435\u043D\u0438\u0435",trigger:"feedback",keyframes:"\n      @keyframes uc-micro-heartbeat {\n        0%, 100% { transform: scale(1); }\n        14% { transform: scale(1.3); }\n        28% { transform: scale(1); }\n        42% { transform: scale(1.3); }\n        70% { transform: scale(1); }\n      }\n    ",duration:800},thumb:{category:P.FEEDBACK,name:"Thumb",description:"\u041B\u0430\u0439\u043A",trigger:"feedback",keyframes:"\n      @keyframes uc-micro-thumb {\n        0% { transform: scale(1); }\n        30% { transform: scale(1.2) rotate(-15deg); }\n        50% { transform: scale(1.3) rotate(0deg); }\n        70% { transform: scale(1.2) rotate(10deg); }\n        100% { transform: scale(1) rotate(0deg); }\n      }\n    ",duration:500}},Et=class{constructor(){this._injectedStyles=new Set}play(e,t,i={}){let r=Pi[t];if(!r){console.warn("[MicroInteractions] Unknown interaction: ".concat(t));return}switch(r.keyframes&&!this._injectedStyles.has(t)&&this._injectStyles(t,r.keyframes),t){case"ripple":this._playRipple(e,i);break;case"confetti":this._playConfetti(e,i);break;case"checkmark":case"cross":this._playSvgAnimation(e,r,i);break;default:this._playKeyframeAnimation(e,r,i)}}_playRipple(e,t={}){let{x:i,y:r,color:s="var(--primary-color, rgba(99, 102, 241, 0.3))"}=t,o=e.getBoundingClientRect(),a=i!==void 0?i-o.left:o.width/2,c=r!==void 0?r-o.top:o.height/2,l=Math.max(o.width,o.height)*2,u=document.createElement("span");u.className="uc-ripple",u.style.cssText="\n      position: absolute;\n      width: ".concat(l,"px;\n      height: ").concat(l,"px;\n      left: ").concat(a-l/2,"px;\n      top: ").concat(c-l/2,"px;\n      background: ").concat(s,";\n      border-radius: 50%;\n      transform: scale(0);\n      opacity: 1;\n      pointer-events: none;\n      animation: uc-micro-ripple 0.6s ease-out forwards;\n    "),e.style.position="relative",e.style.overflow="hidden",e.appendChild(u),setTimeout(()=>u.remove(),600)}_playConfetti(e,t={}){let{count:i=30,colors:r=["#ff0","#f0f","#0ff","#f00","#0f0"]}=t,s=e.getBoundingClientRect(),o=document.createElement("div");o.className="uc-confetti-container",o.style.cssText="\n      position: fixed;\n      top: ".concat(s.top+s.height/2,"px;\n      left: ").concat(s.left+s.width/2,"px;\n      pointer-events: none;\n      z-index: 10000;\n    ");for(let a=0;a<i;a++){let c=document.createElement("span"),l=r[Math.floor(Math.random()*r.length)],u=Math.random()*360*(Math.PI/180),h=50+Math.random()*100,f=Math.cos(u)*h,p=Math.sin(u)*h,_=Math.random()*360;c.style.cssText="\n        position: absolute;\n        width: ".concat(4+Math.random()*4,"px;\n        height: ").concat(4+Math.random()*4,"px;\n        background: ").concat(l,";\n        transform: rotate(").concat(_,"deg);\n        animation: uc-confetti-fall 1s ease-out forwards;\n        --x: ").concat(f,"px;\n        --y: ").concat(p,"px;\n      "),o.appendChild(c)}document.body.appendChild(o),setTimeout(()=>o.remove(),1e3)}_playSvgAnimation(e,t,i={}){let r=document.createElement("div");r.innerHTML=t.svg,r.style.cssText="\n      display: inline-flex;\n      color: ".concat(i.color||"currentColor",";\n    "),r.querySelectorAll("path").forEach((o,a)=>{let c=o.getTotalLength();o.style.strokeDasharray=c,o.style.strokeDashoffset=c,o.style.animation="uc-micro-draw ".concat(t.duration,"ms ease forwards"),o.style.animationDelay="".concat(a*100,"ms")}),i.target?(i.target.innerHTML="",i.target.appendChild(r)):(e.appendChild(r),setTimeout(()=>r.remove(),t.duration+200))}_playKeyframeAnimation(e,t,i={}){let r="uc-micro-".concat(t.name.toLowerCase()),s=i.duration||t.duration;e.style.animation="".concat(r," ").concat(s,"ms ease");let o=()=>{var a;e.style.animation="",e.removeEventListener("animationend",o),(a=i.onComplete)==null||a.call(i)};e.addEventListener("animationend",o)}_injectStyles(e,t){let i=document.createElement("style");i.textContent=t,i.setAttribute("data-uc-micro",e),document.head.appendChild(i),this._injectedStyles.add(e)}bind(e,t,i,r={}){let s=o=>{let a=d({},r);o.clientX!==void 0&&(a.x=o.clientX,a.y=o.clientY),this.play(e,i,a)};return e.addEventListener(t,s),()=>e.removeEventListener(t,s)}static getStyles(){let e=[];for(let[t,i]of Object.entries(Pi))i.keyframes&&e.push(i.keyframes);return e.push("\n      /* Ripple \u044D\u0444\u0444\u0435\u043A\u0442 */\n      @keyframes uc-micro-ripple {\n        to {\n          transform: scale(1);\n          opacity: 0;\n        }\n      }\n\n      .uc-ripple {\n        position: absolute;\n        border-radius: 50%;\n        pointer-events: none;\n      }\n\n      /* Confetti */\n      @keyframes uc-confetti-fall {\n        0% {\n          transform: translate(0, 0) rotate(0deg);\n          opacity: 1;\n        }\n        100% {\n          transform: translate(var(--x), calc(var(--y) + 200px)) rotate(720deg);\n          opacity: 0;\n        }\n      }\n\n      /* SVG \u0440\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435 */\n      @keyframes uc-micro-draw {\n        to {\n          stroke-dashoffset: 0;\n        }\n      }\n\n      /* \u0423\u0442\u0438\u043B\u0438\u0442\u0430\u0440\u043D\u044B\u0435 \u043A\u043B\u0430\u0441\u0441\u044B */\n      .uc-micro-disabled {\n        pointer-events: none;\n      }\n\n      .uc-micro-active {\n        animation-play-state: running;\n      }\n\n      .uc-micro-paused {\n        animation-play-state: paused;\n      }\n    "),e.join("\n")}};var fr={GET:"GET",POST:"POST",PUT:"PUT",PATCH:"PATCH",DELETE:"DELETE"},Te={RAW:"raw",VALUE:"value",TABLE:"table",LIST:"list",TEMPLATE:"template",CHART:"chart"},Ui={url:"",method:fr.GET,headers:{},body:null,refresh_interval:0,timeout:1e4,cache_ttl:6e4,display_format:Te.VALUE,value_path:"",template:"",transform:null,error_message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0434\u0430\u043D\u043D\u044B\u0445",loading_message:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...",show_timestamp:!1,authentication:null},St=class{constructor(e,t={}){this._hass=e,this._config=d(d({},Ui),t),this._element=null,this._data=null,this._error=null,this._loading=!1,this._lastFetch=0,this._refreshInterval=null,this._cache=new Map,this._abortController=null}set hass(e){this._hass=e}setConfig(e){this._config=d(d({},Ui),e),this._stopAutoRefresh(),this._config.refresh_interval>0&&this._startAutoRefresh()}render(){return this._element=document.createElement("div"),this._element.className="uc-rest-widget",this._updateDisplay(),this._fetchData(),this._element}async _fetchData(){let{url:e,method:t,headers:i,body:r,timeout:s,cache_ttl:o}=this._config;if(!e){this._error="URL \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D",this._updateDisplay();return}let a=this._getCacheKey(),c=this._cache.get(a);if(c&&Date.now()-c.timestamp<o){this._data=c.data,this._updateDisplay();return}this._abortController&&this._abortController.abort(),this._abortController=new AbortController,this._loading=!0,this._error=null,this._updateDisplay();try{let l=this._processTemplate(e),u=d({},i);if(this._config.authentication){let _=this._config.authentication;if(_.type==="bearer")u.Authorization="Bearer ".concat(_.token);else if(_.type==="basic"){let y=btoa("".concat(_.username,":").concat(_.password));u.Authorization="Basic ".concat(y)}else _.type==="api_key"&&(u[_.header||"X-API-Key"]=_.key)}let h=await fetch(l,{method:t,headers:u,body:r?JSON.stringify(this._processTemplate(r)):null,signal:this._abortController.signal,timeout:s});if(!h.ok)throw new Error("HTTP ".concat(h.status,": ").concat(h.statusText));let f=h.headers.get("content-type"),p;f!=null&&f.includes("application/json")?p=await h.json():p=await h.text(),this._config.transform&&(p=this._applyTransform(p)),this._cache.set(a,{data:p,timestamp:Date.now()}),this._data=p,this._lastFetch=Date.now(),this._loading=!1,this._error=null}catch(l){if(l.name==="AbortError")return;this._loading=!1,this._error=l.message||this._config.error_message,console.error("[RestApiWidget] Fetch error:",l)}this._updateDisplay()}_getCacheKey(){let{url:e,method:t,body:i}=this._config;return"".concat(t,":").concat(e,":").concat(JSON.stringify(i||{}))}_processTemplate(e){if(typeof e=="string")return e.replace(/\{\{\s*(\w+\.\w+)\s*\}\}/g,(t,i)=>{var r,s,o;return((o=(s=(r=this._hass)==null?void 0:r.states)==null?void 0:s[i])==null?void 0:o.state)||t});if(typeof e=="object"&&e!==null){let t=Array.isArray(e)?[]:{};for(let[i,r]of Object.entries(e))t[i]=this._processTemplate(r);return t}return e}_applyTransform(e){let t=this._config.transform;if(typeof t=="function")return t(e);if(typeof t=="string")try{return new Function("data","return ".concat(t))(e)}catch(i){return console.error("[RestApiWidget] Transform error:",i),e}return e}_getValueByPath(e,t){var s;if(!t)return e;let i=t.split("."),r=e;for(let o of i){let a=o.match(/^(\w+)\[(\d+)\]$/);if(a?r=(s=r==null?void 0:r[a[1]])==null?void 0:s[parseInt(a[2])]:r=r==null?void 0:r[o],r===void 0)return}return r}_updateDisplay(){var a;if(!this._element)return;if(this._loading){this._element.innerHTML='\n        <div class="uc-rest-loading">\n          <div class="uc-rest-spinner"></div>\n          <span>'.concat(this._config.loading_message,"</span>\n        </div>\n      ");return}if(this._error){this._element.innerHTML='\n        <div class="uc-rest-error">\n          <ha-icon icon="mdi:alert-circle"></ha-icon>\n          <span>'.concat(this._error,'</span>\n          <button class="uc-rest-retry">\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C</button>\n        </div>\n      '),(a=this._element.querySelector(".uc-rest-retry"))==null||a.addEventListener("click",()=>{this._fetchData()});return}let{display_format:e,value_path:t,template:i,show_timestamp:r}=this._config,s=this._getValueByPath(this._data,t),o="";switch(e){case Te.RAW:o='<pre class="uc-rest-raw">'.concat(JSON.stringify(s,null,2),"</pre>");break;case Te.VALUE:o='<div class="uc-rest-value">'.concat(this._formatValue(s),"</div>");break;case Te.TABLE:o=this._renderTable(s);break;case Te.LIST:o=this._renderList(s);break;case Te.TEMPLATE:o=this._renderTemplate(i,s);break;case Te.CHART:o=this._renderChart(s);break;default:o='<div class="uc-rest-value">'.concat(this._formatValue(s),"</div>")}if(r&&this._lastFetch){let c=new Date(this._lastFetch).toLocaleTimeString();o+='<div class="uc-rest-timestamp">\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E: '.concat(c,"</div>")}this._element.innerHTML=o}_formatValue(e){return e==null?"-":typeof e=="object"?JSON.stringify(e):String(e)}_renderTable(e){if(!e)return'<div class="uc-rest-empty">\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445</div>';let t=Array.isArray(e)?e:[e];if(t.length===0)return'<div class="uc-rest-empty">\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445</div>';let i=Object.keys(t[0]||{});return'\n      <table class="uc-rest-table">\n        <thead>\n          <tr>\n            '.concat(i.map(r=>"<th>".concat(r,"</th>")).join(""),"\n          </tr>\n        </thead>\n        <tbody>\n          ").concat(t.map(r=>"\n            <tr>\n              ".concat(i.map(s=>"<td>".concat(this._formatValue(r[s]),"</td>")).join(""),"\n            </tr>\n          ")).join(""),"\n        </tbody>\n      </table>\n    ")}_renderList(e){if(!e)return'<div class="uc-rest-empty">\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445</div>';let t=Array.isArray(e)?e:Object.entries(e).map(([i,r])=>({key:i,value:r}));return'\n      <ul class="uc-rest-list">\n        '.concat(t.map(i=>typeof i=="object"?i.key!==void 0?"<li><strong>".concat(i.key,":</strong> ").concat(this._formatValue(i.value),"</li>"):"<li>".concat(this._formatValue(i),"</li>"):"<li>".concat(this._formatValue(i),"</li>")).join(""),"\n      </ul>\n    ")}_renderTemplate(e,t){return e?e.replace(/\{\{\s*([\w.[\]]+)\s*\}\}/g,(i,r)=>{let s=this._getValueByPath(t,r);return this._formatValue(s)}):this._formatValue(t)}_renderChart(e){if(!Array.isArray(e)||e.length===0)return'<div class="uc-rest-empty">\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u0433\u0440\u0430\u0444\u0438\u043A\u0430</div>';let t=e.map(a=>typeof a=="number"?a:a.value||0),i=Math.max(...t),r=Math.min(...t),s=i-r||1,o=t.map((a,c)=>{let l=c/(t.length-1)*100,u=100-(a-r)/s*100;return"".concat(l,",").concat(u)}).join(" ");return'\n      <svg class="uc-rest-chart" viewBox="0 0 100 100" preserveAspectRatio="none">\n        <polyline\n          points="'.concat(o,'"\n          fill="none"\n          stroke="var(--primary-color)"\n          stroke-width="2"\n          vector-effect="non-scaling-stroke"\n        />\n      </svg>\n    ')}_startAutoRefresh(){this._config.refresh_interval<=0||(this._refreshInterval=setInterval(()=>{this._fetchData()},this._config.refresh_interval*1e3))}_stopAutoRefresh(){this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}refresh(){this._cache.clear(),this._fetchData()}destroy(){this._stopAutoRefresh(),this._abortController&&this._abortController.abort(),this._cache.clear(),this._element&&(this._element.remove(),this._element=null)}static getStyles(){return"\n      .uc-rest-widget {\n        width: 100%;\n      }\n\n      .uc-rest-loading {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n        padding: 16px;\n        color: var(--secondary-text-color);\n      }\n\n      .uc-rest-spinner {\n        width: 20px;\n        height: 20px;\n        border: 2px solid var(--divider-color);\n        border-top-color: var(--primary-color);\n        border-radius: 50%;\n        animation: uc-rest-spin 1s linear infinite;\n      }\n\n      @keyframes uc-rest-spin {\n        to { transform: rotate(360deg); }\n      }\n\n      .uc-rest-error {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 8px;\n        padding: 16px;\n        color: var(--error-color);\n        text-align: center;\n      }\n\n      .uc-rest-error ha-icon {\n        --mdc-icon-size: 32px;\n      }\n\n      .uc-rest-retry {\n        padding: 8px 16px;\n        border: none;\n        border-radius: 8px;\n        background: var(--primary-color);\n        color: white;\n        cursor: pointer;\n        font-size: 14px;\n      }\n\n      .uc-rest-retry:hover {\n        filter: brightness(1.1);\n      }\n\n      .uc-rest-value {\n        font-size: 24px;\n        font-weight: 600;\n        text-align: center;\n        padding: 16px;\n      }\n\n      .uc-rest-raw {\n        font-family: monospace;\n        font-size: 12px;\n        background: var(--code-editor-background-color, #f5f5f5);\n        padding: 12px;\n        border-radius: 8px;\n        overflow: auto;\n        max-height: 200px;\n        margin: 0;\n      }\n\n      .uc-rest-table {\n        width: 100%;\n        border-collapse: collapse;\n        font-size: 13px;\n      }\n\n      .uc-rest-table th,\n      .uc-rest-table td {\n        padding: 8px 12px;\n        text-align: left;\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .uc-rest-table th {\n        font-weight: 600;\n        background: var(--secondary-background-color);\n      }\n\n      .uc-rest-list {\n        list-style: none;\n        padding: 0;\n        margin: 0;\n      }\n\n      .uc-rest-list li {\n        padding: 8px 0;\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .uc-rest-list li:last-child {\n        border-bottom: none;\n      }\n\n      .uc-rest-chart {\n        width: 100%;\n        height: 60px;\n        background: var(--secondary-background-color);\n        border-radius: 8px;\n      }\n\n      .uc-rest-empty {\n        padding: 16px;\n        text-align: center;\n        color: var(--secondary-text-color);\n      }\n\n      .uc-rest-timestamp {\n        font-size: 11px;\n        color: var(--secondary-text-color);\n        text-align: right;\n        padding-top: 8px;\n      }\n    "}};var _r={CONTAIN:"contain",COVER:"cover",FILL:"fill",NONE:"none",SCALE_DOWN:"scale-down"},G={CAMERA:"camera",IMAGE:"image",URL:"url",PERSON:"person",LOCAL:"local"},Hi={entity_id:"",url:"",fit:_r.CONTAIN,aspect_ratio:"16:9",refresh_interval:0,show_state:!1,show_name:!1,placeholder:"mdi:image",error_placeholder:"mdi:image-broken",lazy_load:!0,click_action:"more-info",border_radius:8},Ct=class{constructor(e,t={}){this._hass=e,this._config=d(d({},Hi),t),this._element=null,this._imgElement=null,this._refreshInterval=null,this._intersectionObserver=null,this._isVisible=!1,this._errorCount=0}set hass(e){this._hass=e,this._updateImage()}setConfig(e){this._config=d(d({},Hi),e)}render(){return this._element=document.createElement("div"),this._element.className="uc-image-widget",this._applyAspectRatio(),this._element.innerHTML='\n      <div class="uc-image-container">\n        <div class="uc-image-placeholder">\n          <ha-icon icon="'.concat(this._config.placeholder,'"></ha-icon>\n        </div>\n        <img class="uc-image" alt="" />\n        ').concat(this._config.show_name?'<div class="uc-image-name"></div>':"","\n        ").concat(this._config.show_state?'<div class="uc-image-state"></div>':"","\n      </div>\n    "),this._imgElement=this._element.querySelector(".uc-image"),this._imgElement.addEventListener("load",()=>this._onImageLoad()),this._imgElement.addEventListener("error",()=>this._onImageError()),this._config.click_action&&(this._element.addEventListener("click",()=>this._onClick()),this._element.style.cursor="pointer"),this._config.lazy_load?this._setupLazyLoad():this._loadImage(),this._config.refresh_interval>0&&this._startAutoRefresh(),this._element}_applyAspectRatio(){let e=this._config.aspect_ratio;if(e==="auto")this._element.style.aspectRatio="auto";else if(e.includes(":")){let[t,i]=e.split(":").map(Number);this._element.style.aspectRatio="".concat(t,"/").concat(i)}else e.includes("/")?this._element.style.aspectRatio=e:this._element.style.aspectRatio=e}_setupLazyLoad(){this._intersectionObserver=new IntersectionObserver(e=>{e[0].isIntersecting?(this._isVisible=!0,this._loadImage(),!this._getSourceType()===G.CAMERA&&this._intersectionObserver.disconnect()):this._isVisible=!1},{threshold:.1}),this._intersectionObserver.observe(this._element)}_getSourceType(){let{entity_id:e,url:t}=this._config;if(t)return t.startsWith("/local/")?G.LOCAL:G.URL;if(!e)return null;switch(e.split(".")[0]){case"camera":return G.CAMERA;case"image":return G.IMAGE;case"person":return G.PERSON;default:return null}}_getImageUrl(){var r,s,o,a,c,l,u,h;let e=this._getSourceType(),{entity_id:t,url:i}=this._config;switch(e){case G.URL:return i;case G.LOCAL:return i;case G.CAMERA:let f=Date.now();return"/api/camera_proxy/".concat(t,"?token=").concat(((r=this._hass)!=null&&r.hassUrl,""),"&_=").concat(f);case G.IMAGE:let p=(o=(s=this._hass)==null?void 0:s.states)==null?void 0:o[t];return((a=p==null?void 0:p.attributes)==null?void 0:a.entity_picture)||((c=p==null?void 0:p.attributes)==null?void 0:c.url);case G.PERSON:let _=(u=(l=this._hass)==null?void 0:l.states)==null?void 0:u[t];return(h=_==null?void 0:_.attributes)==null?void 0:h.entity_picture;default:return null}}_loadImage(){let e=this._getImageUrl();if(!e){this._showPlaceholder();return}let t=e;if(this._getSourceType()===G.CAMERA){let i=e.includes("?")?"&":"?";t="".concat(e).concat(i,"_=").concat(Date.now())}this._imgElement.src=t,this._element.classList.add("loading")}_updateImage(){this._config.lazy_load&&!this._isVisible||(this._loadImage(),this._updateOverlays())}_updateOverlays(){var s,o,a;let{entity_id:e,show_name:t,show_state:i}=this._config;if(!e)return;let r=(o=(s=this._hass)==null?void 0:s.states)==null?void 0:o[e];if(r){if(t){let c=this._element.querySelector(".uc-image-name");c&&(c.textContent=((a=r.attributes)==null?void 0:a.friendly_name)||e)}if(i){let c=this._element.querySelector(".uc-image-state");c&&(c.textContent=r.state)}}}_onImageLoad(){this._element.classList.remove("loading","error"),this._element.classList.add("loaded"),this._imgElement.style.display="block",this._errorCount=0;let e=this._element.querySelector(".uc-image-placeholder");e&&(e.style.display="none")}_onImageError(){var t;this._element.classList.remove("loading","loaded"),this._element.classList.add("error"),this._imgElement.style.display="none",this._errorCount++;let e=this._element.querySelector(".uc-image-placeholder");e&&(e.style.display="flex",(t=e.querySelector("ha-icon"))==null||t.setAttribute("icon",this._config.error_placeholder)),this._getSourceType()===G.CAMERA&&this._errorCount<3&&setTimeout(()=>this._loadImage(),2e3)}_showPlaceholder(){this._imgElement.style.display="none";let e=this._element.querySelector(".uc-image-placeholder");e&&(e.style.display="flex")}_onClick(){let{click_action:e,entity_id:t}=this._config;switch(e){case"more-info":if(t){let i=new CustomEvent("hass-more-info",{bubbles:!0,composed:!0,detail:{entityId:t}});this._element.dispatchEvent(i)}break;case"fullscreen":this._showFullscreen();break;case"none":break}}_showFullscreen(){let e=this._getImageUrl();if(!e)return;let t=document.createElement("div");t.className="uc-image-fullscreen",t.innerHTML='\n      <img src="'.concat(e,'" />\n      <button class="uc-image-fullscreen-close">\xD7</button>\n    '),t.addEventListener("click",i=>{(i.target===t||i.target.classList.contains("uc-image-fullscreen-close"))&&t.remove()}),document.body.appendChild(t)}_startAutoRefresh(){this._stopAutoRefresh(),this._refreshInterval=setInterval(()=>{(this._isVisible||!this._config.lazy_load)&&this._loadImage()},this._config.refresh_interval*1e3)}_stopAutoRefresh(){this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}destroy(){this._stopAutoRefresh(),this._intersectionObserver&&this._intersectionObserver.disconnect(),this._element&&(this._element.remove(),this._element=null)}static getStyles(){return"\n      .uc-image-widget {\n        position: relative;\n        width: 100%;\n        overflow: hidden;\n        border-radius: var(--ha-card-border-radius, 12px);\n        background: var(--secondary-background-color);\n      }\n\n      .uc-image-container {\n        position: relative;\n        width: 100%;\n        height: 100%;\n      }\n\n      .uc-image {\n        width: 100%;\n        height: 100%;\n        object-fit: var(--uc-image-fit, contain);\n        display: none;\n        transition: opacity 0.3s ease;\n      }\n\n      .uc-image-widget.loaded .uc-image {\n        opacity: 1;\n      }\n\n      .uc-image-placeholder {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: var(--secondary-text-color);\n      }\n\n      .uc-image-placeholder ha-icon {\n        --mdc-icon-size: 48px;\n        opacity: 0.5;\n      }\n\n      .uc-image-widget.loading .uc-image-placeholder ha-icon {\n        animation: uc-image-pulse 1s ease-in-out infinite;\n      }\n\n      @keyframes uc-image-pulse {\n        0%, 100% { opacity: 0.3; }\n        50% { opacity: 0.7; }\n      }\n\n      .uc-image-widget.error .uc-image-placeholder {\n        color: var(--error-color);\n      }\n\n      .uc-image-name,\n      .uc-image-state {\n        position: absolute;\n        left: 0;\n        right: 0;\n        padding: 8px 12px;\n        background: linear-gradient(transparent, rgba(0,0,0,0.7));\n        color: white;\n        font-size: 14px;\n      }\n\n      .uc-image-name {\n        bottom: 0;\n        font-weight: 500;\n      }\n\n      .uc-image-state {\n        top: 0;\n        background: linear-gradient(rgba(0,0,0,0.7), transparent);\n        font-size: 12px;\n        text-transform: capitalize;\n      }\n\n      /* Fullscreen */\n      .uc-image-fullscreen {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.9);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n        cursor: zoom-out;\n      }\n\n      .uc-image-fullscreen img {\n        max-width: 95vw;\n        max-height: 95vh;\n        object-fit: contain;\n      }\n\n      .uc-image-fullscreen-close {\n        position: absolute;\n        top: 16px;\n        right: 16px;\n        width: 40px;\n        height: 40px;\n        border: none;\n        border-radius: 50%;\n        background: rgba(255, 255, 255, 0.2);\n        color: white;\n        font-size: 24px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .uc-image-fullscreen-close:hover {\n        background: rgba(255, 255, 255, 0.3);\n      }\n\n      /* Object-fit \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u044B */\n      .uc-image-contain .uc-image { object-fit: contain; }\n      .uc-image-cover .uc-image { object-fit: cover; }\n      .uc-image-fill .uc-image { object-fit: fill; }\n      .uc-image-none .uc-image { object-fit: none; }\n      .uc-image-scale-down .uc-image { object-fit: scale-down; }\n    "}};var gr={COMPACT:"compact",NORMAL:"normal",FULL:"full"},Fi={entity_id:"",style:gr.NORMAL,show_artwork:!0,show_volume:!0,show_progress:!0,show_source:!1,artwork_border_radius:8,volume_step:5},Tt=class{constructor(e,t={}){this._hass=e,this._config=d(d({},Fi),t),this._element=null,this._progressInterval=null}set hass(e){this._hass=e,this._update()}setConfig(e){this._config=d(d({},Fi),e)}_getState(){var e,t;return(t=(e=this._hass)==null?void 0:e.states)==null?void 0:t[this._config.entity_id]}render(){return this._element=document.createElement("div"),this._element.className="uc-media-mini uc-media-".concat(this._config.style),this._renderContent(),this._bindEvents(),this._startProgressUpdate(),this._element}_renderContent(){var _;let e=this._getState();if(!e){this._element.innerHTML='\n        <div class="uc-media-unavailable">\n          <ha-icon icon="mdi:speaker-off"></ha-icon>\n          <span>\u041D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E</span>\n        </div>\n      ';return}let t=e.state==="playing",i=e.state==="paused",r=e.state==="idle"||e.state==="off",s=e.attributes,o=this._config.show_artwork&&s.entity_picture?'\n      <div class="uc-media-artwork" style="background-image: url(\''.concat(s.entity_picture,"')\">\n        ").concat(t?'<div class="uc-media-playing-indicator"><span></span><span></span><span></span></div>':"","\n      </div>\n    "):"",a=s.media_title||s.friendly_name||this._config.entity_id,c=s.media_artist||s.media_album_name||s.app_name||"",l='\n      <div class="uc-media-controls">\n        <button class="uc-media-btn" data-action="prev" title="\u041F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0438\u0439">\n          <ha-icon icon="mdi:skip-previous"></ha-icon>\n        </button>\n        <button class="uc-media-btn uc-media-btn-main" data-action="play_pause" title="'.concat(t?"\u041F\u0430\u0443\u0437\u0430":"\u0412\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0441\u0442\u0438",'">\n          <ha-icon icon="mdi:').concat(t?"pause":"play",'"></ha-icon>\n        </button>\n        <button class="uc-media-btn" data-action="next" title="\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439">\n          <ha-icon icon="mdi:skip-next"></ha-icon>\n        </button>\n      </div>\n    '),u=this._config.show_progress&&s.media_duration?'\n      <div class="uc-media-progress">\n        <span class="uc-media-time uc-media-time-current">'.concat(this._formatTime(s.media_position||0),'</span>\n        <div class="uc-media-progress-bar">\n          <div class="uc-media-progress-fill" style="width: ').concat(this._getProgressPercent(s),'%"></div>\n        </div>\n        <span class="uc-media-time uc-media-time-duration">').concat(this._formatTime(s.media_duration),"</span>\n      </div>\n    "):"",h=Math.round((s.volume_level||0)*100),f=this._config.show_volume?'\n      <div class="uc-media-volume">\n        <button class="uc-media-btn uc-media-btn-sm" data-action="volume_mute" title="'.concat(s.is_volume_muted?"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0437\u0432\u0443\u043A":"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0437\u0432\u0443\u043A",'">\n          <ha-icon icon="mdi:').concat(s.is_volume_muted?"volume-off":h>50?"volume-high":"volume-medium",'"></ha-icon>\n        </button>\n        <input type="range" class="uc-media-volume-slider" \n               min="0" max="100" value="').concat(h,'"\n               data-action="volume_set" />\n        <span class="uc-media-volume-value">').concat(h,"%</span>\n      </div>\n    "):"",p=this._config.show_source&&((_=s.source_list)!=null&&_.length)?'\n      <div class="uc-media-source">\n        <select class="uc-media-source-select" data-action="source_select">\n          '.concat(s.source_list.map(y=>'\n            <option value="'.concat(y,'" ').concat(y===s.source?"selected":"",">").concat(y,"</option>\n          ")).join(""),"\n        </select>\n      </div>\n    "):"";this._element.innerHTML="\n      ".concat(o,'\n      <div class="uc-media-content">\n        <div class="uc-media-info">\n          <div class="uc-media-title">').concat(a,"</div>\n          ").concat(c?'<div class="uc-media-artist">'.concat(c,"</div>"):"","\n        </div>\n        ").concat(l,"\n        ").concat(u,"\n        ").concat(f,"\n        ").concat(p,"\n      </div>\n    "),this._element.classList.toggle("is-playing",t),this._element.classList.toggle("is-paused",i),this._element.classList.toggle("is-idle",r)}_bindEvents(){this._element.addEventListener("click",r=>{let s=r.target.closest("[data-action]");s&&this._handleAction(s.dataset.action,r)});let e=this._element.querySelector(".uc-media-volume-slider");e&&e.addEventListener("input",r=>{this._setVolume(parseInt(r.target.value)/100)});let t=this._element.querySelector(".uc-media-source-select");t&&t.addEventListener("change",r=>{this._selectSource(r.target.value)});let i=this._element.querySelector(".uc-media-progress-bar");i&&i.addEventListener("click",r=>{let s=i.getBoundingClientRect(),o=(r.clientX-s.left)/s.width;this._seek(o)})}_handleAction(e,t){var r,s;let i=this._config.entity_id;switch(e){case"play_pause":this._hass.callService("media_player","media_play_pause",{entity_id:i});break;case"prev":this._hass.callService("media_player","media_previous_track",{entity_id:i});break;case"next":this._hass.callService("media_player","media_next_track",{entity_id:i});break;case"volume_mute":this._hass.callService("media_player","volume_mute",{entity_id:i,is_volume_muted:!((s=(r=this._getState())==null?void 0:r.attributes)!=null&&s.is_volume_muted)});break}}_setVolume(e){this._hass.callService("media_player","volume_set",{entity_id:this._config.entity_id,volume_level:Math.max(0,Math.min(1,e))})}_selectSource(e){this._hass.callService("media_player","select_source",{entity_id:this._config.entity_id,source:e})}_seek(e){var r;let t=this._getState(),i=(r=t==null?void 0:t.attributes)==null?void 0:r.media_duration;i&&this._hass.callService("media_player","media_seek",{entity_id:this._config.entity_id,seek_position:i*e})}_getProgressPercent(e){return!e.media_duration||!e.media_position?0:Math.min(100,e.media_position/e.media_duration*100)}_formatTime(e){let t=Math.floor(e/60),i=Math.floor(e%60);return"".concat(t,":").concat(i.toString().padStart(2,"0"))}_startProgressUpdate(){this._stopProgressUpdate(),this._progressInterval=setInterval(()=>{let e=this._getState();(e==null?void 0:e.state)==="playing"&&this._updateProgress()},1e3)}_stopProgressUpdate(){this._progressInterval&&(clearInterval(this._progressInterval),this._progressInterval=null)}_updateProgress(){let e=this._getState();if(!e)return;let t=e.attributes,i=this._element.querySelector(".uc-media-progress-fill");i&&(i.style.width="".concat(this._getProgressPercent(t),"%"));let r=this._element.querySelector(".uc-media-time-current");if(r&&t.media_position!==void 0){let s=t.media_position+1;r.textContent=this._formatTime(Math.min(s,t.media_duration||s))}}_update(){this._element&&(this._renderContent(),this._bindEvents())}destroy(){this._stopProgressUpdate(),this._element&&(this._element.remove(),this._element=null)}static getStyles(){return"\n      .uc-media-mini {\n        display: flex;\n        gap: 12px;\n        padding: 12px;\n        background: var(--ha-card-background, white);\n        border-radius: 12px;\n      }\n\n      .uc-media-unavailable {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n        width: 100%;\n        padding: 16px;\n        color: var(--secondary-text-color);\n      }\n\n      .uc-media-artwork {\n        position: relative;\n        width: 80px;\n        height: 80px;\n        border-radius: 8px;\n        background-size: cover;\n        background-position: center;\n        background-color: var(--secondary-background-color);\n        flex-shrink: 0;\n      }\n\n      .uc-media-playing-indicator {\n        position: absolute;\n        bottom: 4px;\n        right: 4px;\n        display: flex;\n        align-items: flex-end;\n        gap: 2px;\n        height: 12px;\n        padding: 2px 4px;\n        background: rgba(0, 0, 0, 0.5);\n        border-radius: 4px;\n      }\n\n      .uc-media-playing-indicator span {\n        width: 3px;\n        background: white;\n        border-radius: 1px;\n        animation: uc-media-equalizer 0.5s ease infinite alternate;\n      }\n\n      .uc-media-playing-indicator span:nth-child(2) {\n        animation-delay: 0.2s;\n      }\n\n      .uc-media-playing-indicator span:nth-child(3) {\n        animation-delay: 0.4s;\n      }\n\n      @keyframes uc-media-equalizer {\n        from { height: 30%; }\n        to { height: 100%; }\n      }\n\n      .uc-media-content {\n        flex: 1;\n        min-width: 0;\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n      }\n\n      .uc-media-info {\n        min-width: 0;\n      }\n\n      .uc-media-title {\n        font-weight: 600;\n        font-size: 14px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .uc-media-artist {\n        font-size: 12px;\n        color: var(--secondary-text-color);\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .uc-media-controls {\n        display: flex;\n        align-items: center;\n        gap: 4px;\n      }\n\n      .uc-media-btn {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 36px;\n        height: 36px;\n        border: none;\n        border-radius: 50%;\n        background: transparent;\n        color: var(--primary-text-color);\n        cursor: pointer;\n        transition: background 0.2s, transform 0.1s;\n      }\n\n      .uc-media-btn:hover {\n        background: var(--secondary-background-color);\n      }\n\n      .uc-media-btn:active {\n        transform: scale(0.95);\n      }\n\n      .uc-media-btn-main {\n        width: 44px;\n        height: 44px;\n        background: var(--primary-color);\n        color: white;\n      }\n\n      .uc-media-btn-main:hover {\n        background: var(--primary-color);\n        filter: brightness(1.1);\n      }\n\n      .uc-media-btn-sm {\n        width: 28px;\n        height: 28px;\n      }\n\n      .uc-media-btn ha-icon {\n        --mdc-icon-size: 20px;\n      }\n\n      .uc-media-btn-main ha-icon {\n        --mdc-icon-size: 24px;\n      }\n\n      .uc-media-progress {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .uc-media-time {\n        font-size: 11px;\n        color: var(--secondary-text-color);\n        min-width: 35px;\n      }\n\n      .uc-media-time-duration {\n        text-align: right;\n      }\n\n      .uc-media-progress-bar {\n        flex: 1;\n        height: 4px;\n        background: var(--divider-color);\n        border-radius: 2px;\n        cursor: pointer;\n        overflow: hidden;\n      }\n\n      .uc-media-progress-fill {\n        height: 100%;\n        background: var(--primary-color);\n        border-radius: 2px;\n        transition: width 0.1s linear;\n      }\n\n      .uc-media-volume {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .uc-media-volume-slider {\n        flex: 1;\n        height: 4px;\n        -webkit-appearance: none;\n        background: var(--divider-color);\n        border-radius: 2px;\n        outline: none;\n      }\n\n      .uc-media-volume-slider::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        width: 12px;\n        height: 12px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n      }\n\n      .uc-media-volume-value {\n        font-size: 11px;\n        color: var(--secondary-text-color);\n        min-width: 30px;\n        text-align: right;\n      }\n\n      .uc-media-source-select {\n        width: 100%;\n        padding: 6px 8px;\n        border: 1px solid var(--divider-color);\n        border-radius: 6px;\n        background: var(--ha-card-background);\n        color: var(--primary-text-color);\n        font-size: 12px;\n        outline: none;\n      }\n\n      /* Compact style */\n      .uc-media-compact .uc-media-artwork {\n        width: 48px;\n        height: 48px;\n      }\n\n      .uc-media-compact .uc-media-progress,\n      .uc-media-compact .uc-media-volume,\n      .uc-media-compact .uc-media-source {\n        display: none;\n      }\n\n      /* Full style */\n      .uc-media-full {\n        flex-direction: column;\n      }\n\n      .uc-media-full .uc-media-artwork {\n        width: 100%;\n        height: auto;\n        aspect-ratio: 1;\n        border-radius: 12px;\n      }\n    "}};var se={INFO:"info",WARNING:"warning",ERROR:"error",SUCCESS:"success"},Bi={max_items:10,show_timestamp:!0,show_source:!0,show_actions:!0,auto_dismiss:0,group_by_source:!1,filter_sources:[],exclude_sources:[],compact:!1},$t=class{constructor(e,t={}){this._hass=e,this._config=d(d({},Bi),t),this._element=null,this._notifications=[],this._dismissedIds=new Set,this._unsubscribe=null}set hass(e){this._hass=e,this._loadNotifications()}setConfig(e){this._config=d(d({},Bi),e)}render(){return this._element=document.createElement("div"),this._element.className="uc-notifications ".concat(this._config.compact?"compact":""),this._loadNotifications(),this._subscribeToUpdates(),this._element}async _loadNotifications(){try{let e=await this._hass.callWS({type:"persistent_notification/get"}),t=[];e&&(t=Object.values(e).map(i=>({id:i.notification_id,title:i.title,message:i.message,created_at:new Date(i.created_at),source:"persistent_notification",type:this._detectType(i),dismissible:!0}))),t=this._filterNotifications(t),t.sort((i,r)=>r.created_at-i.created_at),this._notifications=t.slice(0,this._config.max_items),this._renderNotifications()}catch(e){console.error("[NotificationCenter] Error loading notifications:",e),this._renderError()}}_subscribeToUpdates(){}_filterNotifications(e){let t=e;return t=t.filter(i=>!this._dismissedIds.has(i.id)),this._config.filter_sources.length>0&&(t=t.filter(i=>this._config.filter_sources.includes(i.source))),this._config.exclude_sources.length>0&&(t=t.filter(i=>!this._config.exclude_sources.includes(i.source))),t}_detectType(e){let t=(e.message||"").toLowerCase(),i=(e.title||"").toLowerCase(),r=t+" "+i;return r.includes("error")||r.includes("\u043E\u0448\u0438\u0431\u043A\u0430")||r.includes("failed")?se.ERROR:r.includes("warning")||r.includes("\u043F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0435")||r.includes("\u0432\u043D\u0438\u043C\u0430\u043D\u0438\u0435")?se.WARNING:r.includes("success")||r.includes("\u0443\u0441\u043F\u0435\u0448\u043D\u043E")||r.includes("\u0433\u043E\u0442\u043E\u0432\u043E")?se.SUCCESS:se.INFO}_renderNotifications(){if(!this._element)return;if(this._notifications.length===0){this._element.innerHTML='\n        <div class="uc-notifications-empty">\n          <ha-icon icon="mdi:bell-check"></ha-icon>\n          <span>\u041D\u0435\u0442 \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0439</span>\n        </div>\n      ';return}let e=this._config.group_by_source?this._groupBySource(this._notifications):{all:this._notifications},t="";for(let[i,r]of Object.entries(e))this._config.group_by_source&&i!=="all"&&(t+='<div class="uc-notifications-group-header">'.concat(i,"</div>")),t+=r.map(s=>this._renderNotification(s)).join("");this._element.innerHTML='\n      <div class="uc-notifications-list">\n        '.concat(t,"\n      </div>\n      ").concat(this._notifications.length>0?'\n        <div class="uc-notifications-footer">\n          <button class="uc-notifications-clear-all">\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0432\u0441\u0435</button>\n        </div>\n      ':"","\n    "),this._bindEvents()}_renderNotification(e){let{show_timestamp:t,show_source:i,show_actions:r,compact:s}=this._config,o=this._getTypeIcon(e.type),a="uc-notification-".concat(e.type),c=this._formatTimeAgo(e.created_at);return'\n      <div class="uc-notification '.concat(a,'" data-id="').concat(e.id,'">\n        <div class="uc-notification-icon">\n          <ha-icon icon="').concat(o,'"></ha-icon>\n        </div>\n        <div class="uc-notification-content">\n          ').concat(e.title?'<div class="uc-notification-title">'.concat(e.title,"</div>"):"",'\n          <div class="uc-notification-message">').concat(e.message,'</div>\n          <div class="uc-notification-meta">\n            ').concat(t?'<span class="uc-notification-time">'.concat(c,"</span>"):"","\n            ").concat(i?'<span class="uc-notification-source">'.concat(e.source,"</span>"):"","\n          </div>\n        </div>\n        ").concat(e.dismissible&&r?'\n          <button class="uc-notification-dismiss" data-action="dismiss" title="\u0421\u043A\u0440\u044B\u0442\u044C">\n            <ha-icon icon="mdi:close"></ha-icon>\n          </button>\n        ':"","\n      </div>\n    ")}_renderError(){var e;this._element&&(this._element.innerHTML='\n      <div class="uc-notifications-error">\n        <ha-icon icon="mdi:alert-circle"></ha-icon>\n        <span>\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438</span>\n        <button class="uc-notifications-retry">\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u044C</button>\n      </div>\n    ',(e=this._element.querySelector(".uc-notifications-retry"))==null||e.addEventListener("click",()=>{this._loadNotifications()}))}_groupBySource(e){let t={};for(let i of e){let r=i.source||"other";t[r]||(t[r]=[]),t[r].push(i)}return t}_getTypeIcon(e){return{[se.INFO]:"mdi:information",[se.WARNING]:"mdi:alert",[se.ERROR]:"mdi:alert-circle",[se.SUCCESS]:"mdi:check-circle"}[e]||"mdi:bell"}_formatTimeAgo(e){let i=new Date-e,r=Math.floor(i/1e3),s=Math.floor(r/60),o=Math.floor(s/60),a=Math.floor(o/24);return a>0?"".concat(a," \u0434. \u043D\u0430\u0437\u0430\u0434"):o>0?"".concat(o," \u0447. \u043D\u0430\u0437\u0430\u0434"):s>0?"".concat(s," \u043C\u0438\u043D. \u043D\u0430\u0437\u0430\u0434"):"\u0442\u043E\u043B\u044C\u043A\u043E \u0447\u0442\u043E"}_bindEvents(){var e;this._element.querySelectorAll('[data-action="dismiss"]').forEach(t=>{t.addEventListener("click",i=>{i.stopPropagation();let r=t.closest(".uc-notification"),s=r==null?void 0:r.dataset.id;s&&this._dismissNotification(s)})}),(e=this._element.querySelector(".uc-notifications-clear-all"))==null||e.addEventListener("click",()=>{this._clearAll()}),this._element.querySelectorAll(".uc-notification").forEach(t=>{t.addEventListener("click",()=>{let i=t.dataset.id;this._onNotificationClick(i)})})}async _dismissNotification(e){try{await this._hass.callService("persistent_notification","dismiss",{notification_id:e})}catch(i){}this._dismissedIds.add(e);let t=this._element.querySelector('[data-id="'.concat(e,'"]'));t&&(t.style.animation="uc-notification-dismiss 0.3s ease forwards",setTimeout(()=>{this._notifications=this._notifications.filter(i=>i.id!==e),this._renderNotifications()},300))}async _clearAll(){for(let e of this._notifications)if(e.dismissible){try{await this._hass.callService("persistent_notification","dismiss",{notification_id:e.id})}catch(t){}this._dismissedIds.add(e.id)}this._notifications=[],this._renderNotifications()}_onNotificationClick(e){}addNotification(e){let t={id:e.id||"custom-".concat(Date.now()),title:e.title,message:e.message,created_at:new Date,source:e.source||"custom",type:e.type||se.INFO,dismissible:e.dismissible!==!1};this._notifications.unshift(t),this._notifications.length>this._config.max_items&&this._notifications.pop(),this._renderNotifications(),this._config.auto_dismiss>0&&setTimeout(()=>{this._dismissNotification(t.id)},this._config.auto_dismiss)}destroy(){this._unsubscribe&&this._unsubscribe(),this._element&&(this._element.remove(),this._element=null)}static getStyles(){return"\n      .uc-notifications {\n        width: 100%;\n      }\n\n      .uc-notifications-empty,\n      .uc-notifications-error {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n        padding: 32px 16px;\n        color: var(--secondary-text-color);\n        text-align: center;\n      }\n\n      .uc-notifications-empty ha-icon,\n      .uc-notifications-error ha-icon {\n        --mdc-icon-size: 48px;\n        opacity: 0.5;\n      }\n\n      .uc-notifications-retry {\n        margin-top: 8px;\n        padding: 8px 16px;\n        border: none;\n        border-radius: 8px;\n        background: var(--primary-color);\n        color: white;\n        cursor: pointer;\n      }\n\n      .uc-notifications-list {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n      }\n\n      .uc-notifications-group-header {\n        font-size: 11px;\n        font-weight: 600;\n        text-transform: uppercase;\n        color: var(--secondary-text-color);\n        padding: 8px 0 4px;\n        letter-spacing: 0.5px;\n      }\n\n      .uc-notification {\n        display: flex;\n        gap: 12px;\n        padding: 12px;\n        background: var(--ha-card-background, white);\n        border-radius: 12px;\n        border-left: 4px solid var(--divider-color);\n        cursor: pointer;\n        transition: transform 0.2s, box-shadow 0.2s;\n      }\n\n      .uc-notification:hover {\n        transform: translateX(4px);\n        box-shadow: -4px 0 8px rgba(0, 0, 0, 0.1);\n      }\n\n      .uc-notification-info {\n        border-left-color: var(--info-color, #2196f3);\n      }\n\n      .uc-notification-warning {\n        border-left-color: var(--warning-color, #ff9800);\n      }\n\n      .uc-notification-error {\n        border-left-color: var(--error-color, #f44336);\n      }\n\n      .uc-notification-success {\n        border-left-color: var(--success-color, #4caf50);\n      }\n\n      .uc-notification-icon {\n        flex-shrink: 0;\n        width: 32px;\n        height: 32px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50%;\n        background: var(--secondary-background-color);\n      }\n\n      .uc-notification-info .uc-notification-icon {\n        color: var(--info-color);\n        background: rgba(33, 150, 243, 0.1);\n      }\n\n      .uc-notification-warning .uc-notification-icon {\n        color: var(--warning-color);\n        background: rgba(255, 152, 0, 0.1);\n      }\n\n      .uc-notification-error .uc-notification-icon {\n        color: var(--error-color);\n        background: rgba(244, 67, 54, 0.1);\n      }\n\n      .uc-notification-success .uc-notification-icon {\n        color: var(--success-color);\n        background: rgba(76, 175, 80, 0.1);\n      }\n\n      .uc-notification-content {\n        flex: 1;\n        min-width: 0;\n      }\n\n      .uc-notification-title {\n        font-weight: 600;\n        font-size: 14px;\n        margin-bottom: 4px;\n      }\n\n      .uc-notification-message {\n        font-size: 13px;\n        color: var(--primary-text-color);\n        line-height: 1.4;\n        word-wrap: break-word;\n      }\n\n      .uc-notification-meta {\n        display: flex;\n        gap: 12px;\n        margin-top: 8px;\n        font-size: 11px;\n        color: var(--secondary-text-color);\n      }\n\n      .uc-notification-dismiss {\n        flex-shrink: 0;\n        width: 28px;\n        height: 28px;\n        border: none;\n        border-radius: 50%;\n        background: transparent;\n        color: var(--secondary-text-color);\n        cursor: pointer;\n        opacity: 0;\n        transition: opacity 0.2s, background 0.2s;\n      }\n\n      .uc-notification:hover .uc-notification-dismiss {\n        opacity: 1;\n      }\n\n      .uc-notification-dismiss:hover {\n        background: var(--secondary-background-color);\n      }\n\n      .uc-notifications-footer {\n        display: flex;\n        justify-content: center;\n        padding-top: 12px;\n        margin-top: 8px;\n        border-top: 1px solid var(--divider-color);\n      }\n\n      .uc-notifications-clear-all {\n        padding: 8px 16px;\n        border: none;\n        border-radius: 8px;\n        background: transparent;\n        color: var(--primary-color);\n        cursor: pointer;\n        font-size: 13px;\n      }\n\n      .uc-notifications-clear-all:hover {\n        background: var(--secondary-background-color);\n      }\n\n      @keyframes uc-notification-dismiss {\n        to {\n          opacity: 0;\n          transform: translateX(100%);\n          height: 0;\n          padding: 0;\n          margin: 0;\n        }\n      }\n\n      /* Compact mode */\n      .uc-notifications.compact .uc-notification {\n        padding: 8px;\n        gap: 8px;\n      }\n\n      .uc-notifications.compact .uc-notification-icon {\n        width: 24px;\n        height: 24px;\n      }\n\n      .uc-notifications.compact .uc-notification-icon ha-icon {\n        --mdc-icon-size: 16px;\n      }\n\n      .uc-notifications.compact .uc-notification-title {\n        font-size: 13px;\n      }\n\n      .uc-notifications.compact .uc-notification-message {\n        font-size: 12px;\n      }\n    "}};var g={STRING:"string",NUMBER:"number",BOOLEAN:"boolean",ENTITY:"entity",ICON:"icon",COLOR:"color",SELECT:"select",OBJECT:"object",ARRAY:"array",TEMPLATE:"template",ACTION:"action"},T={ERROR:"error",WARNING:"warning",INFO:"info"},br={title:{type:g.STRING,description:"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438",required:!1},subtitle:{type:g.STRING,description:"\u041F\u043E\u0434\u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",required:!1},icon:{type:g.ICON,description:"\u0418\u043A\u043E\u043D\u043A\u0430 \u0432 \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0435",required:!1,default:"mdi:card"},entity:{type:g.ENTITY,description:"\u041E\u0441\u043D\u043E\u0432\u043D\u0430\u044F entity \u0434\u043B\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438",required:!1},body_mode:{type:g.SELECT,description:"\u0420\u0435\u0436\u0438\u043C \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F \u0442\u0435\u043B\u0430 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438",required:!1,default:"expand",options:Object.values(k)},cards:{type:g.ARRAY,description:"\u041C\u0430\u0441\u0441\u0438\u0432 \u0432\u043B\u043E\u0436\u0435\u043D\u043D\u044B\u0445 \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A",required:!1,items:{type:g.OBJECT}},grid:{type:g.OBJECT,description:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Grid layout",required:!1,properties:{columns:{type:g.NUMBER,description:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043A\u043E\u043B\u043E\u043D\u043E\u043A",min:1,max:12,default:2},gap:{type:g.STRING,description:"\u041E\u0442\u0441\u0442\u0443\u043F \u043C\u0435\u0436\u0434\u0443 \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u043C\u0438",default:"8px"}}},header_left:{type:g.OBJECT,description:"\u0421\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u0441\u043B\u0435\u0432\u0430 \u0432 header"},header_right:{type:g.OBJECT,description:"\u0421\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u0441\u043F\u0440\u0430\u0432\u0430 \u0432 header"},tap_action:{type:g.ACTION,description:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043F\u0440\u0438 \u043A\u043B\u0438\u043A\u0435"},hold_action:{type:g.ACTION,description:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043F\u0440\u0438 \u0434\u043E\u043B\u0433\u043E\u043C \u043D\u0430\u0436\u0430\u0442\u0438\u0438"},double_tap_action:{type:g.ACTION,description:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043F\u0440\u0438 \u0434\u0432\u043E\u0439\u043D\u043E\u043C \u043A\u043B\u0438\u043A\u0435"},visibility:{type:g.ARRAY,description:"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0432\u0438\u0434\u0438\u043C\u043E\u0441\u0442\u0438",items:{type:g.OBJECT}},theme:{type:g.SELECT,description:"\u0422\u0435\u043C\u0430 \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044F",options:["default","glass","neumorphism","neon"]},color_scheme:{type:g.SELECT,description:"\u0426\u0432\u0435\u0442\u043E\u0432\u0430\u044F \u0441\u0445\u0435\u043C\u0430"},lazy_load:{type:g.BOOLEAN,description:"\u041B\u0435\u043D\u0438\u0432\u0430\u044F \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u043A\u043E\u043D\u0442\u0435\u043D\u0442\u0430",default:!0},collapsed:{type:g.BOOLEAN,description:"\u041D\u0430\u0447\u0430\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 (\u0441\u0432\u0451\u0440\u043D\u0443\u0442\u043E)",default:!1},link_group:{type:g.STRING,description:"ID \u0433\u0440\u0443\u043F\u043F\u044B \u0441\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0445 \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A"},link_role:{type:g.SELECT,description:"\u0420\u043E\u043B\u044C \u0432 \u0433\u0440\u0443\u043F\u043F\u0435 \u0441\u0432\u044F\u0437\u044B\u0432\u0430\u043D\u0438\u044F",options:["master","slave"]}},At=class{constructor(){this._schema=br,this._customRules=[]}addRule(e){this._customRules.push(e)}validate(e){let t={valid:!0,errors:[],warnings:[],suggestions:[]};if(!e||typeof e!="object")return t.valid=!1,t.errors.push({path:"",message:"\u041A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u043E\u0431\u044A\u0435\u043A\u0442\u043E\u043C",level:T.ERROR}),t;this._validateSchema(e,this._schema,"",t);for(let i of this._customRules)try{let r=i(e);if(Array.isArray(r))for(let s of r)s.level===T.ERROR?(t.errors.push(s),t.valid=!1):s.level===T.WARNING?t.warnings.push(s):t.suggestions.push(s)}catch(r){console.warn("[ConfigValidator] Rule error:",r)}return this._addSuggestions(e,t),t}_validateSchema(e,t,i,r){for(let[s,o]of Object.entries(t)){let a=i?"".concat(i,".").concat(s):s,c=e[s];if(o.required&&c===void 0){r.errors.push({path:a,message:'\u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u043F\u043E\u043B\u0435 "'.concat(s,'" \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u043E'),level:T.ERROR}),r.valid=!1;continue}c===void 0||!this._validateType(c,o,a,r)||(o.type===g.OBJECT&&o.properties&&this._validateSchema(c,o.properties,a,r),o.type===g.ARRAY&&o.items&&Array.isArray(c)&&c.forEach((u,h)=>{o.items.type===g.OBJECT&&o.items.properties&&this._validateSchema(u,o.items.properties,"".concat(a,"[").concat(h,"]"),r)}),o.type===g.NUMBER&&(o.min!==void 0&&c<o.min&&r.warnings.push({path:a,message:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 ".concat(c," \u043C\u0435\u043D\u044C\u0448\u0435 \u043C\u0438\u043D\u0438\u043C\u0443\u043C\u0430 ").concat(o.min),level:T.WARNING}),o.max!==void 0&&c>o.max&&r.warnings.push({path:a,message:"\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 ".concat(c," \u0431\u043E\u043B\u044C\u0448\u0435 \u043C\u0430\u043A\u0441\u0438\u043C\u0443\u043C\u0430 ").concat(o.max),level:T.WARNING})),o.type===g.SELECT&&o.options&&(o.options.includes(c)||(r.errors.push({path:a,message:'\u041D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 "'.concat(c,'". \u0414\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0435: ').concat(o.options.join(", ")),level:T.ERROR}),r.valid=!1)))}for(let s of Object.keys(e))t[s]||r.warnings.push({path:i?"".concat(i,".").concat(s):s,message:'\u041D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E\u0435 \u043F\u043E\u043B\u0435 "'.concat(s,'"'),level:T.WARNING})}_validateType(e,t,i,r){let{type:s}=t;switch(s){case g.STRING:if(typeof e!="string")return r.errors.push({path:i,message:"\u041E\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044F \u0441\u0442\u0440\u043E\u043A\u0430, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ".concat(typeof e),level:T.ERROR}),r.valid=!1,!1;break;case g.NUMBER:if(typeof e!="number"||isNaN(e))return r.errors.push({path:i,message:"\u041E\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044F \u0447\u0438\u0441\u043B\u043E, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ".concat(typeof e),level:T.ERROR}),r.valid=!1,!1;break;case g.BOOLEAN:if(typeof e!="boolean")return r.errors.push({path:i,message:"\u041E\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044F boolean, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ".concat(typeof e),level:T.ERROR}),r.valid=!1,!1;break;case g.OBJECT:if(typeof e!="object"||e===null||Array.isArray(e))return r.errors.push({path:i,message:"\u041E\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044F \u043E\u0431\u044A\u0435\u043A\u0442",level:T.ERROR}),r.valid=!1,!1;break;case g.ARRAY:if(!Array.isArray(e))return r.errors.push({path:i,message:"\u041E\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044F \u043C\u0430\u0441\u0441\u0438\u0432",level:T.ERROR}),r.valid=!1,!1;break;case g.ENTITY:(typeof e!="string"||!e.includes("."))&&r.warnings.push({path:i,message:'Entity ID \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 "domain.entity"',level:T.WARNING});break;case g.ICON:(typeof e!="string"||!e.includes(":"))&&r.warnings.push({path:i,message:'\u0418\u043A\u043E\u043D\u043A\u0430 \u0434\u043E\u043B\u0436\u043D\u0430 \u0431\u044B\u0442\u044C \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 "mdi:icon-name"',level:T.WARNING});break}return!0}_addSuggestions(e,t){var i,r;((i=e.cards)==null?void 0:i.length)>5&&e.lazy_load!==!0&&t.suggestions.push({path:"lazy_load",message:"\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u0442\u0441\u044F \u0432\u043A\u043B\u044E\u0447\u0438\u0442\u044C lazy_load \u0434\u043B\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0438 \u0441 \u0431\u043E\u043B\u0435\u0435 \u0447\u0435\u043C 5 \u0432\u043B\u043E\u0436\u0435\u043D\u043D\u044B\u043C\u0438 \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430\u043C\u0438",level:T.INFO,fix:{lazy_load:!0}}),((r=e.cards)==null?void 0:r.length)>1&&!e.grid&&t.suggestions.push({path:"grid",message:"\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u0442\u0441\u044F \u043D\u0430\u0441\u0442\u0440\u043E\u0438\u0442\u044C grid layout \u0434\u043B\u044F \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u0438\u0445 \u043A\u0430\u0440\u0442\u043E\u0447\u0435\u043A",level:T.INFO,fix:{grid:{columns:2}}}),(e.state_styles||e.alerts)&&!e.entity&&t.warnings.push({path:"entity",message:"\u0414\u043B\u044F state_styles \u0438 alerts \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u0443\u043A\u0430\u0437\u0430\u0442\u044C entity",level:T.WARNING}),e.body_mode==="tabs"&&(!e.tabs||e.tabs.length===0)&&t.warnings.push({path:"tabs",message:"\u0414\u043B\u044F \u0440\u0435\u0436\u0438\u043C\u0430 tabs \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0443\u043A\u0430\u0437\u0430\u0442\u044C \u043C\u0430\u0441\u0441\u0438\u0432 \u0432\u043A\u043B\u0430\u0434\u043E\u043A",level:T.WARNING})}getCompletions(e=""){let t=[],i=e.split(".").filter(Boolean),r=this._schema;for(let s of i)if(r[s])r=r[s],r.properties&&(r=r.properties);else return[];for(let[s,o]of Object.entries(r))t.push({label:s,type:o.type,description:o.description,required:o.required,default:o.default,options:o.options});return t}getFieldDocumentation(e){let t=e.split(".").filter(Boolean),i=this._schema;for(let r of t)if(i[r])i=i[r],i.properties&&(i=i.properties);else return null;return H(d({},i),{path:e})}static getStyles(){return"\n      .uc-validation-error {\n        color: var(--error-color, #f44336);\n        background: rgba(244, 67, 54, 0.1);\n        padding: 8px 12px;\n        border-radius: 8px;\n        margin: 4px 0;\n        font-size: 13px;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .uc-validation-warning {\n        color: var(--warning-color, #ff9800);\n        background: rgba(255, 152, 0, 0.1);\n        padding: 8px 12px;\n        border-radius: 8px;\n        margin: 4px 0;\n        font-size: 13px;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .uc-validation-suggestion {\n        color: var(--info-color, #2196f3);\n        background: rgba(33, 150, 243, 0.1);\n        padding: 8px 12px;\n        border-radius: 8px;\n        margin: 4px 0;\n        font-size: 13px;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .uc-validation-path {\n        font-family: monospace;\n        font-size: 12px;\n        opacity: 0.7;\n      }\n\n      .uc-validation-fix {\n        margin-left: auto;\n        padding: 4px 8px;\n        border: none;\n        border-radius: 4px;\n        background: currentColor;\n        color: white;\n        font-size: 12px;\n        cursor: pointer;\n        opacity: 0.8;\n      }\n\n      .uc-validation-fix:hover {\n        opacity: 1;\n      }\n    "}};var yr={handle:null,ghostClass:"uc-drag-ghost",dragClass:"uc-dragging",dropZoneClass:"uc-drop-zone",dropActiveClass:"uc-drop-active",animation:200,threshold:10,axis:null,scrollSensitivity:50,scrollSpeed:10},Ot=class{constructor(e,t={}){this._container=e,this._config=d(d({},yr),t),this._items=[],this._draggedItem=null,this._ghost=null,this._placeholder=null,this._startPos={x:0,y:0},this._currentPos={x:0,y:0},this._scrollInterval=null,this._isDragging=!1,this._callbacks={onStart:null,onMove:null,onEnd:null,onReorder:null},this._init()}_init(){this._updateItems(),this._bindEvents()}_updateItems(){this._items=Array.from(this._container.children)}_bindEvents(){this._container.addEventListener("mousedown",this._onMouseDown.bind(this)),document.addEventListener("mousemove",this._onMouseMove.bind(this)),document.addEventListener("mouseup",this._onMouseUp.bind(this)),this._container.addEventListener("touchstart",this._onTouchStart.bind(this),{passive:!1}),document.addEventListener("touchmove",this._onTouchMove.bind(this),{passive:!1}),document.addEventListener("touchend",this._onTouchEnd.bind(this))}on(e,t){this._callbacks.hasOwnProperty(e)&&(this._callbacks[e]=t)}_onMouseDown(e){if(e.button!==0)return;let t=this._getItemFromEvent(e);if(t){if(this._config.handle){let i=e.target.closest(this._config.handle);if(!i||!t.contains(i))return}e.preventDefault(),this._startDrag(t,e.clientX,e.clientY)}}_onTouchStart(e){if(e.touches.length!==1)return;let t=e.touches[0],i=this._getItemFromEvent(e);if(i){if(this._config.handle){let r=e.target.closest(this._config.handle);if(!r||!i.contains(r))return}this._startDrag(i,t.clientX,t.clientY)}}_getItemFromEvent(e){let t=e.target;return this._items.find(i=>i.contains(t))}_startDrag(e,t,i){this._draggedItem=e,this._startPos={x:t,y:i},this._currentPos={x:t,y:i},this._isDragging=!1;let r=e.getBoundingClientRect();this._itemRect=r}_onMouseMove(e){this._draggedItem&&this._handleMove(e.clientX,e.clientY)}_onTouchMove(e){if(!this._draggedItem||e.touches.length!==1)return;let t=e.touches[0];this._handleMove(t.clientX,t.clientY),this._isDragging&&e.preventDefault()}_handleMove(e,t){var s,o,a,c;let i=e-this._startPos.x,r=t-this._startPos.y;if(!this._isDragging){if(Math.sqrt(i*i+r*r)<this._config.threshold)return;this._isDragging=!0,this._createGhost(),this._createPlaceholder(),(o=(s=this._callbacks).onStart)==null||o.call(s,this._draggedItem,this._getItemIndex(this._draggedItem))}this._currentPos={x:e,y:t},this._moveGhost(e,t),this._updateDropPosition(e,t),this._handleAutoScroll(t),(c=(a=this._callbacks).onMove)==null||c.call(a,this._draggedItem,e,t)}_createGhost(){let e=this._itemRect;this._ghost=this._draggedItem.cloneNode(!0),this._ghost.className="".concat(this._draggedItem.className," ").concat(this._config.ghostClass),this._ghost.style.cssText="\n      position: fixed;\n      left: ".concat(e.left,"px;\n      top: ").concat(e.top,"px;\n      width: ").concat(e.width,"px;\n      height: ").concat(e.height,"px;\n      pointer-events: none;\n      z-index: 10000;\n      opacity: 0.8;\n      transform: scale(1.02);\n      box-shadow: 0 8px 24px rgba(0,0,0,0.2);\n      transition: transform 0.1s ease;\n    "),document.body.appendChild(this._ghost),this._draggedItem.classList.add(this._config.dragClass),this._draggedItem.style.opacity="0.3"}_createPlaceholder(){let e=this._itemRect;this._placeholder=document.createElement("div"),this._placeholder.className=this._config.dropZoneClass,this._placeholder.style.cssText="\n      height: ".concat(e.height,"px;\n      background: var(--primary-color, #03a9f4);\n      opacity: 0.2;\n      border-radius: 8px;\n      border: 2px dashed var(--primary-color);\n      transition: all ").concat(this._config.animation,"ms ease;\n    "),this._draggedItem.parentNode.insertBefore(this._placeholder,this._draggedItem)}_moveGhost(e,t){if(!this._ghost)return;let i=e-this._itemRect.width/2,r=t-this._itemRect.height/2;this._config.axis==="x"?r=this._itemRect.top:this._config.axis==="y"&&(i=this._itemRect.left),this._ghost.style.left="".concat(i,"px"),this._ghost.style.top="".concat(r,"px")}_updateDropPosition(e,t){if(!this._placeholder)return;this._updateItems();let i=null;for(let r=0;r<this._items.length;r++){let s=this._items[r];if(s===this._draggedItem||s===this._placeholder)continue;let o=s.getBoundingClientRect(),a=o.top+o.height/2;if(t<a){i=r;break}}if(i!==null){let r=this._items[i];r&&r!==this._placeholder.nextSibling&&this._container.insertBefore(this._placeholder,r)}else this._placeholder.nextSibling!==null&&this._container.appendChild(this._placeholder)}_handleAutoScroll(e){let t=this._container.getBoundingClientRect(),{scrollSensitivity:i,scrollSpeed:r}=this._config;this._scrollInterval&&(clearInterval(this._scrollInterval),this._scrollInterval=null),e<t.top+i?this._scrollInterval=setInterval(()=>{this._container.scrollTop-=r},16):e>t.bottom-i&&(this._scrollInterval=setInterval(()=>{this._container.scrollTop+=r},16))}_onMouseUp(e){this._endDrag()}_onTouchEnd(e){this._endDrag()}_endDrag(){var e,t,i,r;if(this._draggedItem){if(this._scrollInterval&&(clearInterval(this._scrollInterval),this._scrollInterval=null),this._isDragging){let s=this._getItemIndex(this._draggedItem),o=this._getItemIndex(this._placeholder);this._placeholder&&this._placeholder.parentNode&&(this._placeholder.parentNode.insertBefore(this._draggedItem,this._placeholder),this._placeholder.remove()),this._ghost&&(this._ghost.remove(),this._ghost=null),this._draggedItem.classList.remove(this._config.dragClass),this._draggedItem.style.opacity="",s!==o&&((t=(e=this._callbacks).onReorder)==null||t.call(e,s,o,this._draggedItem),m(this._container,"items-reordered",{oldIndex:s,newIndex:o,item:this._draggedItem})),(r=(i=this._callbacks).onEnd)==null||r.call(i,this._draggedItem,o)}this._draggedItem=null,this._placeholder=null,this._isDragging=!1,this._updateItems()}}_getItemIndex(e){return Array.from(this._container.children).indexOf(e)}enable(){this._container.classList.add("uc-drag-enabled")}disable(){this._container.classList.remove("uc-drag-enabled"),this._endDrag()}destroy(){this.disable(),this._container.removeEventListener("mousedown",this._onMouseDown),document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),this._container.removeEventListener("touchstart",this._onTouchStart),document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd)}static getStyles(){return"\n      .uc-drag-enabled {\n        user-select: none;\n        -webkit-user-select: none;\n      }\n\n      .uc-dragging {\n        opacity: 0.3 !important;\n        pointer-events: none;\n      }\n\n      .uc-drag-ghost {\n        cursor: grabbing !important;\n      }\n\n      .uc-drop-zone {\n        background: var(--primary-color, #03a9f4);\n        opacity: 0.2;\n        border-radius: 8px;\n        border: 2px dashed var(--primary-color);\n      }\n\n      .uc-drop-active {\n        background: var(--primary-color);\n        opacity: 0.3;\n      }\n\n      /* Handle \u0434\u043B\u044F \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u043D\u0438\u044F */\n      .uc-drag-handle {\n        cursor: grab;\n        padding: 8px;\n        color: var(--secondary-text-color);\n        transition: color 0.2s;\n      }\n\n      .uc-drag-handle:hover {\n        color: var(--primary-text-color);\n      }\n\n      .uc-drag-handle:active {\n        cursor: grabbing;\n      }\n\n      /* \u0410\u043D\u0438\u043C\u0430\u0446\u0438\u044F \u043F\u0440\u0438 \u043F\u0435\u0440\u0435\u043C\u0435\u0449\u0435\u043D\u0438\u0438 */\n      .uc-drag-enabled > * {\n        transition: transform 0.2s ease;\n      }\n\n      /* \u0418\u043D\u0434\u0438\u043A\u0430\u0442\u043E\u0440 \u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F */\n      .uc-edit-mode {\n        outline: 2px dashed var(--primary-color);\n        outline-offset: 2px;\n      }\n    "}};var I={N:"n",S:"s",E:"e",W:"w",NE:"ne",NW:"nw",SE:"se",SW:"sw"},vr={handles:[I.SE],minWidth:100,minHeight:50,maxWidth:1/0,maxHeight:1/0,grid:[1,1],aspectRatio:null,handleSize:12,handleClass:"uc-resize-handle",resizingClass:"uc-resizing"},It=class{constructor(e,t={}){this._element=e,this._config=d(d({},vr),t),this._handles=new Map,this._isResizing=!1,this._currentHandle=null,this._startRect=null,this._startPos={x:0,y:0},this._callbacks={onStart:null,onResize:null,onEnd:null},this._init()}_init(){this._element.style.position="relative",this._createHandles(),this._bindEvents()}_createHandles(){for(let e of this._config.handles){let t=document.createElement("div");t.className="".concat(this._config.handleClass," ").concat(this._config.handleClass,"-").concat(e),t.dataset.handle=e,this._applyHandleStyles(t,e),this._element.appendChild(t),this._handles.set(e,t)}}_applyHandleStyles(e,t){let i=this._config.handleSize,r=i/2,s={position:"absolute",width:"".concat(i,"px"),height:"".concat(i,"px"),zIndex:"10"},o={[I.N]:{top:"-".concat(r,"px"),left:"50%",transform:"translateX(-50%)",cursor:"ns-resize"},[I.S]:{bottom:"-".concat(r,"px"),left:"50%",transform:"translateX(-50%)",cursor:"ns-resize"},[I.E]:{right:"-".concat(r,"px"),top:"50%",transform:"translateY(-50%)",cursor:"ew-resize"},[I.W]:{left:"-".concat(r,"px"),top:"50%",transform:"translateY(-50%)",cursor:"ew-resize"},[I.NE]:{top:"-".concat(r,"px"),right:"-".concat(r,"px"),cursor:"nesw-resize"},[I.NW]:{top:"-".concat(r,"px"),left:"-".concat(r,"px"),cursor:"nwse-resize"},[I.SE]:{bottom:"-".concat(r,"px"),right:"-".concat(r,"px"),cursor:"nwse-resize"},[I.SW]:{bottom:"-".concat(r,"px"),left:"-".concat(r,"px"),cursor:"nesw-resize"}};Object.assign(e.style,s,o[t])}_bindEvents(){for(let[e,t]of this._handles)t.addEventListener("mousedown",i=>this._onMouseDown(i,e)),t.addEventListener("touchstart",i=>this._onTouchStart(i,e),{passive:!1});document.addEventListener("mousemove",this._onMouseMove.bind(this)),document.addEventListener("mouseup",this._onMouseUp.bind(this)),document.addEventListener("touchmove",this._onTouchMove.bind(this),{passive:!1}),document.addEventListener("touchend",this._onTouchEnd.bind(this))}on(e,t){this._callbacks.hasOwnProperty(e)&&(this._callbacks[e]=t)}_onMouseDown(e,t){e.preventDefault(),e.stopPropagation(),this._startResize(t,e.clientX,e.clientY)}_onTouchStart(e,t){if(e.touches.length!==1)return;e.preventDefault();let i=e.touches[0];this._startResize(t,i.clientX,i.clientY)}_startResize(e,t,i){var r,s,o;this._isResizing=!0,this._currentHandle=e,this._startPos={x:t,y:i},this._startRect=this._element.getBoundingClientRect(),this._element.classList.add(this._config.resizingClass),document.body.style.cursor=((r=this._handles.get(e))==null?void 0:r.style.cursor)||"default",document.body.style.userSelect="none",(o=(s=this._callbacks).onStart)==null||o.call(s,{handle:e,width:this._startRect.width,height:this._startRect.height})}_onMouseMove(e){this._isResizing&&this._handleResize(e.clientX,e.clientY)}_onTouchMove(e){if(!this._isResizing||e.touches.length!==1)return;e.preventDefault();let t=e.touches[0];this._handleResize(t.clientX,t.clientY)}_handleResize(e,t){var l,u;let i=e-this._startPos.x,r=t-this._startPos.y,s=this._startRect.width,o=this._startRect.height,a=null,c=null;switch(this._currentHandle){case I.N:o=this._startRect.height-r,c=this._startRect.top+r;break;case I.S:o=this._startRect.height+r;break;case I.E:s=this._startRect.width+i;break;case I.W:s=this._startRect.width-i,a=this._startRect.left+i;break;case I.NE:s=this._startRect.width+i,o=this._startRect.height-r,c=this._startRect.top+r;break;case I.NW:s=this._startRect.width-i,o=this._startRect.height-r,a=this._startRect.left+i,c=this._startRect.top+r;break;case I.SE:s=this._startRect.width+i,o=this._startRect.height+r;break;case I.SW:s=this._startRect.width-i,o=this._startRect.height+r,a=this._startRect.left+i;break}if(s=Math.max(this._config.minWidth,Math.min(this._config.maxWidth,s)),o=Math.max(this._config.minHeight,Math.min(this._config.maxHeight,o)),this._config.grid[0]>1&&(s=Math.round(s/this._config.grid[0])*this._config.grid[0]),this._config.grid[1]>1&&(o=Math.round(o/this._config.grid[1])*this._config.grid[1]),this._config.aspectRatio){let h=this._config.aspectRatio;s/h>o?s=o*h:o=s/h}this._element.style.width="".concat(s,"px"),this._element.style.height="".concat(o,"px"),(u=(l=this._callbacks).onResize)==null||u.call(l,{handle:this._currentHandle,width:s,height:o,deltaX:i,deltaY:r})}_onMouseUp(){this._endResize()}_onTouchEnd(){this._endResize()}_endResize(){var t,i;if(!this._isResizing)return;this._isResizing=!1,this._element.classList.remove(this._config.resizingClass),document.body.style.cursor="",document.body.style.userSelect="";let e=this._element.getBoundingClientRect();(i=(t=this._callbacks).onEnd)==null||i.call(t,{handle:this._currentHandle,width:e.width,height:e.height}),m(this._element,"card-resized",{width:e.width,height:e.height}),this._currentHandle=null,this._startRect=null}setSize(e,t){this._element.style.width="".concat(e,"px"),this._element.style.height="".concat(t,"px")}getSize(){let e=this._element.getBoundingClientRect();return{width:e.width,height:e.height}}showHandles(){for(let e of this._handles.values())e.style.display=""}hideHandles(){for(let e of this._handles.values())e.style.display="none"}destroy(){for(let e of this._handles.values())e.remove();this._handles.clear(),document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("touchmove",this._onTouchMove),document.removeEventListener("touchend",this._onTouchEnd)}static getStyles(){return"\n      .uc-resize-handle {\n        background: var(--primary-color, #03a9f4);\n        border-radius: 50%;\n        opacity: 0;\n        transition: opacity 0.2s;\n      }\n\n      .uc-resize-handle::after {\n        content: '';\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: 6px;\n        height: 6px;\n        background: white;\n        border-radius: 50%;\n      }\n\n      *:hover > .uc-resize-handle,\n      .uc-resizing .uc-resize-handle {\n        opacity: 1;\n      }\n\n      .uc-resize-handle:hover {\n        transform: scale(1.2);\n      }\n\n      .uc-resizing {\n        opacity: 0.8;\n        outline: 2px solid var(--primary-color);\n      }\n\n      /* \u0421\u043F\u0435\u0446\u0438\u0444\u0438\u0447\u043D\u044B\u0435 \u0441\u0442\u0438\u043B\u0438 \u0434\u043B\u044F \u0443\u0433\u043B\u043E\u0432\u044B\u0445 handles */\n      .uc-resize-handle-se {\n        background: var(--primary-color);\n        border-radius: 0;\n        width: 16px !important;\n        height: 16px !important;\n        clip-path: polygon(100% 0, 100% 100%, 0 100%);\n      }\n\n      .uc-resize-handle-se::after {\n        display: none;\n      }\n\n      /* Grid preview \u043F\u0440\u0438 resize */\n      .uc-resize-grid-preview {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: repeating-linear-gradient(\n          0deg,\n          transparent,\n          transparent 49px,\n          var(--divider-color) 49px,\n          var(--divider-color) 50px\n        ),\n        repeating-linear-gradient(\n          90deg,\n          transparent,\n          transparent 49px,\n          var(--divider-color) 49px,\n          var(--divider-color) 50px\n        );\n        pointer-events: none;\n        opacity: 0;\n        transition: opacity 0.2s;\n      }\n\n      .uc-resizing .uc-resize-grid-preview {\n        opacity: 0.3;\n      }\n\n      /* \u0420\u0430\u0437\u043C\u0435\u0440\u044B \u0432 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u043C \u0432\u0440\u0435\u043C\u0435\u043D\u0438 */\n      .uc-resize-dimensions {\n        position: absolute;\n        bottom: 100%;\n        left: 50%;\n        transform: translateX(-50%);\n        background: var(--primary-color);\n        color: white;\n        padding: 4px 8px;\n        border-radius: 4px;\n        font-size: 12px;\n        white-space: nowrap;\n        opacity: 0;\n        transition: opacity 0.2s;\n        pointer-events: none;\n      }\n\n      .uc-resizing .uc-resize-dimensions {\n        opacity: 1;\n      }\n    "}};var oe={NONE:"none",PARTIAL:"partial",FULL:"full"},Be={EDIT:"edit",DELETE:"delete",MOVE:"move",RESIZE:"resize",DUPLICATE:"duplicate"},xr={level:oe.NONE,lockedActions:[],password:null,showIndicator:!0,indicatorPosition:"top-right"},Lt=class{constructor(e,t={}){this._element=e,this._config=d(d({},xr),t),this._isLocked=this._config.level!==oe.NONE,this._indicator=null,this._callbacks={onLock:null,onUnlock:null,onAttempt:null},this._init()}_init(){this._config.showIndicator&&this._isLocked&&this._createIndicator(),this._updateElementState()}_createIndicator(){this._indicator=document.createElement("div"),this._indicator.className="uc-lock-indicator uc-lock-".concat(this._config.indicatorPosition),this._indicator.innerHTML='\n      <ha-icon icon="mdi:lock"></ha-icon>\n      '.concat(this._config.level===oe.FULL?"<span>\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043E</span>":"","\n    "),this._indicator.addEventListener("click",e=>{e.stopPropagation(),this._showUnlockDialog()}),this._element.appendChild(this._indicator)}_removeIndicator(){this._indicator&&(this._indicator.remove(),this._indicator=null)}_updateElementState(){this._element.classList.toggle("uc-locked",this._isLocked),this._element.classList.toggle("uc-locked-full",this._config.level===oe.FULL),this._element.classList.toggle("uc-locked-partial",this._config.level===oe.PARTIAL),this._element.dataset.lockLevel=this._config.level}on(e,t){this._callbacks.hasOwnProperty(e)&&(this._callbacks[e]=t)}lock(e=oe.FULL,t=[]){var i,r;this._config.level=e,this._config.lockedActions=t,this._isLocked=e!==oe.NONE,this._config.showIndicator&&this._isLocked&&!this._indicator&&this._createIndicator(),this._updateElementState(),(r=(i=this._callbacks).onLock)==null||r.call(i,e,t),m(this._element,"lock-changed",{locked:!0,level:e,actions:t})}unlock(e=null){var t,i;return this._config.password&&e!==this._config.password?(this._showError("\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"),!1):(this._config.level=oe.NONE,this._isLocked=!1,this._removeIndicator(),this._updateElementState(),(i=(t=this._callbacks).onUnlock)==null||i.call(t),m(this._element,"lock-changed",{locked:!1}),!0)}toggle(){return this._isLocked?!this.unlock():(this.lock(),!0)}isActionLocked(e){return this._isLocked?this._config.level===oe.FULL||this._config.lockedActions.length===0?!0:this._config.lockedActions.includes(e):!1}attemptAction(e,t){var i,r;return this.isActionLocked(e)?((r=(i=this._callbacks).onAttempt)==null||r.call(i,e),this._showBlockedMessage(e),!1):(t==null||t(),!0)}_showBlockedMessage(e){let t={[Be.EDIT]:"\u0440\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435",[Be.DELETE]:"\u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0435",[Be.MOVE]:"\u043F\u0435\u0440\u0435\u043C\u0435\u0449\u0435\u043D\u0438\u0435",[Be.RESIZE]:"\u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0435 \u0440\u0430\u0437\u043C\u0435\u0440\u0430",[Be.DUPLICATE]:"\u0434\u0443\u0431\u043B\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435"},i='\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 "'.concat(t[e]||e,'" \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043E');this._showToast(i,"warning")}_showUnlockDialog(){if(!this._config.password){this.unlock();return}let e=document.createElement("div");e.className="uc-lock-dialog",e.innerHTML='\n      <div class="uc-lock-dialog-backdrop"></div>\n      <div class="uc-lock-dialog-content">\n        <div class="uc-lock-dialog-header">\n          <ha-icon icon="mdi:lock"></ha-icon>\n          <span>\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0430</span>\n        </div>\n        <div class="uc-lock-dialog-body">\n          <input type="password" \n                 class="uc-lock-password" \n                 placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C" \n                 autocomplete="off" />\n        </div>\n        <div class="uc-lock-dialog-footer">\n          <button class="uc-lock-btn uc-lock-btn-cancel">\u041E\u0442\u043C\u0435\u043D\u0430</button>\n          <button class="uc-lock-btn uc-lock-btn-unlock">\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C</button>\n        </div>\n      </div>\n    ';let t=e.querySelector(".uc-lock-password"),i=e.querySelector(".uc-lock-btn-cancel"),r=e.querySelector(".uc-lock-btn-unlock"),s=e.querySelector(".uc-lock-dialog-backdrop"),o=()=>e.remove();s.addEventListener("click",o),i.addEventListener("click",o),r.addEventListener("click",()=>{this.unlock(t.value)?o():(t.classList.add("error"),t.value="",t.focus())}),t.addEventListener("keypress",a=>{a.key==="Enter"&&r.click()}),document.body.appendChild(e),t.focus()}_showError(e){this._showToast(e,"error")}_showToast(e,t="info"){let i=document.createElement("div");i.className="uc-lock-toast uc-lock-toast-".concat(t),i.innerHTML='\n      <ha-icon icon="mdi:'.concat(t==="error"?"alert-circle":"information",'"></ha-icon>\n      <span>').concat(e,"</span>\n    "),document.body.appendChild(i),requestAnimationFrame(()=>{i.classList.add("visible")}),setTimeout(()=>{i.classList.remove("visible"),setTimeout(()=>i.remove(),300)},3e3)}getState(){return{locked:this._isLocked,level:this._config.level,lockedActions:this._config.lockedActions,hasPassword:!!this._config.password}}setPassword(e){this._config.password=e}destroy(){this._removeIndicator(),this._element.classList.remove("uc-locked","uc-locked-full","uc-locked-partial"),delete this._element.dataset.lockLevel}static getStyles(){return"\n      /* \u0418\u043D\u0434\u0438\u043A\u0430\u0442\u043E\u0440 \u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u043A\u0438 */\n      .uc-lock-indicator {\n        position: absolute;\n        display: flex;\n        align-items: center;\n        gap: 4px;\n        padding: 4px 8px;\n        background: var(--error-color, #f44336);\n        color: white;\n        border-radius: 4px;\n        font-size: 12px;\n        cursor: pointer;\n        z-index: 100;\n        transition: transform 0.2s, opacity 0.2s;\n      }\n\n      .uc-lock-indicator:hover {\n        transform: scale(1.05);\n      }\n\n      .uc-lock-indicator ha-icon {\n        --mdc-icon-size: 16px;\n      }\n\n      .uc-lock-top-right { top: 8px; right: 8px; }\n      .uc-lock-top-left { top: 8px; left: 8px; }\n      .uc-lock-bottom-right { bottom: 8px; right: 8px; }\n      .uc-lock-bottom-left { bottom: 8px; left: 8px; }\n\n      /* \u0421\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0433\u043E \u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430 */\n      .uc-locked {\n        pointer-events: auto;\n      }\n\n      .uc-locked-full::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.05);\n        z-index: 50;\n        pointer-events: none;\n      }\n\n      /* \u0414\u0438\u0430\u043B\u043E\u0433 */\n      .uc-lock-dialog {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 10001;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .uc-lock-dialog-backdrop {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.5);\n        backdrop-filter: blur(4px);\n      }\n\n      .uc-lock-dialog-content {\n        position: relative;\n        background: var(--ha-card-background, white);\n        border-radius: 16px;\n        width: 300px;\n        overflow: hidden;\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n        animation: uc-lock-dialog-appear 0.2s ease;\n      }\n\n      @keyframes uc-lock-dialog-appear {\n        from {\n          transform: scale(0.9);\n          opacity: 0;\n        }\n        to {\n          transform: scale(1);\n          opacity: 1;\n        }\n      }\n\n      .uc-lock-dialog-header {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 16px;\n        background: var(--primary-color);\n        color: white;\n        font-weight: 600;\n      }\n\n      .uc-lock-dialog-body {\n        padding: 16px;\n      }\n\n      .uc-lock-password {\n        width: 100%;\n        padding: 12px;\n        border: 2px solid var(--divider-color);\n        border-radius: 8px;\n        font-size: 14px;\n        outline: none;\n        transition: border-color 0.2s;\n      }\n\n      .uc-lock-password:focus {\n        border-color: var(--primary-color);\n      }\n\n      .uc-lock-password.error {\n        border-color: var(--error-color);\n        animation: uc-lock-shake 0.3s;\n      }\n\n      @keyframes uc-lock-shake {\n        0%, 100% { transform: translateX(0); }\n        25% { transform: translateX(-5px); }\n        75% { transform: translateX(5px); }\n      }\n\n      .uc-lock-dialog-footer {\n        display: flex;\n        justify-content: flex-end;\n        gap: 8px;\n        padding: 12px 16px;\n        border-top: 1px solid var(--divider-color);\n      }\n\n      .uc-lock-btn {\n        padding: 8px 16px;\n        border: none;\n        border-radius: 8px;\n        font-size: 14px;\n        cursor: pointer;\n        transition: all 0.2s;\n      }\n\n      .uc-lock-btn-cancel {\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n      }\n\n      .uc-lock-btn-unlock {\n        background: var(--primary-color);\n        color: white;\n      }\n\n      .uc-lock-btn:hover {\n        filter: brightness(1.1);\n      }\n\n      /* Toast */\n      .uc-lock-toast {\n        position: fixed;\n        bottom: 20px;\n        left: 50%;\n        transform: translateX(-50%) translateY(100px);\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 12px 20px;\n        background: var(--primary-text-color);\n        color: var(--primary-background-color);\n        border-radius: 8px;\n        font-size: 14px;\n        z-index: 10002;\n        opacity: 0;\n        transition: transform 0.3s, opacity 0.3s;\n      }\n\n      .uc-lock-toast.visible {\n        transform: translateX(-50%) translateY(0);\n        opacity: 1;\n      }\n\n      .uc-lock-toast-error {\n        background: var(--error-color);\n        color: white;\n      }\n\n      .uc-lock-toast-warning {\n        background: var(--warning-color);\n        color: white;\n      }\n    "}};var Y=class{constructor(e={}){this._config=e,this._element=null}render(){throw new Error("render() must be implemented")}getValue(){throw new Error("getValue() must be implemented")}setValue(e){throw new Error("setValue() must be implemented")}},Nt=class extends Y{render(){return this._element=document.createElement("div"),this._element.className="uc-editor-field",this._element.innerHTML="\n      ".concat(this._config.label?'<label class="uc-editor-label">'.concat(this._config.label,"</label>"):"",'\n      <input type="').concat(this._config.type||"text",'" \n             class="uc-editor-input"\n             placeholder="').concat(this._config.placeholder||"",'"\n             value="').concat(this._config.value||"",'"\n             ').concat(this._config.required?"required":""," />\n      ").concat(this._config.helper?'<span class="uc-editor-helper">'.concat(this._config.helper,"</span>"):"","\n    "),this._input=this._element.querySelector("input"),this._input.addEventListener("input",()=>{m(this._element,"value-changed",{value:this.getValue()})}),this._element}getValue(){var e;return((e=this._input)==null?void 0:e.value)||""}setValue(e){this._input&&(this._input.value=e||"")}},Rt=class extends Y{render(){var e,t,i,r;return this._element=document.createElement("div"),this._element.className="uc-editor-field",this._element.innerHTML="\n      ".concat(this._config.label?'<label class="uc-editor-label">'.concat(this._config.label,"</label>"):"",'\n      <input type="number" \n             class="uc-editor-input"\n             min="').concat((e=this._config.min)!=null?e:"",'"\n             max="').concat((t=this._config.max)!=null?t:"",'"\n             step="').concat((i=this._config.step)!=null?i:1,'"\n             value="').concat((r=this._config.value)!=null?r:"",'"\n             ').concat(this._config.required?"required":""," />\n      ").concat(this._config.helper?'<span class="uc-editor-helper">'.concat(this._config.helper,"</span>"):"","\n    "),this._input=this._element.querySelector("input"),this._input.addEventListener("input",()=>{m(this._element,"value-changed",{value:this.getValue()})}),this._element}getValue(){var t;let e=(t=this._input)==null?void 0:t.value;return e!==""?Number(e):null}setValue(e){this._input&&(this._input.value=e!=null?e:"")}},Mt=class extends Y{render(){return this._element=document.createElement("div"),this._element.className="uc-editor-field uc-editor-checkbox",this._element.innerHTML='\n      <label class="uc-editor-checkbox-label">\n        <input type="checkbox" '.concat(this._config.value?"checked":"",' />\n        <span class="uc-editor-checkbox-custom"></span>\n        <span class="uc-editor-checkbox-text">').concat(this._config.label||"","</span>\n      </label>\n      ").concat(this._config.helper?'<span class="uc-editor-helper">'.concat(this._config.helper,"</span>"):"","\n    "),this._input=this._element.querySelector("input"),this._input.addEventListener("change",()=>{m(this._element,"value-changed",{value:this.getValue()})}),this._element}getValue(){var e;return((e=this._input)==null?void 0:e.checked)||!1}setValue(e){this._input&&(this._input.checked=!!e)}},Dt=class extends Y{render(){this._element=document.createElement("div"),this._element.className="uc-editor-field";let e=(this._config.options||[]).map(t=>{let i=typeof t=="object"?t.value:t,r=typeof t=="object"?t.label:t,s=i===this._config.value?"selected":"";return'<option value="'.concat(i,'" ').concat(s,">").concat(r,"</option>")}).join("");return this._element.innerHTML="\n      ".concat(this._config.label?'<label class="uc-editor-label">'.concat(this._config.label,"</label>"):"",'\n      <select class="uc-editor-select">\n        ').concat(this._config.placeholder?'<option value="">'.concat(this._config.placeholder,"</option>"):"","\n        ").concat(e,"\n      </select>\n      ").concat(this._config.helper?'<span class="uc-editor-helper">'.concat(this._config.helper,"</span>"):"","\n    "),this._select=this._element.querySelector("select"),this._select.addEventListener("change",()=>{m(this._element,"value-changed",{value:this.getValue()})}),this._element}getValue(){var e;return((e=this._select)==null?void 0:e.value)||""}setValue(e){this._select&&(this._select.value=e||"")}},zt=class extends Y{render(){var e;return this._element=document.createElement("div"),this._element.className="uc-editor-field",this._element.innerHTML="\n      ".concat(this._config.label?'<label class="uc-editor-label">'.concat(this._config.label,"</label>"):"",'\n      <ha-entity-picker\n        .hass="').concat(this._config.hass,'"\n        .value="').concat(this._config.value||"",'"\n        .includeDomains="').concat(this._config.domains,'"\n        allow-custom-entity\n      ></ha-entity-picker>\n      ').concat(this._config.helper?'<span class="uc-editor-helper">'.concat(this._config.helper,"</span>"):"","\n    "),this._picker=this._element.querySelector("ha-entity-picker"),(e=this._picker)==null||e.addEventListener("value-changed",t=>{m(this._element,"value-changed",{value:t.detail.value})}),this._element}getValue(){var e;return((e=this._picker)==null?void 0:e.value)||""}setValue(e){this._picker&&(this._picker.value=e||"")}},Pt=class extends Y{render(){var e;return this._element=document.createElement("div"),this._element.className="uc-editor-field",this._element.innerHTML="\n      ".concat(this._config.label?'<label class="uc-editor-label">'.concat(this._config.label,"</label>"):"",'\n      <ha-icon-picker\n        .hass="').concat(this._config.hass,'"\n        .value="').concat(this._config.value||"",'"\n      ></ha-icon-picker>\n      ').concat(this._config.helper?'<span class="uc-editor-helper">'.concat(this._config.helper,"</span>"):"","\n    "),this._picker=this._element.querySelector("ha-icon-picker"),(e=this._picker)==null||e.addEventListener("value-changed",t=>{m(this._element,"value-changed",{value:t.detail.value})}),this._element}getValue(){var e;return((e=this._picker)==null?void 0:e.value)||""}setValue(e){this._picker&&(this._picker.value=e||"")}},Ut=class extends Y{render(){return this._element=document.createElement("div"),this._element.className="uc-editor-field uc-editor-color",this._element.innerHTML="\n      ".concat(this._config.label?'<label class="uc-editor-label">'.concat(this._config.label,"</label>"):"",'\n      <div class="uc-editor-color-wrapper">\n        <input type="color" \n               class="uc-editor-color-input"\n               value="').concat(this._config.value||"#ffffff",'" />\n        <input type="text" \n               class="uc-editor-color-text"\n               value="').concat(this._config.value||"",'"\n               placeholder="#ffffff" />\n      </div>\n      ').concat(this._config.helper?'<span class="uc-editor-helper">'.concat(this._config.helper,"</span>"):"","\n    "),this._colorInput=this._element.querySelector(".uc-editor-color-input"),this._textInput=this._element.querySelector(".uc-editor-color-text"),this._colorInput.addEventListener("input",()=>{this._textInput.value=this._colorInput.value,m(this._element,"value-changed",{value:this.getValue()})}),this._textInput.addEventListener("input",()=>{/^#[0-9a-fA-F]{6}$/.test(this._textInput.value)&&(this._colorInput.value=this._textInput.value),m(this._element,"value-changed",{value:this.getValue()})}),this._element}getValue(){var e;return((e=this._textInput)==null?void 0:e.value)||""}setValue(e){this._colorInput&&this._textInput&&(this._colorInput.value=e||"#ffffff",this._textInput.value=e||"")}},Ht=class extends Y{render(){return this._element=document.createElement("div"),this._element.className="uc-editor-section ".concat(this._config.expanded?"expanded":""),this._element.innerHTML='\n      <div class="uc-editor-section-header">\n        <ha-icon icon="mdi:'.concat(this._config.icon||"chevron-right",'" class="uc-editor-section-icon"></ha-icon>\n        <span class="uc-editor-section-title">').concat(this._config.title||"",'</span>\n        <ha-icon icon="mdi:chevron-down" class="uc-editor-section-chevron"></ha-icon>\n      </div>\n      <div class="uc-editor-section-content"></div>\n    '),this._header=this._element.querySelector(".uc-editor-section-header"),this._content=this._element.querySelector(".uc-editor-section-content"),this._header.addEventListener("click",()=>{this._element.classList.toggle("expanded")}),this._element}addContent(e){e instanceof Y?this._content.appendChild(e.render()):this._content.appendChild(e)}getValue(){return null}setValue(){}},Ft=class extends Y{render(){var i;this._element=document.createElement("div"),this._element.className="uc-editor-field uc-editor-action";let e=[{value:"none",label:"\u041D\u0435\u0442 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F"},{value:"more-info",label:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"},{value:"toggle",label:"\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0438\u0442\u044C"},{value:"call-service",label:"\u0412\u044B\u0437\u0432\u0430\u0442\u044C \u0441\u0435\u0440\u0432\u0438\u0441"},{value:"navigate",label:"\u041D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044F"},{value:"url",label:"\u041E\u0442\u043A\u0440\u044B\u0442\u044C URL"}],t=((i=this._config.value)==null?void 0:i.action)||"none";return this._element.innerHTML="\n      ".concat(this._config.label?'<label class="uc-editor-label">'.concat(this._config.label,"</label>"):"",'\n      <select class="uc-editor-select uc-editor-action-type">\n        ').concat(e.map(r=>'\n          <option value="'.concat(r.value,'" ').concat(r.value===t?"selected":"",">").concat(r.label,"</option>\n        ")).join(""),'\n      </select>\n      <div class="uc-editor-action-options"></div>\n    '),this._typeSelect=this._element.querySelector(".uc-editor-action-type"),this._optionsContainer=this._element.querySelector(".uc-editor-action-options"),this._typeSelect.addEventListener("change",()=>{this._updateOptions(),m(this._element,"value-changed",{value:this.getValue()})}),this._updateOptions(),this._element}_updateOptions(){var t,i,r,s;let e=this._typeSelect.value;switch(this._optionsContainer.innerHTML="",e){case"call-service":this._optionsContainer.innerHTML='\n          <input type="text" \n                 class="uc-editor-input action-service" \n                 placeholder="domain.service"\n                 value="'.concat(((t=this._config.value)==null?void 0:t.service)||"",'" />\n          <textarea class="uc-editor-textarea action-data" \n                    placeholder="service_data (YAML)">').concat((i=this._config.value)!=null&&i.service_data?JSON.stringify(this._config.value.service_data,null,2):"","</textarea>\n        ");break;case"navigate":this._optionsContainer.innerHTML='\n          <input type="text" \n                 class="uc-editor-input action-path" \n                 placeholder="/lovelace/view"\n                 value="'.concat(((r=this._config.value)==null?void 0:r.navigation_path)||"",'" />\n        ');break;case"url":this._optionsContainer.innerHTML='\n          <input type="text" \n                 class="uc-editor-input action-url" \n                 placeholder="https://..."\n                 value="'.concat(((s=this._config.value)==null?void 0:s.url_path)||"",'" />\n        ');break}this._optionsContainer.querySelectorAll("input, textarea").forEach(o=>{o.addEventListener("input",()=>{m(this._element,"value-changed",{value:this.getValue()})})})}getValue(){var i,r,s,o;let e=this._typeSelect.value,t={action:e};switch(e){case"call-service":let a=(i=this._optionsContainer.querySelector(".action-service"))==null?void 0:i.value,c=(r=this._optionsContainer.querySelector(".action-data"))==null?void 0:r.value;if(a&&(t.service=a),c)try{t.service_data=JSON.parse(c)}catch(h){}break;case"navigate":let l=(s=this._optionsContainer.querySelector(".action-path"))==null?void 0:s.value;l&&(t.navigation_path=l);break;case"url":let u=(o=this._optionsContainer.querySelector(".action-url"))==null?void 0:o.value;u&&(t.url_path=u);break}return e==="none"?null:t}setValue(e){this._config.value=e,this._typeSelect&&(this._typeSelect.value=(e==null?void 0:e.action)||"none",this._updateOptions())}};function ji(){return"\n    .uc-editor-field {\n      margin-bottom: 16px;\n    }\n\n    .uc-editor-label {\n      display: block;\n      font-size: 12px;\n      font-weight: 500;\n      color: var(--secondary-text-color);\n      margin-bottom: 4px;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    }\n\n    .uc-editor-input,\n    .uc-editor-select,\n    .uc-editor-textarea {\n      width: 100%;\n      padding: 10px 12px;\n      border: 1px solid var(--divider-color);\n      border-radius: 8px;\n      background: var(--ha-card-background);\n      color: var(--primary-text-color);\n      font-size: 14px;\n      outline: none;\n      transition: border-color 0.2s, box-shadow 0.2s;\n    }\n\n    .uc-editor-input:focus,\n    .uc-editor-select:focus,\n    .uc-editor-textarea:focus {\n      border-color: var(--primary-color);\n      box-shadow: 0 0 0 3px rgba(var(--rgb-primary-color), 0.1);\n    }\n\n    .uc-editor-textarea {\n      min-height: 80px;\n      resize: vertical;\n      font-family: monospace;\n    }\n\n    .uc-editor-helper {\n      display: block;\n      font-size: 11px;\n      color: var(--secondary-text-color);\n      margin-top: 4px;\n    }\n\n    /* Checkbox */\n    .uc-editor-checkbox-label {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      cursor: pointer;\n    }\n\n    .uc-editor-checkbox-label input {\n      display: none;\n    }\n\n    .uc-editor-checkbox-custom {\n      width: 20px;\n      height: 20px;\n      border: 2px solid var(--divider-color);\n      border-radius: 4px;\n      position: relative;\n      transition: all 0.2s;\n    }\n\n    .uc-editor-checkbox-label input:checked + .uc-editor-checkbox-custom {\n      background: var(--primary-color);\n      border-color: var(--primary-color);\n    }\n\n    .uc-editor-checkbox-custom::after {\n      content: '';\n      position: absolute;\n      top: 2px;\n      left: 6px;\n      width: 4px;\n      height: 8px;\n      border: solid white;\n      border-width: 0 2px 2px 0;\n      transform: rotate(45deg);\n      opacity: 0;\n      transition: opacity 0.2s;\n    }\n\n    .uc-editor-checkbox-label input:checked + .uc-editor-checkbox-custom::after {\n      opacity: 1;\n    }\n\n    /* Color picker */\n    .uc-editor-color-wrapper {\n      display: flex;\n      gap: 8px;\n    }\n\n    .uc-editor-color-input {\n      width: 50px;\n      height: 40px;\n      padding: 0;\n      border: none;\n      border-radius: 8px;\n      cursor: pointer;\n    }\n\n    .uc-editor-color-text {\n      flex: 1;\n    }\n\n    /* Section */\n    .uc-editor-section {\n      border: 1px solid var(--divider-color);\n      border-radius: 12px;\n      overflow: hidden;\n      margin-bottom: 16px;\n    }\n\n    .uc-editor-section-header {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 12px 16px;\n      background: var(--secondary-background-color);\n      cursor: pointer;\n      user-select: none;\n    }\n\n    .uc-editor-section-icon {\n      color: var(--secondary-text-color);\n      --mdc-icon-size: 20px;\n    }\n\n    .uc-editor-section-title {\n      flex: 1;\n      font-weight: 500;\n    }\n\n    .uc-editor-section-chevron {\n      --mdc-icon-size: 20px;\n      transition: transform 0.2s;\n    }\n\n    .uc-editor-section.expanded .uc-editor-section-chevron {\n      transform: rotate(180deg);\n    }\n\n    .uc-editor-section-content {\n      padding: 0 16px;\n      max-height: 0;\n      overflow: hidden;\n      transition: max-height 0.3s, padding 0.3s;\n    }\n\n    .uc-editor-section.expanded .uc-editor-section-content {\n      padding: 16px;\n      max-height: 2000px;\n    }\n\n    /* Action editor */\n    .uc-editor-action-options {\n      margin-top: 8px;\n      display: flex;\n      flex-direction: column;\n      gap: 8px;\n    }\n  "}var N={EN:"en",RU:"ru",ES:"es",DE:"de",FR:"fr",IT:"it",PT:"pt",ZH:"zh",JA:"ja",KO:"ko"},je={[N.EN]:{"card.title":"Universal Card","card.subtitle":"Flexible card with multiple body modes","header.title":"Title","header.subtitle":"Subtitle","header.icon":"Icon","header.entity":"Entity","body_mode.label":"Body Mode","body_mode.expand":"Expand","body_mode.modal":"Modal","body_mode.fullscreen":"Fullscreen","body_mode.tabs":"Tabs","body_mode.carousel":"Carousel","body_mode.subview":"Subview","body_mode.none":"None (header only)","action.tap":"Tap Action","action.hold":"Hold Action","action.double_tap":"Double Tap Action","action.none":"No action","action.more_info":"More info","action.toggle":"Toggle","action.call_service":"Call service","action.navigate":"Navigate","action.url":"Open URL","grid.columns":"Columns","grid.gap":"Gap","features.lazy_load":"Lazy loading","features.collapsed":"Start collapsed","features.visibility":"Visibility conditions","section.header":"Header","section.body":"Body","section.cards":"Cards","section.style":"Style","section.actions":"Actions","section.advanced":"Advanced","theme.default":"Default","theme.glass":"Glassmorphism","theme.neumorphism":"Neumorphism","theme.neon":"Neon","notification.saved":"Configuration saved","notification.error":"Error saving configuration","notification.locked":"Card is locked","button.save":"Save","button.cancel":"Cancel","button.add_card":"Add Card","button.remove":"Remove","button.duplicate":"Duplicate","button.move_up":"Move Up","button.move_down":"Move Down","validation.required":"This field is required","validation.invalid_entity":"Invalid entity format","validation.invalid_icon":"Invalid icon format","lock.locked":"Locked","lock.unlock":"Unlock","lock.enter_password":"Enter password","lock.wrong_password":"Wrong password","misc.loading":"Loading...","misc.no_data":"No data","misc.unavailable":"Unavailable"},[N.RU]:{"card.title":"Universal Card","card.subtitle":"\u0413\u0438\u0431\u043A\u0430\u044F \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0430 \u0441 \u0440\u0430\u0437\u043D\u044B\u043C\u0438 \u0440\u0435\u0436\u0438\u043C\u0430\u043C\u0438","header.title":"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A","header.subtitle":"\u041F\u043E\u0434\u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A","header.icon":"\u0418\u043A\u043E\u043D\u043A\u0430","header.entity":"\u0421\u0443\u0449\u043D\u043E\u0441\u0442\u044C","body_mode.label":"\u0420\u0435\u0436\u0438\u043C \u0442\u0435\u043B\u0430","body_mode.expand":"\u0420\u0430\u0441\u043A\u0440\u044B\u0442\u0438\u0435","body_mode.modal":"\u041C\u043E\u0434\u0430\u043B\u044C\u043D\u043E\u0435 \u043E\u043A\u043D\u043E","body_mode.fullscreen":"\u041F\u043E\u043B\u043D\u044B\u0439 \u044D\u043A\u0440\u0430\u043D","body_mode.tabs":"\u0412\u043A\u043B\u0430\u0434\u043A\u0438","body_mode.carousel":"\u041A\u0430\u0440\u0443\u0441\u0435\u043B\u044C","body_mode.subview":"\u041F\u043E\u0434\u0432\u044C\u044E","body_mode.none":"\u041D\u0435\u0442 (\u0442\u043E\u043B\u044C\u043A\u043E \u0437\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A)","action.tap":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043F\u043E \u043D\u0430\u0436\u0430\u0442\u0438\u044E","action.hold":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043F\u043E \u0443\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u044E","action.double_tap":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043F\u043E \u0434\u0432\u043E\u0439\u043D\u043E\u043C\u0443 \u043D\u0430\u0436\u0430\u0442\u0438\u044E","action.none":"\u041D\u0435\u0442 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F","action.more_info":"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F","action.toggle":"\u041F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0438\u0442\u044C","action.call_service":"\u0412\u044B\u0437\u0432\u0430\u0442\u044C \u0441\u0435\u0440\u0432\u0438\u0441","action.navigate":"\u041D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044F","action.url":"\u041E\u0442\u043A\u0440\u044B\u0442\u044C URL","grid.columns":"\u041A\u043E\u043B\u043E\u043D\u043A\u0438","grid.gap":"\u041E\u0442\u0441\u0442\u0443\u043F","features.lazy_load":"\u041B\u0435\u043D\u0438\u0432\u0430\u044F \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0430","features.collapsed":"\u0421\u0432\u0451\u0440\u043D\u0443\u0442\u043E \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E","features.visibility":"\u0423\u0441\u043B\u043E\u0432\u0438\u044F \u0432\u0438\u0434\u0438\u043C\u043E\u0441\u0442\u0438","section.header":"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A","section.body":"\u0422\u0435\u043B\u043E","section.cards":"\u041A\u0430\u0440\u0442\u043E\u0447\u043A\u0438","section.style":"\u0421\u0442\u0438\u043B\u044C","section.actions":"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F","section.advanced":"\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u043E","theme.default":"\u041F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E","theme.glass":"\u0421\u0442\u0435\u043A\u043B\u043E","theme.neumorphism":"\u041D\u0435\u043E\u043C\u043E\u0440\u0444\u0438\u0437\u043C","theme.neon":"\u041D\u0435\u043E\u043D","notification.saved":"\u041A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430","notification.error":"\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F","notification.locked":"\u041A\u0430\u0440\u0442\u043E\u0447\u043A\u0430 \u0437\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u0430","button.save":"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C","button.cancel":"\u041E\u0442\u043C\u0435\u043D\u0430","button.add_card":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0430\u0440\u0442\u043E\u0447\u043A\u0443","button.remove":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C","button.duplicate":"\u0414\u0443\u0431\u043B\u0438\u0440\u043E\u0432\u0430\u0442\u044C","button.move_up":"\u0412\u0432\u0435\u0440\u0445","button.move_down":"\u0412\u043D\u0438\u0437","validation.required":"\u041E\u0431\u044F\u0437\u0430\u0442\u0435\u043B\u044C\u043D\u043E\u0435 \u043F\u043E\u043B\u0435","validation.invalid_entity":"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 entity","validation.invalid_icon":"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0438\u043A\u043E\u043D\u043A\u0438","lock.locked":"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u043D\u043E","lock.unlock":"\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C","lock.enter_password":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C","lock.wrong_password":"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C","misc.loading":"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...","misc.no_data":"\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445","misc.unavailable":"\u041D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E"},[N.ES]:{"card.title":"Universal Card","card.subtitle":"Tarjeta flexible con m\xFAltiples modos","header.title":"T\xEDtulo","header.subtitle":"Subt\xEDtulo","header.icon":"Icono","header.entity":"Entidad","body_mode.label":"Modo del cuerpo","body_mode.expand":"Expandir","body_mode.modal":"Modal","body_mode.fullscreen":"Pantalla completa","body_mode.tabs":"Pesta\xF1as","body_mode.carousel":"Carrusel","body_mode.subview":"Subvista","body_mode.none":"Ninguno","button.save":"Guardar","button.cancel":"Cancelar","button.add_card":"A\xF1adir tarjeta","misc.loading":"Cargando...","misc.unavailable":"No disponible"},[N.DE]:{"card.title":"Universal Card","card.subtitle":"Flexible Karte mit mehreren Modi","header.title":"Titel","header.subtitle":"Untertitel","header.icon":"Symbol","header.entity":"Entit\xE4t","body_mode.label":"K\xF6rpermodus","body_mode.expand":"Erweitern","body_mode.modal":"Modal","body_mode.fullscreen":"Vollbild","body_mode.tabs":"Tabs","body_mode.carousel":"Karussell","button.save":"Speichern","button.cancel":"Abbrechen","button.add_card":"Karte hinzuf\xFCgen","misc.loading":"Laden...","misc.unavailable":"Nicht verf\xFCgbar"}},Bt=class{constructor(){this._currentLanguage=N.EN,this._customTranslations={}}initFromHass(e){if(e!=null&&e.language){let t=e.language.split("-")[0].toLowerCase();je[t]&&(this._currentLanguage=t)}}setLanguage(e){(je[e]||this._customTranslations[e])&&(this._currentLanguage=e)}getLanguage(){return this._currentLanguage}t(e,t={}){var r,s,o;let i=(r=this._customTranslations[this._currentLanguage])==null?void 0:r[e];return i||(i=(s=je[this._currentLanguage])==null?void 0:s[e]),i||(i=(o=je[N.EN])==null?void 0:o[e]),i?i.replace(/\{(\w+)\}/g,(a,c)=>t[c]!==void 0?t[c]:a):e}addTranslations(e,t){this._customTranslations[e]||(this._customTranslations[e]={}),Object.assign(this._customTranslations[e],t)}getAllTranslations(e){return d(d({},je[e]),this._customTranslations[e])}getSupportedLanguages(){return[{code:N.EN,name:"English"},{code:N.RU,name:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},{code:N.ES,name:"Espa\xF1ol"},{code:N.DE,name:"Deutsch"},{code:N.FR,name:"Fran\xE7ais"},{code:N.IT,name:"Italiano"},{code:N.PT,name:"Portugu\xEAs"},{code:N.ZH,name:"\u4E2D\u6587"},{code:N.JA,name:"\u65E5\u672C\u8A9E"},{code:N.KO,name:"\uD55C\uAD6D\uC5B4"}]}};var U={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"},Me={LIFECYCLE:"lifecycle",STATE:"state",USER:"user",RENDER:"render",NETWORK:"network",ERROR:"error",PERFORMANCE:"performance"},wr={enabled:!1,maxEntries:500,persistToStorage:!1,storageKey:"uc_event_log",levels:Object.values(U),categories:Object.values(Me),showTimestamp:!0,showCategory:!0,groupSimilar:!0,groupTimeout:1e3},jt=class{constructor(e={}){this._config=d(d({},wr),e),this._entries=[],this._listeners=new Set,this._groupedEvents=new Map,this._panel=null,this._isVisible=!1}enable(){this._config.enabled=!0,this._loadFromStorage()}disable(){this._config.enabled=!1}isEnabled(){return this._config.enabled}log(e,t,i,r={}){if(!this._config.enabled||!this._config.levels.includes(e)||!this._config.categories.includes(t))return;let s={id:this._generateId(),timestamp:Date.now(),level:e,category:t,message:i,data:r,stack:e===U.ERROR?new Error().stack:null};if(this._config.groupSimilar){let o="".concat(t,":").concat(i),a=this._groupedEvents.get(o);if(a&&Date.now()-a.lastTime<this._config.groupTimeout){a.count++,a.lastTime=Date.now(),a.entry.count=a.count,this._notifyListeners("update",a.entry);return}this._groupedEvents.set(o,{count:1,lastTime:Date.now(),entry:s}),setTimeout(()=>this._groupedEvents.delete(o),this._config.groupTimeout*2)}s.count=1,this._entries.push(s),this._entries.length>this._config.maxEntries&&this._entries.shift(),this._config.persistToStorage&&this._saveToStorage(),this._notifyListeners("add",s),this._logToConsole(s)}debug(e,t,i){this.log(U.DEBUG,e,t,i)}info(e,t,i){this.log(U.INFO,e,t,i)}warn(e,t,i){this.log(U.WARN,e,t,i)}error(e,t,i){this.log(U.ERROR,e,t,i)}lifecycle(e,t={}){this.info(Me.LIFECYCLE,e,t)}stateChange(e,t,i){this.debug(Me.STATE,"State changed: ".concat(e),{entityId:e,oldState:t,newState:i,changed:t!==i})}userAction(e,t={}){this.info(Me.USER,e,t)}render(e,t){this.debug(Me.RENDER,"Rendered: ".concat(e),{component:e,duration:"".concat(t.toFixed(2),"ms")})}_generateId(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}_logToConsole(e){let t="[UC:".concat(e.category,"]"),i=this._getConsoleStyle(e.level);switch(e.level){case U.DEBUG:console.debug("%c".concat(t),i,e.message,e.data);break;case U.INFO:console.info("%c".concat(t),i,e.message,e.data);break;case U.WARN:console.warn("%c".concat(t),i,e.message,e.data);break;case U.ERROR:console.error("%c".concat(t),i,e.message,e.data),e.stack&&console.error(e.stack);break}}_getConsoleStyle(e){return{[U.DEBUG]:"color: #888",[U.INFO]:"color: #2196f3",[U.WARN]:"color: #ff9800",[U.ERROR]:"color: #f44336; font-weight: bold"}[e]||""}addListener(e){this._listeners.add(e)}removeListener(e){this._listeners.delete(e)}_notifyListeners(e,t){for(let i of this._listeners)try{i(e,t)}catch(r){console.error("[EventLogger] Listener error:",r)}}_loadFromStorage(){if(this._config.persistToStorage)try{let e=localStorage.getItem(this._config.storageKey);e&&(this._entries=JSON.parse(e))}catch(e){console.warn("[EventLogger] Failed to load from storage:",e)}}_saveToStorage(){try{localStorage.setItem(this._config.storageKey,JSON.stringify(this._entries))}catch(e){console.warn("[EventLogger] Failed to save to storage:",e)}}getEntries(e={}){let t=[...this._entries];if(e.level&&(t=t.filter(i=>i.level===e.level)),e.category&&(t=t.filter(i=>i.category===e.category)),e.search){let i=e.search.toLowerCase();t=t.filter(r=>r.message.toLowerCase().includes(i)||JSON.stringify(r.data).toLowerCase().includes(i))}return t}clear(){this._entries=[],this._groupedEvents.clear(),this._config.persistToStorage&&localStorage.removeItem(this._config.storageKey),this._notifyListeners("clear",null)}export(){return JSON.stringify(this._entries,null,2)}showPanel(){if(this._panel){this._panel.style.display="block",this._isVisible=!0;return}this._panel=document.createElement("div"),this._panel.className="uc-event-logger-panel",this._panel.innerHTML='\n      <div class="uc-logger-header">\n        <span class="uc-logger-title">Event Logger</span>\n        <div class="uc-logger-controls">\n          <select class="uc-logger-filter-level">\n            <option value="">All Levels</option>\n            '.concat(Object.values(U).map(e=>'<option value="'.concat(e,'">').concat(e,"</option>")).join(""),'\n          </select>\n          <select class="uc-logger-filter-category">\n            <option value="">All Categories</option>\n            ').concat(Object.values(Me).map(e=>'<option value="'.concat(e,'">').concat(e,"</option>")).join(""),'\n          </select>\n          <button class="uc-logger-btn uc-logger-clear" title="Clear">\n            <ha-icon icon="mdi:delete"></ha-icon>\n          </button>\n          <button class="uc-logger-btn uc-logger-export" title="Export">\n            <ha-icon icon="mdi:download"></ha-icon>\n          </button>\n          <button class="uc-logger-btn uc-logger-close" title="Close">\n            <ha-icon icon="mdi:close"></ha-icon>\n          </button>\n        </div>\n      </div>\n      <div class="uc-logger-entries"></div>\n    '),document.body.appendChild(this._panel),this._isVisible=!0,this._renderEntries(),this._panel.querySelector(".uc-logger-close").addEventListener("click",()=>this.hidePanel()),this._panel.querySelector(".uc-logger-clear").addEventListener("click",()=>{this.clear(),this._renderEntries()}),this._panel.querySelector(".uc-logger-export").addEventListener("click",()=>this._exportToFile()),this._panel.querySelectorAll("select").forEach(e=>{e.addEventListener("change",()=>this._renderEntries())}),this.addListener(()=>this._renderEntries())}hidePanel(){this._panel&&(this._panel.style.display="none",this._isVisible=!1)}togglePanel(){this._isVisible?this.hidePanel():this.showPanel()}_renderEntries(){if(!this._panel)return;let e=this._panel.querySelector(".uc-logger-entries"),t=this._panel.querySelector(".uc-logger-filter-level").value,i=this._panel.querySelector(".uc-logger-filter-category").value,r=this.getEntries({level:t||void 0,category:i||void 0});e.innerHTML=r.reverse().map(s=>'\n      <div class="uc-logger-entry uc-logger-'.concat(s.level,'">\n        <span class="uc-logger-time">').concat(new Date(s.timestamp).toLocaleTimeString(),'</span>\n        <span class="uc-logger-level">').concat(s.level,'</span>\n        <span class="uc-logger-category">').concat(s.category,'</span>\n        <span class="uc-logger-message">').concat(s.message,"</span>\n        ").concat(s.count>1?'<span class="uc-logger-count">\xD7'.concat(s.count,"</span>"):"","\n        ").concat(Object.keys(s.data).length>0?'\n          <details class="uc-logger-data">\n            <summary>Data</summary>\n            <pre>'.concat(JSON.stringify(s.data,null,2),"</pre>\n          </details>\n        "):"","\n      </div>\n    ")).join(""),e.scrollTop=0}_exportToFile(){let e=this.export(),t=new Blob([e],{type:"application/json"}),i=URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download="uc-events-".concat(new Date().toISOString().split("T")[0],".json"),r.click(),URL.revokeObjectURL(i)}static getStyles(){return"\n      .uc-event-logger-panel {\n        position: fixed;\n        bottom: 0;\n        right: 0;\n        width: 500px;\n        max-width: 100vw;\n        height: 400px;\n        background: var(--ha-card-background, #1c1c1c);\n        border: 1px solid var(--divider-color);\n        border-radius: 12px 0 0 0;\n        z-index: 10001;\n        display: flex;\n        flex-direction: column;\n        font-family: monospace;\n        font-size: 12px;\n        box-shadow: -4px -4px 16px rgba(0, 0, 0, 0.3);\n      }\n\n      .uc-logger-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 8px 12px;\n        background: var(--primary-color);\n        color: white;\n        border-radius: 12px 0 0 0;\n      }\n\n      .uc-logger-title {\n        font-weight: 600;\n        font-size: 14px;\n      }\n\n      .uc-logger-controls {\n        display: flex;\n        gap: 8px;\n        align-items: center;\n      }\n\n      .uc-logger-controls select {\n        padding: 4px 8px;\n        border: none;\n        border-radius: 4px;\n        font-size: 11px;\n        background: rgba(255, 255, 255, 0.2);\n        color: white;\n      }\n\n      .uc-logger-btn {\n        width: 28px;\n        height: 28px;\n        border: none;\n        border-radius: 4px;\n        background: rgba(255, 255, 255, 0.2);\n        color: white;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .uc-logger-btn:hover {\n        background: rgba(255, 255, 255, 0.3);\n      }\n\n      .uc-logger-btn ha-icon {\n        --mdc-icon-size: 18px;\n      }\n\n      .uc-logger-entries {\n        flex: 1;\n        overflow-y: auto;\n        padding: 8px;\n      }\n\n      .uc-logger-entry {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 8px;\n        padding: 6px 8px;\n        border-radius: 4px;\n        margin-bottom: 4px;\n        background: var(--secondary-background-color);\n        align-items: baseline;\n      }\n\n      .uc-logger-debug { opacity: 0.7; }\n      .uc-logger-info .uc-logger-level { color: #2196f3; }\n      .uc-logger-warn { background: rgba(255, 152, 0, 0.1); }\n      .uc-logger-warn .uc-logger-level { color: #ff9800; }\n      .uc-logger-error { background: rgba(244, 67, 54, 0.1); }\n      .uc-logger-error .uc-logger-level { color: #f44336; }\n\n      .uc-logger-time {\n        color: var(--secondary-text-color);\n        font-size: 10px;\n      }\n\n      .uc-logger-level {\n        font-weight: 600;\n        text-transform: uppercase;\n        font-size: 10px;\n      }\n\n      .uc-logger-category {\n        background: var(--primary-color);\n        color: white;\n        padding: 1px 6px;\n        border-radius: 3px;\n        font-size: 10px;\n      }\n\n      .uc-logger-message {\n        flex: 1;\n        min-width: 150px;\n      }\n\n      .uc-logger-count {\n        background: var(--warning-color);\n        color: white;\n        padding: 1px 6px;\n        border-radius: 10px;\n        font-size: 10px;\n      }\n\n      .uc-logger-data {\n        width: 100%;\n        margin-top: 4px;\n      }\n\n      .uc-logger-data summary {\n        cursor: pointer;\n        color: var(--secondary-text-color);\n        font-size: 11px;\n      }\n\n      .uc-logger-data pre {\n        margin: 4px 0 0;\n        padding: 8px;\n        background: var(--code-editor-background-color, #0d0d0d);\n        border-radius: 4px;\n        overflow-x: auto;\n        font-size: 11px;\n      }\n    "}};var kr={enabled:!1,watchHass:!0,watchConfig:!0,watchInternal:!0,highlightChanges:!0,changeHighlightDuration:1e3},Gt=class{constructor(e,t={}){this._cardElement=e,this._config=d(d({},kr),t),this._panel=null,this._isVisible=!1,this._state={hass:null,config:null,internal:{}},this._previousState={},this._watchers=new Map,this._updateInterval=null}enable(){this._config.enabled=!0,this._startWatching()}disable(){this._config.enabled=!1,this._stopWatching()}setHass(e){this._state.hass=e,this._checkChanges("hass")}setConfig(e){this._state.config=e,this._checkChanges("config")}setInternal(e,t){this._state.internal[e]=t,this._checkChanges("internal.".concat(e))}get(e){return this._getByPath(this._state,e)}watch(e,t){this._watchers.has(e)||this._watchers.set(e,new Set),this._watchers.get(e).add(t)}unwatch(e,t){let i=this._watchers.get(e);i&&i.delete(t)}_checkChanges(e){if(!this._config.enabled)return;let t=this.get(e),i=this._getByPath(this._previousState,e);if(JSON.stringify(t)!==JSON.stringify(i)){for(let[r,s]of this._watchers)if(e.startsWith(r)||r.startsWith(e))for(let o of s)try{o(t,i,e)}catch(a){console.error("[StateInspector] Watcher error:",a)}this._setByPath(this._previousState,e,JSON.parse(JSON.stringify(t))),this._isVisible&&this._updatePanel(e)}}_getByPath(e,t){return t.split(".").reduce((i,r)=>i==null?void 0:i[r],e)}_setByPath(e,t,i){let r=t.split("."),s=r.pop(),o=r.reduce((a,c)=>(a[c]||(a[c]={}),a[c]),e);o[s]=i}_startWatching(){this._stopWatching(),this._updateInterval=setInterval(()=>{this._isVisible&&this._renderPanel()},1e3)}_stopWatching(){this._updateInterval&&(clearInterval(this._updateInterval),this._updateInterval=null)}showPanel(){if(this._panel){this._panel.style.display="flex",this._isVisible=!0,this._renderPanel();return}this._panel=document.createElement("div"),this._panel.className="uc-state-inspector-panel",this._panel.innerHTML='\n      <div class="uc-inspector-header">\n        <span class="uc-inspector-title">State Inspector</span>\n        <div class="uc-inspector-controls">\n          <button class="uc-inspector-btn uc-inspector-refresh" title="Refresh">\n            <ha-icon icon="mdi:refresh"></ha-icon>\n          </button>\n          <button class="uc-inspector-btn uc-inspector-copy" title="Copy State">\n            <ha-icon icon="mdi:content-copy"></ha-icon>\n          </button>\n          <button class="uc-inspector-btn uc-inspector-close" title="Close">\n            <ha-icon icon="mdi:close"></ha-icon>\n          </button>\n        </div>\n      </div>\n      <div class="uc-inspector-tabs">\n        <button class="uc-inspector-tab active" data-tab="config">Config</button>\n        <button class="uc-inspector-tab" data-tab="hass">Hass</button>\n        <button class="uc-inspector-tab" data-tab="internal">Internal</button>\n        <button class="uc-inspector-tab" data-tab="entities">Entities</button>\n      </div>\n      <div class="uc-inspector-content"></div>\n      <div class="uc-inspector-footer">\n        <input type="text" class="uc-inspector-search" placeholder="Search state..." />\n      </div>\n    ',document.body.appendChild(this._panel),this._isVisible=!0,this._panel.querySelector(".uc-inspector-close").addEventListener("click",()=>this.hidePanel()),this._panel.querySelector(".uc-inspector-refresh").addEventListener("click",()=>this._renderPanel()),this._panel.querySelector(".uc-inspector-copy").addEventListener("click",()=>this._copyState()),this._panel.querySelectorAll(".uc-inspector-tab").forEach(e=>{e.addEventListener("click",()=>{this._panel.querySelectorAll(".uc-inspector-tab").forEach(t=>t.classList.remove("active")),e.classList.add("active"),this._renderPanel()})}),this._panel.querySelector(".uc-inspector-search").addEventListener("input",e=>{this._renderPanel(e.target.value)}),this._renderPanel()}hidePanel(){this._panel&&(this._panel.style.display="none",this._isVisible=!1)}togglePanel(){this._isVisible?this.hidePanel():this.showPanel()}_renderPanel(e=""){var s;if(!this._panel)return;let t=((s=this._panel.querySelector(".uc-inspector-tab.active"))==null?void 0:s.dataset.tab)||"config",i=this._panel.querySelector(".uc-inspector-content"),r;switch(t){case"config":r=this._state.config;break;case"hass":r=this._getHassInfo();break;case"internal":r=this._state.internal;break;case"entities":r=this._getEntitiesInfo();break}i.innerHTML=this._renderObject(r,"",e),i.querySelectorAll(".uc-inspector-key").forEach(o=>{o.addEventListener("click",()=>{let a=o.nextElementSibling;a!=null&&a.classList.contains("uc-inspector-children")&&(a.classList.toggle("collapsed"),o.classList.toggle("collapsed"))})}),i.querySelectorAll(".uc-inspector-value[contenteditable]").forEach(o=>{o.addEventListener("blur",()=>{let a=o.dataset.path,c=this._parseValue(o.textContent);this._setValue(a,c)})})}_updatePanel(e){if(!this._panel||!this._isVisible)return;let t=this._panel.querySelector('[data-path="'.concat(e,'"]'));t&&this._config.highlightChanges&&(t.classList.add("changed"),setTimeout(()=>{t.classList.remove("changed")},this._config.changeHighlightDuration)),this._renderPanel()}_renderObject(e,t="",i="",r=0){if(e===null)return'<span class="uc-inspector-null">null</span>';if(e===void 0)return'<span class="uc-inspector-undefined">undefined</span>';if(typeof e!="object")return this._renderPrimitive(e,t);if(Array.isArray(e)){if(e.length===0)return'<span class="uc-inspector-array">[]</span>';let a=e.map((c,l)=>{let u=t?"".concat(t,"[").concat(l,"]"):"[".concat(l,"]");return'\n          <div class="uc-inspector-item">\n            <span class="uc-inspector-index">'.concat(l,":</span>\n            ").concat(this._renderObject(c,u,i,r+1),"\n          </div>\n        ")}).join("");return'\n        <span class="uc-inspector-array-bracket">[</span>\n        <div class="uc-inspector-children '.concat(r>1?"collapsed":"",'">').concat(a,'</div>\n        <span class="uc-inspector-array-bracket">]</span>\n      ')}let s=Object.keys(e);if(s.length===0)return'<span class="uc-inspector-object">{}</span>';let o=s.filter(a=>i?(t?"".concat(t,".").concat(a):a).toLowerCase().includes(i.toLowerCase())||JSON.stringify(e[a]).toLowerCase().includes(i.toLowerCase()):!0).map(a=>{let c=t?"".concat(t,".").concat(a):a;return'\n          <div class="uc-inspector-item">\n            <span class="uc-inspector-key '.concat(r>1?"collapsed":"",'">').concat(a,":</span>\n            ").concat(this._renderObject(e[a],c,i,r+1),"\n          </div>\n        ")}).join("");return'\n      <span class="uc-inspector-object-bracket">{</span>\n      <div class="uc-inspector-children '.concat(r>1?"collapsed":"",'">').concat(o,'</div>\n      <span class="uc-inspector-object-bracket">}</span>\n    ')}_renderPrimitive(e,t){let i=typeof e,r=t.startsWith("internal")||t.startsWith("config");return i==="string"?'<span class="uc-inspector-value uc-inspector-string" \n                    data-path="'.concat(t,'" \n                    ').concat(r?'contenteditable="true"':"",'>"').concat(e,'"</span>'):i==="number"?'<span class="uc-inspector-value uc-inspector-number" \n                    data-path="'.concat(t,'"\n                    ').concat(r?'contenteditable="true"':"",">").concat(e,"</span>"):i==="boolean"?'<span class="uc-inspector-value uc-inspector-boolean" \n                    data-path="'.concat(t,'"\n                    ').concat(r?'contenteditable="true"':"",">").concat(e,"</span>"):'<span class="uc-inspector-value">'.concat(String(e),"</span>")}_getHassInfo(){var e,t;return this._state.hass?{connected:this._state.hass.connected,language:this._state.hass.language,user:(e=this._state.hass.user)==null?void 0:e.name,themes:Object.keys(((t=this._state.hass.themes)==null?void 0:t.themes)||{}),panelUrl:this._state.hass.panelUrl}:null}_getEntitiesInfo(){var s;let e=this._state.config,t=this._state.hass;if(!e||!t)return{};let i={};e.entity&&(i[e.entity]=(s=t.states)==null?void 0:s[e.entity]);let r=o=>{var a,c;if(o)for(let l of o){if(l.entity&&(i[l.entity]=(a=t.states)==null?void 0:a[l.entity]),l.entities)for(let u of l.entities){let h=typeof u=="string"?u:u.entity;i[h]=(c=t.states)==null?void 0:c[h]}l.cards&&r(l.cards)}};return r(e.cards),i}_parseValue(e){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;if(e==="null")return null;let t=Number(e);if(!isNaN(t)&&e!=="")return t;if(e.startsWith('"')&&e.endsWith('"'))return e.slice(1,-1);try{return JSON.parse(e)}catch(i){return e}}_setValue(e,t){if(e.startsWith("internal.")){let i=e.replace("internal.","");this.setInternal(i,t)}else e.startsWith("config.")&&m(this._cardElement,"config-changed",{config:this._state.config})}_copyState(){let e=JSON.stringify(this._state,null,2);navigator.clipboard.writeText(e).then(()=>{let t=this._panel.querySelector(".uc-inspector-copy");t.innerHTML='<ha-icon icon="mdi:check"></ha-icon>',setTimeout(()=>{t.innerHTML='<ha-icon icon="mdi:content-copy"></ha-icon>'},1e3)})}destroy(){this._stopWatching(),this._watchers.clear(),this._panel&&(this._panel.remove(),this._panel=null)}static getStyles(){return"\n      .uc-state-inspector-panel {\n        position: fixed;\n        top: 50%;\n        right: 20px;\n        transform: translateY(-50%);\n        width: 400px;\n        max-width: calc(100vw - 40px);\n        max-height: 80vh;\n        background: var(--ha-card-background, #1c1c1c);\n        border: 1px solid var(--divider-color);\n        border-radius: 12px;\n        z-index: 10001;\n        display: flex;\n        flex-direction: column;\n        font-family: monospace;\n        font-size: 12px;\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n      }\n\n      .uc-inspector-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 8px 12px;\n        background: var(--primary-color);\n        color: white;\n        border-radius: 12px 12px 0 0;\n      }\n\n      .uc-inspector-title {\n        font-weight: 600;\n        font-size: 14px;\n      }\n\n      .uc-inspector-controls {\n        display: flex;\n        gap: 4px;\n      }\n\n      .uc-inspector-btn {\n        width: 28px;\n        height: 28px;\n        border: none;\n        border-radius: 4px;\n        background: rgba(255, 255, 255, 0.2);\n        color: white;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .uc-inspector-btn:hover {\n        background: rgba(255, 255, 255, 0.3);\n      }\n\n      .uc-inspector-tabs {\n        display: flex;\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .uc-inspector-tab {\n        flex: 1;\n        padding: 8px;\n        border: none;\n        background: transparent;\n        color: var(--secondary-text-color);\n        cursor: pointer;\n        font-size: 11px;\n        transition: all 0.2s;\n      }\n\n      .uc-inspector-tab:hover {\n        background: var(--secondary-background-color);\n      }\n\n      .uc-inspector-tab.active {\n        color: var(--primary-color);\n        border-bottom: 2px solid var(--primary-color);\n      }\n\n      .uc-inspector-content {\n        flex: 1;\n        overflow: auto;\n        padding: 12px;\n        min-height: 200px;\n      }\n\n      .uc-inspector-footer {\n        padding: 8px;\n        border-top: 1px solid var(--divider-color);\n      }\n\n      .uc-inspector-search {\n        width: 100%;\n        padding: 8px;\n        border: 1px solid var(--divider-color);\n        border-radius: 6px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 12px;\n      }\n\n      .uc-inspector-item {\n        margin-left: 12px;\n      }\n\n      .uc-inspector-key {\n        color: var(--primary-color);\n        cursor: pointer;\n      }\n\n      .uc-inspector-key::before {\n        content: '\u25BC';\n        display: inline-block;\n        width: 12px;\n        font-size: 8px;\n        transition: transform 0.2s;\n      }\n\n      .uc-inspector-key.collapsed::before {\n        transform: rotate(-90deg);\n      }\n\n      .uc-inspector-children.collapsed {\n        display: none;\n      }\n\n      .uc-inspector-index {\n        color: var(--secondary-text-color);\n      }\n\n      .uc-inspector-string { color: #ce9178; }\n      .uc-inspector-number { color: #b5cea8; }\n      .uc-inspector-boolean { color: #569cd6; }\n      .uc-inspector-null { color: #569cd6; }\n      .uc-inspector-undefined { color: #808080; }\n\n      .uc-inspector-value[contenteditable] {\n        cursor: text;\n        border-radius: 2px;\n        padding: 0 2px;\n      }\n\n      .uc-inspector-value[contenteditable]:focus {\n        outline: 1px solid var(--primary-color);\n        background: var(--secondary-background-color);\n      }\n\n      .uc-inspector-value.changed {\n        animation: uc-inspector-highlight 1s ease;\n      }\n\n      @keyframes uc-inspector-highlight {\n        0% { background: var(--warning-color); }\n        100% { background: transparent; }\n      }\n    "}};var be={RENDER:"render",UPDATE:"update",HASS_UPDATE:"hass_update",CONFIG_CHANGE:"config_change",ANIMATION:"animation",NETWORK:"network",MEMORY:"memory"},Er={enabled:!1,sampleSize:100,warningThreshold:16,errorThreshold:50,autoProfile:!1,trackMemory:!0},Vt=class{constructor(e={}){this._config=d(d({},Er),e),this._metrics=new Map,this._activeTimers=new Map,this._panel=null,this._isVisible=!1,this._memoryInterval=null,this._fpsHistory=[],this._lastFrameTime=0,this._initMetricTypes()}_initMetricTypes(){for(let e of Object.values(be))this._metrics.set(e,{samples:[],min:1/0,max:0,total:0,count:0})}enable(){this._config.enabled=!0,this._config.trackMemory&&this._startMemoryTracking(),this._config.autoProfile&&this._startFPSTracking()}disable(){this._config.enabled=!1,this._stopMemoryTracking(),this._stopFPSTracking()}start(e,t=be.RENDER){if(!this._config.enabled)return()=>{};let i=performance.now(),r="".concat(t,":").concat(e,":").concat(i);return this._activeTimers.set(r,{name:e,type:t,startTime:i}),()=>this._end(r)}_end(e){let t=this._activeTimers.get(e);if(!t)return;let i=performance.now()-t.startTime;this._activeTimers.delete(e),this._recordMetric(t.type,t.name,i)}async measure(e,t,i){let r=this.start(e,t);try{return await i()}finally{r()}}measureSync(e,t,i){let r=this.start(e,t);try{return i()}finally{r()}}_recordMetric(e,t,i){let r=this._metrics.get(e);if(!r)return;let s={name:t,duration:i,timestamp:Date.now()};r.samples.push(s),r.samples.length>this._config.sampleSize&&r.samples.shift(),r.min=Math.min(r.min,i),r.max=Math.max(r.max,i),r.total+=i,r.count++,i>this._config.errorThreshold?console.warn("[Profiler] Slow ".concat(e,": ").concat(t," took ").concat(i.toFixed(2),"ms")):i>this._config.warningThreshold&&console.debug("[Profiler] ".concat(e,": ").concat(t," took ").concat(i.toFixed(2),"ms")),this._isVisible&&this._updatePanel()}_recordMemoryMetric(){if(!performance.memory)return;let e=this._metrics.get(be.MEMORY),t={usedJSHeapSize:performance.memory.usedJSHeapSize,totalJSHeapSize:performance.memory.totalJSHeapSize,jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,timestamp:Date.now()};e.samples.push(t),e.samples.length>this._config.sampleSize&&e.samples.shift()}_startMemoryTracking(){performance.memory&&(this._stopMemoryTracking(),this._memoryInterval=setInterval(()=>{this._recordMemoryMetric()},1e3))}_stopMemoryTracking(){this._memoryInterval&&(clearInterval(this._memoryInterval),this._memoryInterval=null)}_startFPSTracking(){let e=t=>{if(!(!this._config.enabled||!this._config.autoProfile)){if(this._lastFrameTime){let r=1e3/(t-this._lastFrameTime);this._fpsHistory.push({fps:r,timestamp:Date.now()}),this._fpsHistory.length>60&&this._fpsHistory.shift()}this._lastFrameTime=t,requestAnimationFrame(e)}};requestAnimationFrame(e)}_stopFPSTracking(){this._lastFrameTime=0,this._fpsHistory=[]}getStats(e){let t=this._metrics.get(e);return!t||t.count===0?{min:0,max:0,avg:0,count:0,samples:[]}:{min:t.min,max:t.max,avg:t.total/t.count,count:t.count,samples:[...t.samples]}}getCurrentFPS(){return this._fpsHistory.length===0?0:this._fpsHistory.reduce((t,i)=>t+i.fps,0)/this._fpsHistory.length}getMemoryUsage(){var t;let e=(t=this._metrics.get(be.MEMORY))==null?void 0:t.samples;return!e||e.length===0?null:e[e.length-1]}reset(){this._initMetricTypes(),this._fpsHistory=[],this._activeTimers.clear()}showPanel(){if(this._panel){this._panel.style.display="flex",this._isVisible=!0,this._updatePanel();return}this._panel=document.createElement("div"),this._panel.className="uc-profiler-panel",this._panel.innerHTML='\n      <div class="uc-profiler-header">\n        <span class="uc-profiler-title">Performance Profiler</span>\n        <div class="uc-profiler-controls">\n          <button class="uc-profiler-btn uc-profiler-reset" title="Reset">\n            <ha-icon icon="mdi:refresh"></ha-icon>\n          </button>\n          <button class="uc-profiler-btn uc-profiler-export" title="Export">\n            <ha-icon icon="mdi:download"></ha-icon>\n          </button>\n          <button class="uc-profiler-btn uc-profiler-close" title="Close">\n            <ha-icon icon="mdi:close"></ha-icon>\n          </button>\n        </div>\n      </div>\n      <div class="uc-profiler-summary"></div>\n      <div class="uc-profiler-charts"></div>\n      <div class="uc-profiler-details"></div>\n    ',document.body.appendChild(this._panel),this._isVisible=!0,this._panel.querySelector(".uc-profiler-close").addEventListener("click",()=>this.hidePanel()),this._panel.querySelector(".uc-profiler-reset").addEventListener("click",()=>{this.reset(),this._updatePanel()}),this._panel.querySelector(".uc-profiler-export").addEventListener("click",()=>this._export()),this._updatePanel(),this._panelUpdateInterval=setInterval(()=>{this._isVisible&&this._updatePanel()},500)}hidePanel(){this._panel&&(this._panel.style.display="none",this._isVisible=!1),this._panelUpdateInterval&&(clearInterval(this._panelUpdateInterval),this._panelUpdateInterval=null)}togglePanel(){this._isVisible?this.hidePanel():this.showPanel()}_updatePanel(){if(!this._panel)return;let e=this._panel.querySelector(".uc-profiler-summary"),t=this.getCurrentFPS(),i=this.getMemoryUsage(),r=this.getStats(be.RENDER);e.innerHTML='\n      <div class="uc-profiler-stat">\n        <span class="uc-profiler-stat-value '.concat(t<30?"warning":t<55?"caution":"",'">').concat(t.toFixed(0),'</span>\n        <span class="uc-profiler-stat-label">FPS</span>\n      </div>\n      <div class="uc-profiler-stat">\n        <span class="uc-profiler-stat-value ').concat(r.avg>this._config.warningThreshold?"warning":"",'">').concat(r.avg.toFixed(1),'</span>\n        <span class="uc-profiler-stat-label">Avg Render (ms)</span>\n      </div>\n      ').concat(i?'\n        <div class="uc-profiler-stat">\n          <span class="uc-profiler-stat-value">'.concat((i.usedJSHeapSize/1024/1024).toFixed(1),'</span>\n          <span class="uc-profiler-stat-label">Memory (MB)</span>\n        </div>\n      '):"",'\n      <div class="uc-profiler-stat">\n        <span class="uc-profiler-stat-value">').concat(r.count,'</span>\n        <span class="uc-profiler-stat-label">Renders</span>\n      </div>\n    ');let s=this._panel.querySelector(".uc-profiler-charts");s.innerHTML='\n      <div class="uc-profiler-chart">\n        <div class="uc-profiler-chart-title">Render Times</div>\n        <div class="uc-profiler-chart-bars">\n          '.concat(this._renderBars(r.samples.slice(-30)),"\n        </div>\n      </div>\n      ").concat(this._fpsHistory.length>0?'\n        <div class="uc-profiler-chart">\n          <div class="uc-profiler-chart-title">FPS</div>\n          <div class="uc-profiler-chart-line">\n            '.concat(this._renderLineChart(this._fpsHistory.slice(-60).map(c=>c.fps),60),"\n          </div>\n        </div>\n      "):"","\n    ");let o=this._panel.querySelector(".uc-profiler-details"),a=Object.values(be).filter(c=>c!==be.MEMORY);o.innerHTML=a.map(c=>{let l=this.getStats(c);return l.count===0?"":'\n        <div class="uc-profiler-detail">\n          <div class="uc-profiler-detail-header">'.concat(c,'</div>\n          <div class="uc-profiler-detail-stats">\n            <span>Min: ').concat(l.min.toFixed(2),"ms</span>\n            <span>Max: ").concat(l.max.toFixed(2),"ms</span>\n            <span>Avg: ").concat(l.avg.toFixed(2),"ms</span>\n            <span>Count: ").concat(l.count,"</span>\n          </div>\n        </div>\n      ")}).join("")}_renderBars(e){if(e.length===0)return'<div class="uc-profiler-no-data">No data</div>';let t=Math.max(...e.map(i=>i.duration),this._config.errorThreshold);return e.map(i=>{let r=i.duration/t*100,s="uc-profiler-bar";return i.duration>this._config.errorThreshold?s+=" error":i.duration>this._config.warningThreshold&&(s+=" warning"),'<div class="'.concat(s,'" style="height: ').concat(r,'%" title="').concat(i.name,": ").concat(i.duration.toFixed(2),'ms"></div>')}).join("")}_renderLineChart(e,t=60){if(e.length<2)return"";let i=Math.max(...e,t),r=e.map((o,a)=>{let c=a/(e.length-1)*100,l=100-o/i*100;return"".concat(c,",").concat(l)}).join(" "),s=100-t/i*100;return'\n      <svg viewBox="0 0 100 100" preserveAspectRatio="none">\n        <line x1="0" y1="'.concat(s,'" x2="100" y2="').concat(s,'" class="uc-profiler-target-line" />\n        <polyline points="').concat(r,'" class="uc-profiler-line" />\n      </svg>\n    ')}_export(){let e={timestamp:new Date().toISOString(),fps:this.getCurrentFPS(),memory:this.getMemoryUsage(),metrics:{}};for(let s of Object.values(be))e.metrics[s]=this.getStats(s);let t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),i=URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download="uc-performance-".concat(new Date().toISOString().split("T")[0],".json"),r.click(),URL.revokeObjectURL(i)}destroy(){this.disable(),this.hidePanel(),this._panel&&(this._panel.remove(),this._panel=null)}static getStyles(){return"\n      .uc-profiler-panel {\n        position: fixed;\n        bottom: 20px;\n        left: 20px;\n        width: 350px;\n        max-width: calc(100vw - 40px);\n        background: var(--ha-card-background, #1c1c1c);\n        border: 1px solid var(--divider-color);\n        border-radius: 12px;\n        z-index: 10001;\n        display: flex;\n        flex-direction: column;\n        font-family: monospace;\n        font-size: 12px;\n        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n        max-height: 500px;\n        overflow: hidden;\n      }\n\n      .uc-profiler-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 8px 12px;\n        background: var(--primary-color);\n        color: white;\n        border-radius: 12px 12px 0 0;\n      }\n\n      .uc-profiler-title {\n        font-weight: 600;\n        font-size: 14px;\n      }\n\n      .uc-profiler-controls {\n        display: flex;\n        gap: 4px;\n      }\n\n      .uc-profiler-btn {\n        width: 28px;\n        height: 28px;\n        border: none;\n        border-radius: 4px;\n        background: rgba(255, 255, 255, 0.2);\n        color: white;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .uc-profiler-summary {\n        display: grid;\n        grid-template-columns: repeat(4, 1fr);\n        gap: 8px;\n        padding: 12px;\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .uc-profiler-stat {\n        text-align: center;\n      }\n\n      .uc-profiler-stat-value {\n        display: block;\n        font-size: 20px;\n        font-weight: 600;\n        color: var(--primary-color);\n      }\n\n      .uc-profiler-stat-value.warning {\n        color: var(--error-color);\n      }\n\n      .uc-profiler-stat-value.caution {\n        color: var(--warning-color);\n      }\n\n      .uc-profiler-stat-label {\n        font-size: 10px;\n        color: var(--secondary-text-color);\n      }\n\n      .uc-profiler-charts {\n        padding: 12px;\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .uc-profiler-chart {\n        margin-bottom: 12px;\n      }\n\n      .uc-profiler-chart:last-child {\n        margin-bottom: 0;\n      }\n\n      .uc-profiler-chart-title {\n        font-size: 10px;\n        color: var(--secondary-text-color);\n        margin-bottom: 4px;\n      }\n\n      .uc-profiler-chart-bars {\n        display: flex;\n        align-items: flex-end;\n        height: 40px;\n        gap: 1px;\n        background: var(--secondary-background-color);\n        border-radius: 4px;\n        padding: 2px;\n      }\n\n      .uc-profiler-bar {\n        flex: 1;\n        background: var(--primary-color);\n        border-radius: 1px;\n        min-height: 2px;\n        transition: height 0.1s;\n      }\n\n      .uc-profiler-bar.warning {\n        background: var(--warning-color);\n      }\n\n      .uc-profiler-bar.error {\n        background: var(--error-color);\n      }\n\n      .uc-profiler-chart-line {\n        height: 40px;\n        background: var(--secondary-background-color);\n        border-radius: 4px;\n      }\n\n      .uc-profiler-chart-line svg {\n        width: 100%;\n        height: 100%;\n      }\n\n      .uc-profiler-line {\n        fill: none;\n        stroke: var(--primary-color);\n        stroke-width: 2;\n        vector-effect: non-scaling-stroke;\n      }\n\n      .uc-profiler-target-line {\n        stroke: var(--success-color, #4caf50);\n        stroke-width: 1;\n        stroke-dasharray: 4 2;\n        vector-effect: non-scaling-stroke;\n      }\n\n      .uc-profiler-details {\n        flex: 1;\n        overflow-y: auto;\n        padding: 12px;\n      }\n\n      .uc-profiler-detail {\n        margin-bottom: 8px;\n        padding: 8px;\n        background: var(--secondary-background-color);\n        border-radius: 6px;\n      }\n\n      .uc-profiler-detail-header {\n        font-weight: 600;\n        text-transform: capitalize;\n        margin-bottom: 4px;\n      }\n\n      .uc-profiler-detail-stats {\n        display: flex;\n        gap: 12px;\n        font-size: 10px;\n        color: var(--secondary-text-color);\n      }\n\n      .uc-profiler-no-data {\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: var(--secondary-text-color);\n      }\n    "}};var ci={BEFORE_INIT:"beforeInit",AFTER_INIT:"afterInit",BEFORE_RENDER:"beforeRender",AFTER_RENDER:"afterRender",BEFORE_UPDATE:"beforeUpdate",AFTER_UPDATE:"afterUpdate",BEFORE_DESTROY:"beforeDestroy",CONFIG_VALIDATE:"configValidate",CONFIG_TRANSFORM:"configTransform",STATE_CHANGE:"stateChange",HASS_UPDATE:"hassUpdate",HEADER_RENDER:"headerRender",BODY_RENDER:"bodyRender",FOOTER_RENDER:"footerRender",ACTION_EXECUTE:"actionExecute",CLICK:"click",HOLD:"hold",CUSTOM:"custom"},Gi={HIGHEST:0,HIGH:25,NORMAL:50,LOW:75,LOWEST:100},Yt=class{constructor(){this._plugins=new Map,this._hooks=new Map,this._enabled=!0,this._logger=null,this._initHooks()}_initHooks(){for(let e of Object.values(ci))this._hooks.set(e,[])}setLogger(e){this._logger=e}register(e){if(!this._validatePlugin(e))return console.error("[PluginSystem] Invalid plugin:",e),!1;let{id:t,name:i,version:r,hooks:s,init:o,destroy:a}=e;if(this._plugins.has(t)&&(console.warn('[PluginSystem] Plugin "'.concat(t,'" already registered, updating...')),this.unregister(t)),this._plugins.set(t,{id:t,name:i||t,version:r||"1.0.0",hooks:s||{},init:o,destroy:a,enabled:!0,context:{}}),this._registerHooks(t,s||{}),o)try{o.call(this._plugins.get(t).context)}catch(c){console.error('[PluginSystem] Error initializing plugin "'.concat(t,'":'),c)}return this._log("info","Plugin registered: ".concat(i||t," v").concat(r||"1.0.0")),!0}_validatePlugin(e){return!(!e||typeof e!="object"||!e.id||typeof e.id!="string")}_registerHooks(e,t){var i;for(let[r,s]of Object.entries(t)){this._hooks.has(r)||this._hooks.set(r,[]);let o={pluginId:e,handler:typeof s=="function"?s:s.handler,priority:typeof s=="object"&&(i=s.priority)!=null?i:Gi.NORMAL};this._hooks.get(r).push(o),this._hooks.get(r).sort((a,c)=>a.priority-c.priority)}}unregister(e){let t=this._plugins.get(e);if(!t)return!1;if(t.destroy)try{t.destroy.call(t.context)}catch(i){console.error('[PluginSystem] Error destroying plugin "'.concat(e,'":'),i)}for(let i of this._hooks.values()){let r=i.findIndex(s=>s.pluginId===e);r!==-1&&i.splice(r,1)}return this._plugins.delete(e),this._log("info","Plugin unregistered: ".concat(e)),!0}enable(e){let t=this._plugins.get(e);t&&(t.enabled=!0)}disable(e){let t=this._plugins.get(e);t&&(t.enabled=!1)}async executeHook(e,t={},i={}){if(!this._enabled)return t;let r=this._hooks.get(e);if(!r||r.length===0)return t;let s=d({},t);for(let{pluginId:o,handler:a}of r){let c=this._plugins.get(o);if(!(!c||!c.enabled))try{let l=await a.call(c.context,s,i);if(l&&typeof l=="object"&&(s=d(d({},s),l)),l===!1){this._log("debug",'Hook "'.concat(e,'" chain stopped by plugin "').concat(o,'"'));break}}catch(l){console.error('[PluginSystem] Error in hook "'.concat(e,'" (plugin: ').concat(o,"):"),l),this._log("error","Hook error: ".concat(e," (").concat(o,"): ").concat(l.message))}}return s}executeHookSync(e,t={},i={}){if(!this._enabled)return t;let r=this._hooks.get(e);if(!r||r.length===0)return t;let s=d({},t);for(let{pluginId:o,handler:a}of r){let c=this._plugins.get(o);if(!(!c||!c.enabled))try{let l=a.call(c.context,s,i);if(l&&typeof l=="object"&&(s=d(d({},s),l)),l===!1)break}catch(l){console.error('[PluginSystem] Error in hook "'.concat(e,'" (plugin: ').concat(o,"):"),l)}}return s}getPlugins(){return Array.from(this._plugins.values()).map(e=>({id:e.id,name:e.name,version:e.version,enabled:e.enabled}))}getPlugin(e){return this._plugins.get(e)||null}hasPlugin(e){return this._plugins.has(e)}enableSystem(){this._enabled=!0}disableSystem(){this._enabled=!1}_log(e,t){this._logger&&this._logger.log(e,"plugin",t)}destroy(){for(let e of this._plugins.keys())this.unregister(e);this._hooks.clear(),this._enabled=!1}};function Sr(n){return{id:n.id,name:n.name||n.id,version:n.version||"1.0.0",description:n.description||"",author:n.author||"",hooks:n.hooks||{},init:n.init,destroy:n.destroy}}var Ha=Sr({id:"example-plugin",name:"Example Plugin",version:"1.0.0",description:"\u0414\u0435\u043C\u043E\u043D\u0441\u0442\u0440\u0430\u0446\u0438\u043E\u043D\u043D\u044B\u0439 \u043F\u043B\u0430\u0433\u0438\u043D",hooks:{[ci.AFTER_INIT]:function(n){return console.log("[ExamplePlugin] Card initialized!"),n},[ci.CONFIG_TRANSFORM]:function(n){return n}},init(){console.log("[ExamplePlugin] Plugin initialized")},destroy(){console.log("[ExamplePlugin] Plugin destroyed")}});var Cr={APPEND:"append",PREPEND:"prepend",REPLACE:"replace"},$e={CARD:"card",HEADER:"header",BODY:"body",FOOTER:"footer",GLOBAL:"global"},Tr={enabled:!0,sanitize:!0,allowVariables:!0,allowAnimations:!0,maxLength:5e4,blockedProperties:["behavior","expression","-moz-binding"],blockedSelectors:["body","html",":root","head","script"]},qt=class{constructor(e,t={}){this._shadowRoot=e,this._config=d(d({},Tr),t),this._styles=new Map,this._styleElement=null,this._init()}_init(){this._styleElement=document.createElement("style"),this._styleElement.setAttribute("data-custom-css","true"),this._shadowRoot.appendChild(this._styleElement)}add(e,t,i={}){if(!this._config.enabled)return!1;let{scope:r=$e.CARD,mode:s=Cr.APPEND,priority:o=0}=i;if(!t||typeof t!="string")return console.warn("[CustomCSS] Invalid CSS"),!1;if(t.length>this._config.maxLength)return console.warn("[CustomCSS] CSS exceeds maximum length"),!1;let a=t;return this._config.sanitize&&(a=this._sanitize(t),!a)?(console.warn("[CustomCSS] CSS failed sanitization"),!1):(a=this._addScopePrefix(a,r),this._styles.set(e,{css:a,originalCSS:t,scope:r,mode:s,priority:o,enabled:!0}),this._updateStyles(),!0)}remove(e){let t=this._styles.delete(e);return t&&this._updateStyles(),t}enable(e){let t=this._styles.get(e);t&&(t.enabled=!0,this._updateStyles())}disable(e){let t=this._styles.get(e);t&&(t.enabled=!1,this._updateStyles())}update(e,t){let i=this._styles.get(e);return i?this.add(e,t,{scope:i.scope,mode:i.mode,priority:i.priority}):!1}_sanitize(e){let t=e;t=t.replace(/\/\*[\s\S]*?\*\//g,"");for(let i of this._config.blockedProperties)if(new RegExp("".concat(i,"\\s*:"),"gi").test(t))return console.warn("[CustomCSS] Blocked property detected: ".concat(i)),null;for(let i of this._config.blockedSelectors)if(new RegExp("(^|[{},\\s])".concat(i,"[\\s{,]"),"gi").test(t))return console.warn("[CustomCSS] Blocked selector detected: ".concat(i)),null;return/url\s*\(\s*['"]?\s*javascript:/gi.test(t)?(console.warn("[CustomCSS] JavaScript URL detected"),null):(/@import/gi.test(t)&&(console.warn("[CustomCSS] @import is not allowed"),t=t.replace(/@import[^;]*;/gi,"")),this._config.allowAnimations||(t=t.replace(/animation[^;]*;/gi,""),t=t.replace(/transition[^;]*;/gi,"")),t)}_addScopePrefix(e,t){if(t===$e.GLOBAL)return e;let r={[$e.CARD]:":host",[$e.HEADER]:".uc-header",[$e.BODY]:".uc-body",[$e.FOOTER]:".uc-footer"}[t]||"";return r?e.replace(/([^{}]+)(\{[^}]*\})/g,(s,o,a)=>{let c=o.split(",").map(l=>(l=l.trim(),l.startsWith(":host")||l.startsWith(r)?l:r===":host"?":host ".concat(l):"".concat(r," ").concat(l))).join(", ");return"".concat(c," ").concat(a)}):e}_updateStyles(){if(!this._styleElement)return;let t=Array.from(this._styles.values()).filter(i=>i.enabled).sort((i,r)=>i.priority-r.priority).map(i=>i.css).join("\n\n");this._styleElement.textContent=t}applyFromConfig(e){for(let t of this._styles.keys())t.startsWith("config-")&&this._styles.delete(t);if(!e){this._updateStyles();return}if(typeof e=="string"){this.add("config-main",e);return}if(Array.isArray(e)){e.forEach((t,i)=>{typeof t=="string"?this.add("config-".concat(i),t):typeof t=="object"&&this.add("config-".concat(t.id||i),t.css,t)});return}if(typeof e=="object")for(let[t,i]of Object.entries(e))if($e[t.toUpperCase()])this.add("config-".concat(t),i,{scope:t});else{this.add("config-".concat(e.id||"main"),e.css||e,e);break}}setVariable(e,t){if(!this._config.allowVariables)return;let i=e.startsWith("--")?e:"--".concat(e),r=":host { ".concat(i,": ").concat(t,"; }");this.add("var-".concat(e),r,{priority:-1})}setVariables(e){for(let[t,i]of Object.entries(e))this.setVariable(t,i)}getStyles(){return Array.from(this._styles.entries()).map(([e,t])=>d({id:e},t))}clear(){this._styles.clear(),this._styleElement&&(this._styleElement.textContent="")}destroy(){this.clear(),this._styleElement&&(this._styleElement.remove(),this._styleElement=null)}static fromObject(e){let t=[];for(let[i,r]of Object.entries(e)){let s=Object.entries(r).map(([o,a])=>{let c=o.replace(/([A-Z])/g,"-$1").toLowerCase();return"  ".concat(c,": ").concat(a,";")}).join("\n");t.push("".concat(i," {\n").concat(s,"\n}"))}return t.join("\n\n")}static get helpers(){return{hide:e=>"".concat(e," { display: none !important; }"),color:(e,t)=>"".concat(e," { color: ").concat(t," !important; }"),background:(e,t)=>"".concat(e," { background: ").concat(t," !important; }"),padding:(e,t)=>"".concat(e," { padding: ").concat(t," !important; }"),border:(e,t)=>"".concat(e," { border: ").concat(t," !important; }"),fontSize:(e,t)=>"".concat(e," { font-size: ").concat(t," !important; }"),borderRadius:(e,t)=>"".concat(e," { border-radius: ").concat(t," !important; }"),shadow:(e,t)=>"".concat(e," { box-shadow: ").concat(t," !important; }"),fadeIn:(e,t="0.3s")=>"\n        ".concat(e," {\n          animation: uc-custom-fade-in ").concat(t," ease;\n        }\n        @keyframes uc-custom-fade-in {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n      "),gradient:(e,t,i,r="to bottom")=>"".concat(e," { background: linear-gradient(").concat(r,", ").concat(t,", ").concat(i,") !important; }")}}};customElements.get("universal-card")||customElements.define("universal-card",Pe);customElements.get("universal-card-editor")||customElements.define("universal-card-editor",Ue);window.customCards=window.customCards||[];window.customCards.some(n=>n.type==="universal-card")||window.customCards.push({type:"universal-card",name:pi,description:mi,preview:!0,documentationURL:"https://github.com/Mesteriis/universal-card"});window.UniversalCard={version:Kt,UniversalCard:Pe,UniversalCardEditor:Ue,ConfigManager:xe,createMode:Ii,getAllModeStyles:Li,modes:{BaseMode:M,ExpandMode:ne,ModalMode:ce,FullscreenMode:le,TabsMode:de,CarouselMode:ue},features:{VisibilityConditions:Je,StateStyles:Ze,SwipeGestures:Qe,ResponsiveBreakpoints:tt},ui:{Header:Ie,Footer:Le,Badges:Ke,ContextMenu:it,RadialMenu:rt},advanced:{EntityPreview:st,Alerts:ot,QuickActions:at,Timer:nt,IconMapping:ct,AnimationPresets:lt,WebSocketOptimizer:He,getWebSocketOptimizer:Ri,createThrottledCallback:Mi,createDebouncedCallback:Di},complex:{CardLinking:dt,AutoGrouping:ut,CompactMode:ht},themes:{Glassmorphism:mt,Neumorphism:_t,BackgroundPatterns:gt,BorderAnimations:yt,HoverEffects:xt,ColorSchemes:wt,LoadingVariants:kt,MicroInteractions:Et},widgets:{RestApiWidget:St,ImageEntity:Ct,MediaPlayerMini:Tt,NotificationCenter:$t},editor:{ConfigValidator:At,DragDrop:Ot,ResizableCards:It,LockMode:Lt,TextInput:Nt,NumberInput:Rt,Checkbox:Mt,Select:Dt,EntityPicker:zt,IconPicker:Pt,ColorPicker:Ut,Section:Ht,ActionEditor:Ft,getEditorStyles:ji,MultiLanguage:Bt},devtools:{EventLogger:jt,StateInspector:Gt,PerformanceProfiler:Vt},PluginSystem:Yt,CustomCSS:qt,utils:{debounce:Q,throttle:Oe,raf:xi,rafDouble:wi,batchUpdates:ei,createBatchUpdater:ki,whenIdle:Ei,measureTime:Si,deepMerge:Qt,deepClone:X,generateId:Ve,isObject:W,isNonEmptyString:Jt,fireEvent:m,nextFrame:bi,getNestedValue:_i,ensureArray:gi,formatNumber:yi,formatDateTime:vi,isValidEntityId:Ye,getCardHelpers:ze,createCardElement:ti,createCardElements:ae,createErrorCard:ii,getEntityState:We,getStateValue:L,getAttributeValue:te,isState:Ci,executeAction:K,hapticFeedback:Ti,getThemeVariables:$i,getCurrentUser:Xe,isUserAdmin:Ai},constants:{BODY_MODES:k,THEMES:$,DEFAULTS:E,EVENTS:ve,ACTION_TYPES:B,CONDITION_TYPES:A,CSS_VARS:fi,LIMITS:R,ALERT_TYPES:he,ALERT_CONDITIONS:J,TIMER_MODES:D,DISPLAY_FORMATS:ke,ANIMATION_CATEGORIES:b,PRESETS:pe,PRESET_MAPPINGS:Ne,UPDATE_STRATEGIES:me,UPDATE_PRIORITY:ie},config:{ConfigManager:xe,ConfigValidationError:x}};console.info("%c \u{1F3B4} UNIVERSAL-CARD %c v"+Kt+" %c","color: white; background: #3498db; font-weight: bold; padding: 2px 8px; border-radius: 4px 0 0 4px;","color: #3498db; background: #ecf0f1; font-weight: bold; padding: 2px 8px; border-radius: 0 4px 4px 0;","");})();
